<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html">
        
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Serveis de xarxa</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Serveis de xarxa">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html">Serveis de xarxa</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u4" class="parentnode"><p><a class="unit" href="../../../WebContent/u4/introduccio.html">4. Accés a sistemes remots</a></p><ul class="expander"><li id="u4introduccio"><a href="../../../WebContent/u4/introduccio.html">Introducció</a></li><li id="u4mapa"><a href="../../../WebContent/u4/mapa.html">Mapa conceptual</a></li><li id="u4referencies"><a href="../../../WebContent/u4/referencies.html">Més informació</a></li><li id="u4resultats"><a href="../../../WebContent/u4/resultats.html">Resultats d'aprenentatge</a></li><li id="u4resum"><a href="../../../WebContent/u4/resum.html">Resum</a></li><li id="u4a1" class="tocsection"><p id='u4a1continguts'><a class="section" href="../../../WebContent/u4/a1/continguts.html">Introducció a l'accés remot a equips</a><span class="buttonexp"></span></p><ul><li id="u4a1activitats"><a href="../../../WebContent/u4/a1/activitats.html">Activitats</a></li><li id="u4a1exercicis"><a href="../../../WebContent/u4/a1/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u4a1' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u4/a1/continguts.html#usos_mes_frequeents_de_l_acces_remot_a_ordinadors">Usos més freqüents de l'accés remot a ordinadors</a></li><li><a href="../../../WebContent/u4/a1/continguts.html#diferents_tipus_d_acces_remot">Diferents tipus d'accés remot</a></li></ul></div></div><li id="u4a2" class="tocsection"><p id='u4a2continguts'><a class="section" href="../../../WebContent/u4/a2/continguts.html">Administració remota basada en la línea d'ordres</a><span class="buttonexp"></span></p><ul><li id="u4a2activitats"><a href="../../../WebContent/u4/a2/activitats.html">Activitats</a></li><li id="u4a2annexos"><a href="../../../WebContent/u4/a2/annexos.html">Annexos</a></li><li id="u4a2exercicis"><a href="../../../WebContent/u4/a2/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u4a2' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u4/a2/continguts.html#telnet">Telnet</a></li><li><a href="../../../WebContent/u4/a2/continguts.html#introduccio_a_ssh">Introducció a SSH</a></li></ul></div></div><li id="u4a3" class="tocsection"><p id='u4a3continguts'><a class="section" href="../../../WebContent/u4/a3/continguts.html">Administració remota amb interfície gràfica</a><span class="buttonexp"></span></p><ul><li id="u4a3activitats"><a href="../../../WebContent/u4/a3/activitats.html">Activitats</a></li><li id="u4a3annexos"><a href="../../../WebContent/u4/a3/annexos.html">Annexos</a></li><li id="u4a3exercicis"><a href="../../../WebContent/u4/a3/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u4a3' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u4/a3/continguts.html#la_transparencia_de_xarxa_del_sistema_x_window">La transparència de xarxa del sistema X Window</a></li><li><a href="../../../WebContent/u4/a3/continguts.html#vnc_virtual_network_computing">VNC Virtual Network Computing</a></li></ul></div></div><li id="u4a4" class="tocsection"><p id='u4a4continguts'><a class="section" href="../../../WebContent/u4/a4/continguts.html">Gestió remota mitjançant una aplicació local</a><span class="buttonexp"></span></p><ul><li id="u4a4activitats"><a href="../../../WebContent/u4/a4/activitats.html">Activitats</a></li><li id="u4a4exercicis"><a href="../../../WebContent/u4/a4/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u4a4' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u4/a4/continguts.html#introduccio_a_webmin">Introducció a Webmin</a></li></ul></div></div></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../introduccio.html">Servidors web i intermediaris</a></li><li>Gestió de servidors web</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="gestio_de_servidors_web"> Gestió de servidors web </a></h1>
    	
<p>
Amb l’evolució i l’accés lliure a Internet, un dels principals al·licients que han sorgit és la publicació de pàgines web on es poden emmagatzemar uns continguts força atractius per a nosaltres i que, alhora, poden ser consultats des d’arreu del món per tothom.
</p>

<p>
Val a dir que, amb la popularització d’Internet, tant empreses com usuaris han vist la necessitat d’establir un punt des d’on anunciar els seus productes, o bé, a títol particular, donar publicitat a les aficions o capacitats personals mitjançant la publicació de pàgines web.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Les pàgines web, en la seva majoria en format <acronym title="HyperText Markup Language">HTML</acronym>, requereixen
ser allotjades en màquines que disposin d’espai en disc per emmagatzemar arxius <acronym title="HyperText Markup Language">HTML</acronym>, imatges, blocs de codi o arxius de vídeo en directoris específics i, alhora, han de ser capaces d’entendre tot tipus d’extensió dels arxius que són enviats en tots dos sentits de la comunicació.
</p>
</div></div>
<p>
Paral·lelament, no podem deixar de banda la importància de les mesures
de seguretat davant dels perills existents a Internet. Perconseguir-ho, les
pàgines hauran d’estar dissenyades considerant la incorporació de protocols de comunicació segurs com, per exemple, els desenvolupats amb el protocol segur de transferència d’hipertext (HTTPS, <em>hypertext transfer protocol secure</em>) que utilitzen claus i estratègies de xifrat pròpies de les eines del protocol de capa de connexió segura (SSL, <em>secure sockets layer</em>).
</p>

<p>
Les màquines que allotgen les pàgines web reben la categoria de servidors web. Des del punt de vista dels servidors, els requeriments més rellevants són l’espai de disc necessari per poder emmagatzemar l’estructura de la pàgina web i una bona connexió de xarxa perquè el consum de la unitat de processament central (CPU, <em>central processing unit</em>) sigui prou baix.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">HTTPS</p>
<p>
Protocol de xarxa basat en el protocol HTTP adreçat a la transferència segura de dades. Principalment, l’utilitzen les pàgines web d’entitats bancàries, botigues en línia i qualsevol altre servei que requereixi l’enviament de dades personals i contrasenyes.
</p>
</div></div>
<p>
El funcionament dels servidors web és especial ja que, com si es tractés d’una dent de serra, tenen consums de recursos puntuals perquè podem estar un temps sense peticions i, de cop i volta, tenir una allau de peticions. Això fa que els servidors web acostumin a tenir un nombre baix de processos en espera. A mesura que esdevenen necessaris, se’n van arrencant de nous.
</p>

<p>
Val a dir que no totes les peticions consumeixen el mateix, i, per exemple, aquelles pàgines web que executin programes d’interacció amb l’usuari o requereixin xifrat (HTTPS) consumeixen més recursos que altres pàgines web amb menys interacció.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Unitat de processament central (CPU)</p>
<p>
És un component electrònic digital amb capacitat per interpretar instruccions de manera ordenada, processar dades i generar la informació requerida. Col·loquialment, es considera el cervell de l’ordinador.
</p>
</div></div>
<h2><a id="el_protocol_http" >El protocol HTTP</a></h2>
<div class="level2">

<p>
El protocol de transferència d’hipertext (HTTP, <em>hyperText transfer protocol</em>) és el motor que dóna vida a Internet, ja que és la base per a la web (www, <em>world wide web</em>).
</p>

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/smx_m07u3-10_1.png" class="imgB" title="Representació d’una ona amb forma de dent de serra./6" alt="Representació d’una ona amb forma de dent de serra./6" /></li><li><small>Representació d’una ona amb forma de dent de serra.</small></li>
</ul></div>

</p>

<p>
Des d’un punt de vista històric, la web fou creada l’any 1989 al Consell Europeu per la Recerca Nuclear (CERN, <em>Centre Europeene pour la Recherche Nucleaire</em>), amb seu a Ginebra, just a la frontera entre Suïssa i França. Val a dir que aquest organisme disposava (i disposa) d’una àmplia plantilla de científics de diferents països d’Europa que treballen en els seus acceleradors de partícules. En conseqüència, molts equips de treballadors estan integrats per membres de nacionalitats diferents. A més, molts dels experiments que s’hi fan destaquen per la seva complexitat i requereixen anys i anys de planificació i de construcció d’equipaments.
</p>

<p>
Fou arran de la necessitat de disposar de múltiples grups de científics repartits pel món i col·laborant entre ells (enviant-se informes, dibuixos, esquemes, fotos i tot tipus de documents) que va néixer la web.
</p>

<p>
És en els inicis del protocol HTTP, a mitjans de l’any 1990, quan trobem la versió 0.9. Aquesta versió tenia com a única finalitat transferir dades per Internet en forma de pàgines web escrites en llenguatge de marcatge d’hipertext (<acronym title="HyperText Markup Language">HTML</acronym>, <em>Hyper Text Markup Language</em>). A partir de la versió 1.0 del protocol va sorgir la possibilitat de transferir missatges amb encapçalaments que descrivien el contingut dels missatges.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">CERN</p>
<p>
Es tracta del centre de recerca de física de partícules més gran del món. Té diversos acceleradors de partícules connectats entre ells que subministren tot tipus de partícules a nombrosos experiments. Fent recerca en els límits del coneixement, el CERN ajuda a fer grans progressos tecnològics.
</p>
</div></div>
<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/smx_m07u3-10_2.png" class="imgB" alt="" /></li></ul></div>

</p>

<p>
El protocol de transferència d’hipertext (HTTP) és un protocol client-servidor força senzill que articula els intercanvis d’informació entre els clients web i els servidors HTTP. HTTP va ser desenvolupat pel consorci <acronym title="World Wide Web Consortium">W3C</acronym> i la IETF. Aquesta col·laboració va culminar l’any 1999 amb la publicació d’una sèrie de <acronym title="Request for Comments">RFC</acronym>, el més important dels quals va ser el <acronym title="Request for Comments">RFC</acronym> 2616, que especificava la versió 1.1.
</p>

<p>
Des del punt de vista de les comunicacions, està suportat en els serveis de connexió TCP/IP i funciona de la mateixa manera que la resta de serveis propis dels entorns UNIX.
</p>

<p>
Tècnicament, un procés servidor escolta en un port de comunicacions TCP (per defecte, el 80) i espera les sol·licituds de connexió dels clients web. Una vegada establerta la connexió, el protocol TCP s’encarrega de mantenir la comunicació i garantir un intercanvi de dades lliure d’errors.
</p>

<p>
El protocol de transferència d’hipertext es basa en operacions senzilles de sol·licitud/resposta. Quan un client estableix una connexió amb un servidor i envia un missatge amb les dades de la sol·licitud, el servidor respon amb un missatge similar, que conté l’estat de l’operació i el seu resultat possible. Totes les operacions poden adjuntar un objecte o recurs sobre el qual actuen; cada objecte web (document <acronym title="HyperText Markup Language">HTML</acronym>, arxiu multimèdia o aplicació CGI) és conegut pel seu localitzador uniforme de recursos (<acronym title="Uniform Resource Locator">URL</acronym>, <em>uniform resource locator</em>). Els recursos poden ser arxius, el resultat de l’execució d’un programa, una consulta a una base de dades, la traducció automàtica d’un document, etc.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Interfície d’entrada comuna (CGI)</p>
<p>
Tecnologia important de la xarxa (world wide web) que permet que un client (navegador web) sol·liciti dades d’un programa executat en un servidor web. Especifica un estàndard per transferir dades entre el client i el programa.
</p>
</div></div><div class="ioctextl"><div class="ioccontent"><p class="ioctitle">Localitzador uniforme de recursos (URL)</p>
<p>
Generalment, la via de què disposa un usuari per accedir a una pàgina web o un objecte (arxiu) és mitjançant el seu localitzador uniforme de recursos (<acronym title="Uniform Resource Locator">URL</acronym>), que és una mena d’adreça que indica la localització exacta d’un document a Internet.
</p>

<p>
L’adreça que indica la localització exacta del document es compon del nom o l’adreça d’Internet (IP, <em>Internet protocol</em>) del servidor i el camí relatiu del document dins del servidor. També pot incloure altres aspectes com el port pel qual se sol·licita el servei (per defecte, s’assumeix que el 80 és per al protocol HTTP, el 21 per al protocol <acronym title="File Transfer Protocol">FTP</acronym>, etc.) i un nom d’usuari i una contrasenya per a aquells documents que requereixin autenticació per accedir-hi.
</p>
</div></div>
<p>
HTTP és un protocol sense estat, és a dir, no guarda cap informació sobre connexions anteriors. El desenvolupament d’aplicacions web freqüentment necessita mantenir estat. Per això s’utilitzen les galetes (<em>cookies</em>), és a dir, la informació que un servidor pot emmagatzemar en el sistema client. Això permet que les aplicacions web institueixin la noció de “sessió”, i, alhora, permet rastrejar usuaris, ja que les galetes es poden emmagatzemar en el client durant un temps indeterminat.
</p>

</div>

<h3><a id="etapes_d_una_transicio_http" >Etapes d’una transició HTTP</a></h3>
<div class="level3">

<p>
Amb la intenció de conèixer amb més profunditat el protocol HTTP podem avaluar en què consisteix una transacció HTTP.
</p>

<p>
Cada cop que un client fa una petició a un servidor, s’executa un ventall d’etapes:
</p>

<p>

</p>
<ol>
<li class="level1"><div class="li"> Un usuari accedeix a una adreça d’Internet (<acronym title="Uniform Resource Locator">URL</acronym>) seleccionant un enllaç d’un document <acronym title="HyperText Markup Language">HTML</acronym> o introduint-la directament a la barra de navegació d’un navegador web des de la perspectiva del client web.</div>
</li>
<li class="level1"><div class="li"> El client web descodifica l’adreça d’Internet (<acronym title="Uniform Resource Locator">URL</acronym>) separant-ne les diferents parts. És així com s’identifiquen el protocol d’accés, l’adreça del servidor de noms de domini (<acronym title="Domain Name System">DNS</acronym>, <em>Domain Name Server</em>) o d’Internet (IP) del servidor, el possible port opcional (el valor per defecte és el 80) i l’objecte del servidor requerit.</div>
</li>
<li class="level1"><div class="li"> S’obre una connexió TCP/IP amb el servidor cridant el port TCP corresponent. Es fa la petició. En conseqüència, s’envien l’ordre necessària (GET, POST, HEAD, etc.), l’adreça de l’objecte requerit (el contingut de l’adreça d’Internet del servidor), la versió del protocol HTTP utilitzada (en la major part de les ocasions és HTTP/1.0) i un conjunt variable d’informació que inclou dades sobre les capacitats del navegador web, dades opcionals per al servidor, etc.</div>
</li>
<li class="level1"><div class="li"> El servidor retorna la resposta al client. Aquesta resposta consisteix en un codi d’estat i el tipus de dada amb extensions multipropòsit de correu d’Internet (MIME, <em>Multipurpose Internet Mail Extension</em>) de la informació de tornada, seguit de la mateixa informació.</div>
</li>
<li class="level1"><div class="li"> Es tanca la connexió TCP.</div>
</li>
</ol>
<div class="ioctextl"><div class="ioccontent"><p class="ioctitle">Extensió MIME</p>
<p>
El protocol <acronym title="HyperText Markup Language">HTML</acronym> fou dissenyat per transportar per la xarxa arxius en format <acronym title="American Standard Code for Information Interchange">ASCII</acronym>. Amb el progrés de les tecnologies i la inclusió de diferents tipus d’arxius en un format diferent a l’ASCII (imatges, vídeos, sons, etc.) en les aplicacions per Internet, va sorgir la necessitat de transformar aquests format a <acronym title="American Standard Code for Information Interchange">ASCII</acronym> per la seva correcta recepció en el navegador web.
</p>

<p>
El 1992, es van crear els tipus MIME, que eren especificacions per donar format a missatges en un format diferent a l’ASCII perquè poguessin ser enviats i interpretats per Internet. Més endavant es van aplicar també als documents web.
</p>
</div></div>
<p>
Aquest procés es repeteix en cada accés que es faci al servidor HTTP. Per
exemple, si es recull un document <acronym title="HyperText Markup Language">HTML</acronym> que conté quatre imatges, el procés de transició mostrat amb anterioritat es repeteix cinc vegades, és a dir,
una pel document <acronym title="HyperText Markup Language">HTML</acronym> i quatre per les imatges.
</p>

</div>

<h3><a id="l_estandard_http_10" >L’estàndard HTTP/1.0</a></h3>
<div class="level3">

<p>
L’estàndard HTTP/1.0 recull, únicament, tres ordres que representen les operacions de recepció, enviament de la informació i revisió de l’estat.
</p>
<ol>
<li class="level1"><div class="li"> <strong>Comanda GET</strong>. S’utilitza per recollir qualsevol tipus d’informació del servidor. Sempre que premem sobre un enllaç o escrivim una adreça d’Internet a la barra de navegació d’un navegador web, estem utilitzant aquesta comanda. Com a resultat, el servidor HTTP envia el document corresponent a l’adreça d’Internet seleccionada o bé activa un mòdul CGI que, al seu torn, generarà la informació de tornada.</div>
</li>
<li class="level1"><div class="li"> <strong>Comanda HEAD</strong>. Sol·licita informació sobre un objecte (arxiu) com, per exemple, la seva grandària, el tipus, la data de modificació, etc. Acostuma a ser utilitzat pels gestors de memòries cau de pàgines o pels servidors intermediaris (<em>proxy server</em>) per conèixer quan cal actualitzar la còpia que es manté d’un arxiu determinat.</div>
</li>
<li class="level1"><div class="li"> <strong>Comanda POST</strong>. S’utilitza per enviar informació al servidor com, per exemple, les dades contingudes en un formulari. El servidor passarà aquesta informació a un procés encarregat del seu tractament (acostuma a ser una aplicació CGI). L’operació que es durà a terme amb la informació proporcionada dependrà de l’adreça d’Internet (<acronym title="Uniform Resource Locator">URL</acronym>) utilitzada, principalment, en els formularis.</div>
</li>
</ol>

<p>
Val a dir que un client web selecciona automàticament les ordres HTTP necessàries per recollir la informació per a l’usuari. Per tant, davant l’activació d’un enllaç, sempre s’executa una operació GET amb la finalitat de recollir el document corresponent.
</p>

<p>
Tal com mostra la <span class="figref"><a href="#Figura1"><span>figura</span></a></span>, la comunicació entre el navegador i el servidor es duu a terme en dues etapes. D’una banda, el navegador fa una sol·licitud HTTP que, posteriorment, és processada pel servidor que, en conseqüència, envia una resposta HTTP.
</p>
<div class="iocfigure"><a name="Figura1"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Comunicació navegador-servidor

</figcaption><img src="../media/smx_m07u3-13_1.png" alt="" /></figure>
</div>
<p>
Si avaluéssim amb deteniment la sol·licitud HTTP ens trobaríem amb un conjunt de línies de text que el navegador envia al servidor. D’una banda, trobaríem una línia de sol·licitud, és a dir, una línia que especifica el tipus de document sol·licitat, el mètode que s’aplicarà i la versió del protocol utilitzat. Aquesta línia estarà integrada per tres elements separats per un espai, és a dir, el mètode, l’adreça web i el protocol HTTP utilitzat pel client.
</p>

<p>
A continuació, trobaríem els camps de l’encapçalament de sol·licitud, és a dir, un conjunt de línies opcionals que permeten aportar informació addicional sobre la sol·licitud i/o el client (navegador, sistema operatiu, etc.). Cadascuna d’aquestes línies estarà formada per un nom que descriu el tipus d’encapçalament, seguit per dos punts (:) i pel valor de l’encapçalament.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Línia d’encapçalament HTTP</p>
<p>
Camp fonamental que defineix gran part de la informació que s’intercanvia entre els clients i els servidors. Aquestes línies permeten l’enviament d’informació descriptiva en la transacció i faciliten, per exemple, l’autenticació o identificació dels usuaris.
</p>
</div></div>
<p>
Finalment, el cos de la sol·licitud és un conjunt de línies opcionals separades de les línies anteriors amb una línia en blanc. La seva finalitat és permetre que s’enviïn dades al servidor utilitzant un formulari durant la transmissió.
</p>

<p>
Un exemple de sol·licitud HTTP seria el següent:
</p>
<pre class="code">GET http://www.municipi.cat HTTP/1.0 Accept : Text/html If-Modified-Since : Saturday, 19-May-2006 17:39:13 GMT User-Agent : Mozilla/6.0 (compatible; MSIE 5.0; Windows XP)</pre>

<p>
En conseqüència, la sol·licitud HTTP rebria una resposta HTTP, és a dir, un conjunt de línies que el servidor enviarà al navegador web. Com en el cas de la sol·licitud, la resposta HTTP conté alguns elements definitoris com, per exemple, una línia d’estat. Aquesta línia especifica la versió del protocol utilitzada i l’estat de la sol·licitud en procés mitjançant un text explicatiu i un codi.
</p>

<p>

</p>

<p>
En el cas dels camps de l’encapçalament de resposta, aquest és un conjunt de línies opcionals que permeten aportar informació addicional sobre la resposta i/o el servidor. Cadascuna d’aquestes línies es compon d’un nom que defineix el tipus d’encapçalament, seguit per dos punts (:) i pel valor de l’encapçalament.
</p>

<p>
En el cas del cos de la resposta, aquest conté el document sol·licitat. A tall d’exemple, a continuació es mostra un exemple d’una resposta HTTP:
</p>
<pre class="code">HTTP/1.0 200 OK Date: 19 May 2006 17:40:12 GMT Server : Microsoft-IIS/2.0 Content-Type : text/HTML Content-Length : 1245 Last-Modified : 11 May 2006 08:29:13 GMT</pre>

<p>
Pel que fa als codis de resposta, aquests són els codis que es veuen quan el navegador no pot mostrar la pàgina web sol·licitada. La sintaxi d’una resposta HTTP és una línia d’estat i té una estructura fixa on s’indica la ersió, el codi de l’error i un text explicatiu.
</p>

<p>
Els possibles codis d’estat s’identifiquen amb números de tres xifres i es classifiquen en cinc grups segons si són informatius (1xx), d’èxit en la sol·licitud (2xx), per tornar a adreçar la sol·licitud (3xx), per un error generat en el client (4xx) o bé per errors generats en el servidor (5xx).
</p>

<p>
Les respostes més típiques són els codis 200 per indicar la confirmació de la petició i el 404 per indicar que l’objecte sol·licitat no es troba disponible. De fet, tal como mostra la <span class="figref"><a href="#Figura2"><span>figura</span></a></span>, l’error 404 és aquell error en què el servidor no ha trobat res a l’adreça web especificada ni cap adreça preestablerta on adreçar les possibles sol·licituds.
</p>
<div class="iocfigure"><a name="Figura2"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Error 404

</figcaption><img src="../media/smx_m07u3-15_1.png" alt="" /></figure>
</div>
</div>

<h2><a id="el_servidor_apache" >El servidor Apache</a></h2>
<div class="level2">

<p>
A principis de 1995, el servidor web més popular era un servidor desenvolupat pel Centre Nacional d’Aplicacions per a Supercomputadors (NCSA, National Center for Supercomputing Applications) de la Universitat d’Illinois. De fet, històricament, la investigació en el camp de la informàtica i les telecomunicacions per part d’aquest centre universitari nordamericà va contribuir, en gran mesura, al desenvolupament de la teranyina d’abast mundial (WWW).
</p>

<p>
Cal destacar que el desenvolupament del servidor web per part del NCSA va quedar en punt mort durant l’any 1994 perquè el seu principal desenvolupador, Rob McCool, va marxar. Això va comportar que diversos grups de desenvolupadors de llocs web es coordinessin per assumir, prenent com a base el servidor NCSA 1.3, el desenvolupament del projecte i introduir i desenvolupar millores importants. Aquesta coordinació (mitjançant l’intercanvi de correus electrònics) va fer que, progressivament, sorgissin millores en forma de pegats.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Supercomputador</p>
<p>
Es tracta d’un ordinador amb una de les capacitats de processament més elevades del món, concretament, la seva capacitat de càlcul. A Barcelona hi ha instal·lat el supercomputador Marenostrum.
</p>
</div></div>
<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/smx_m07u3-15_2.png" class="imgB" title="/-19" alt="/-19" /></li><li><small></small></li>
</ul></div>

</p>

<p>
Arribats a aquest punt, hem de destacar els desenvolupadors Cliff Skolnick i Brian Behlendorf, ja que van establir una llista de correus com a espai per compartir informació i un servidor d’arxius on els desenvolupadors podien penjar el resultat dels seus esforços. Tot aquest còmput d’esforços va fer que un grup de 8 programadors fundés el grup Apache. A mitjan 1995, es fa fer pública la primera versió oficial del servidor Apache (la 0.6.2).
</p>
<div class="ioctextl"><div class="ioccontent"><p class="ioctitle">Origen del nom Apache</p>
<p>
Hi ha dues explicacions sobre l’origen del nom del projecte. D’acord amb el que exposa la Fundació Apache, el nom fou triat com a homenatge a la tribu nativa nord-americana apache coneguda, històricament, per la seva resistència i les seves habilitats al camp de batalla.
</p>

<p>
Posteriorment, un dels desenvolupadors originals del servidor Apache va exposar que el nom provenia de les característiques del desenvolupament del servidor. De fet, partint de la paraula ‘pegat’ en anglès (<em>patch</em>) i, considerant que durant el desenvolupament del programari es van enviar moltes revisions i millores, el grup de desenvolupadors va decidir el nom per al que ells consideraven un “servidor web apedaçat” (“<strong>a patchy</strong> web server”).
</p>
</div></div>
<p>
Amb l’oficialització de la primera versió pública del servidor Apache, el seu desenvolupament va continuar per dues vies paral·leles. D’una banda, alguns treballadors van continuar centrant els seus esforços en el desenvolupament de millores del servidor amb la intenció d’arribar a la sèrie 0.7. De l’altra, un altre grup va tornar a escriure tot el codi de la primera versió per acabar creant una arquitectura nova de tipus modular –en un servidor modular, al nucli només hi ha les funcionalitats bàsiques. Fou al juliol de 1995 quan es va optar per migrar tota la feina feta en el desenvolupament de l’Apache 0.7 a aquesta arquitectura nova. Aquesta decisió va comportar el sorgiment de l’Apache 0.8.
</p>

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/smx_m07u3-16_1.png" class="imgB" alt="" /></li></ul></div>

</p>

<p>
Posteriorment, durant el mes de desembre de 1995, va aparèixer l’Apache 1.0, que incloïa un volum important de documentació i moltes millores en forma de mòduls per ser incorporades al servidor web.
</p>

<p>
El 1999, davant de l’espectacular acollida del programari Apache, els membres del grup Apache van establir la Fundació del Programari Apache, que s’encarrega de donar suport de tipus legal i econòmic al desenvolupament del servidor Apache i de tots aquells projectes relacionats.
</p>

<p>
L’Apache va ser un projecte que va atreure molta gent pel gran interès de la seva fita, que és aconseguir el servidor web més ràpid, més eficient i amb més funcionalitat sempre sota l’enfocament de la distribució lliure, regit per la llicència GNU (<em>general public license</em>).
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">El servidor HTTP Apache ...</p>
<p>
… és un servidor de programari lliure per a sistemes de tipus Unix, Microsoft Windows i altres plataformes. L’última versió estable (2.0) ha estat creada de
nou des de l’inici i no conté codi original de l’antic NCSA HTTPd.
</p>
</div></div>
<p>
Tal com mostra la <span class="figref"><a href="#Figura3"><span>figura</span></a></span>, l’empresa anglesa especialitzada en serveis d’Internet Netcraft publica anualment un estudi en què el servidor Apache apareix com el servidor web més utilitzat arreu del món.
</p>
<div class="iocfigure"><a name="Figura3"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Gràfic de la utilització dels servidors web més populars

</figcaption><img src="../media/smx_m07u3-16_2.png" alt="" /></figure>
</div>
<p>
L’Apache és un servidor web flexible, ràpid i eficient, contínuament actualitzat i adaptat als nous protocols HTTP/1.1. De la gran quantitat de característiques destaquen:
</p>
<ol>
<li class="level1"><div class="li"> És multiplataforma.</div>
</li>
<li class="level1"><div class="li"> Segueix els protocols estàndard internacionals.</div>
</li>
<li class="level1"><div class="li"> És modular, és a dir, es pot adaptar a diferents entorns i necessitats que poden activar només aquelles parts que són necessàries. També disposa d’una interfície de programació d’aplicacions (<acronym title="Application Programming Interface">API</acronym>, <em>application programming interface</em>) de mòduls que permet que els usuaris puguin programar els seus propis mòduls específics.</div>
</li>
<li class="level1"><div class="li"> Es desenvolupa de manera oberta i es retroalimenta d’idees noves, registres (<em>logs</em>) d’errades i pegats per a la resolució dels problemes que vagin sorgint.</div>
</li>
<li class="level1"><div class="li"> És extensible, ja que gràcies a la seva característica modular s’han desenvolupat diverses extensions com, per exemple, les de programació (PHP, Python, Java, Perl, etc.), que es corresponen amb un llenguatge de programació que treballa simultàniament amb el servidor i que permeten connectar amb múltiples bases de dades (Oracle, MySQL, PostgreSQL, Adabas, etc.).</div>
</li>
</ol>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Programari multiplataforma</p>
<p>
És aquell en què es disposa de versions per a diferents sistemes operatius (Windows, GNU/Linux, mac, etc.).
</p>
</div></div>
<p>
Avui en dia hi ha diferents versions del servidor web d’Apache que s’estan mantenint i millorant (1.3, 2.0 i 2.2), ja que ofereixen característiques noves per adaptar-se a totes les necessitats noves que van sorgint.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">API</p>
<p>
Una interfície de programació d’aplicacions és un conjunt de declaracions que defineix el contracte d’un component informàtic amb qui farà ús dels seus serveis.
</p>
</div></div>
<p>
Finalment, tal com mostra la <span class="figref"><a href="#Figura3"><span>figura</span></a></span>, és important destacar que, tot i que Apache ha estat, des de fa molts anys, el dominant absolut dels servidors d’Internet, des d’un temps ençà la distància entre els servidors web Apache i els servidors de serveis d’informació d’Internet (IIS, Internet information server) que proporciona Microsoft per a totes les seves distribucions per servidors ha esdevingut progressivament menor.
</p>

<p>
Per explicar la reducció en el distanciament entre tots dos servidors web, ens hem de centrar en l’evolució de la xarxa d’Internet i els seus usuaris. D’una banda, Microsoft va adquirir diferents proveïdors d’hostatge (hosting) perquè tots els dominis que no disposaven de pàgina web mostressin una pàgina predefinida i proporcionada per un servidor de serveis d’informació d’Internet (IIS). Això va comportar un augment important del nombre de dominis que utilitzaven el servidor de Microsoft.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Microsoft</p>
<p>
Empresa multinacional nordamericana creada l’any 1975 per Bill Gates i Paul Allen. Microsoft (acrònim de Microprocessor Software) és la creadora del
popular sistema operatiu MS Windows.
</p>
</div></div>
<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/smx_m07u3-17_1.png" class="imgB" title="Google Inc. És una corporació pública nord-americana propietària de la marca Google i que té com a producte principal el motor de cerca amb el mateix nom./-16" alt="Google Inc. És una corporació pública nord-americana propietària de la marca Google i que té com a producte principal el motor de cerca amb el mateix nom./-16" /></li><li><small>Google Inc. És una corporació pública nord-americana propietària de la marca Google i que té com a producte principal el motor de cerca amb el mateix nom.</small></li>
</ul></div>

</p>

<p>
Posteriorment, l’empresa Google va decidir utilitzar un servidor web propi en detriment del servidor web Apache que estaven utilitzant fins aquell moment. A tot això, cal afegir que el nombre de blocs en pàgines web que proporcionen espais i plantilles predefinits per fer-ho juntament amb espais web on crear una mena d’aparador personal (per exemple, <a href="http://www.myspace.com" class="urlextern" title="http://www.myspace.com"  rel="nofollow">www.myspace.com</a>) estan en creixement constant i estan guanyant terreny. Considerant que tots aquests dominis no utilitzen Apache, la quota es va reduint progressivament i, per tant, l’hegemonia del servidor web Apache no és la mateixa que anys enrere.
</p>

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/smx_m07u3-18_1.png" class="imgB" title="MySpace és un lloc web d’interacció social integrat per perfils personals d’usuaris./-16" alt="MySpace és un lloc web d’interacció social integrat per perfils personals d’usuaris./-16" /></li><li><small>MySpace és un lloc web d’interacció social integrat per perfils personals d’usuaris.</small></li>
</ul></div>

</p>

</div>

<h3><a id="configuracio_basica_del_servidor_web_apache" >Configuració bàsica del servidor web Apache</a></h3>
<div class="level3">

<p>
Apache és un dels servidors web més estesos a Internet tant per la seva fiabilitat i seguretat com per la seva condició de gratuïtat. Part de la seva popularitat es basa en la possibilitat de modificar les principals directives de configuració, ja que totes les opcions i directives d’Apache es troben en un arxiu (<code>httpd.conf</code>).
</p>

<p>
Serà dins de l’arxiu de configuració principal on haurem de configurar els valors necessaris per obtenir els resultats que s’adaptin millor a les nostres necessitats. Des del punt de vista del sistema operatiu Windows, la configuració del servidor web Apache es troba a l’arxiu <code>“C:\Arxius de Programa\Apache Group\Apache2\conf\httpd.conf”</code>.
</p>

<p>

</p>

<p>
En l’arxiu httpd.conf podem trobar, per exemple, el contingut següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">#</div></li><li class="li1"><div class="de1"># Timeout: The number of seconds before receives and sends time</div></li><li class="li1"><div class="de1"># out.</div></li><li class="li1"><div class="de1">#</div></li><li class="li1"><div class="de1">Timeout 300</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"># KeepAlive: Whether or not allow persistent connections (more</div></li><li class="li1"><div class="de1"># than</div></li><li class="li1"><div class="de1"># one request per connection). Set to &quot;Off&quot; to deactivate.</div></li><li class="li1"><div class="de1">#</div></li><li class="li1"><div class="de1">KeepAlive On</div></li></ol></pre>
<div class="ioctextl"><div class="ioccontent"><p class="ioctitle">Les conexions KeepAlive</p>
<p>
Són les connexions que es mantenen obertes després de rebre una petició del client i servir-la; és així com la petició següent podrà aprofitar la connexió i, en conseqüència, no haurà d’obrir una connexió per a cada element de la pàgina (imatges, <em>css</em>, etc.).
</p>

<p>
Un valor de 15 segons per al paràmetre <em>KeepAlive</em> és elevat, ja que poques vegades una pàgina web trigarà tant de temps a ser carregada. Si aquest valor és elevat farem que s’ompli de connexions d’Apache que no s’utilitzen.
</p>
</div></div><div class="ioctext"><div class="ioccontent"><p class="ioctitle">Paràmetre timeout</p>
<p>
Permet indicar el nombre de segons abans que es cancel·li una connexió per falta de resposta. El valor per defecte és de 300 segons.
</p>
</div></div>
<p>
Val a dir que, per treballar amb l’arxiu <code>httpd.conf</code>, haurem de crear una còpia de l’arxiu que desarem en una carpeta diferent i, opcionalment, com a nom d’arxiu podem introduir la data actual com, per exemple, <code>07072009httpd.conf</code>.
</p>

<p>
Dins de l’arxiu de configuració principal del servidor web Apache, hem de conèixer amb profunditat els paràmetres principals que l’integren i que, alhora, ens permetran ajustar el funcionament del nostre servidor web.
</p>
<ol>
<li class="level1"><div class="li"> <strong>Paràmetre <code>DocumentRoot</code></strong>. Aquest paràmetre permet modificar la carpeta on es troben ubicades les nostres pàgines web i des d’on se serviran els fitxers. Per exemple, des del punt de vista del sistema operatiu Windows, dins de l’arxiu de configuració principal trobaríem <code>DocumentRoot “D:\webs”</code> i, en el cas de Linux, <code>DocumentRoot /var/www/</code>.</div>
</li>
<li class="level1"><div class="li"> <strong>Paràmetre <code>ServerRoot</code></strong>. Aquest paràmetre permet definir en quin lloc es troba la configuració del servidor. Normalment tindrà els directoris <code>conf</code> i <code>logs</code>. En el cas del sistema operatiu Linux seria, per exemple, <code>ServerRoot /etc/httpd</code>.</div>
</li>
<li class="level1"><div class="li"> <strong>Paràmetre <code>DirectoryIndex</code></strong>. Quan un navegador visita una pàgina web, el primer que fa el servidor és retornar l’arxiu indicat a <code>DirectoryIndex</code> que, per defecte, acostuma a ser index.html.<br/>
En el cas que volguéssim modificar el nom de l’arxiu per defecte per paginainici.html hem de fer el canvi <code>DirectoryIndex paginainici.html</code></div>
</li>
<li class="level1"><div class="li"> <strong>Paràmetre <code>Listen</code></strong>. Quan un navegador visita una pàgina web acostuma a utilitzar, per defecte, el port 80. De fet, si visitem la pàgina <a href="http://www.google.cat" class="urlextern" title="http://www.google.cat"  rel="nofollow">www.google.cat</a> és com si estiguéssim visitant la pàgina <a href="http://www.google.cat:80" class="urlextern" title="http://www.google.cat:80"  rel="nofollow">www.google.cat:80</a>.<br/>
Per canviar el port a través del qual el servidor web Apache està esperant peticions (per exemple, pel port <code>52123</code>) hauríem de modificar el paràmetre, (en aquest cas <code>Listen 52123</code>). Un cop fet el canvi, quan visitem el servidor web haurem d’escriure l’adreça i el port (<code><a href="http://localhost:52123" class="urlextern" title="http://localhost:52123"  rel="nofollow">http://localhost:52123</a></code>).</div>
</li>
</ol>

<p>
Val a dir que, tot i que per defecte el port utilitzat serà el <code>80</code>, en podem escoltar d’altres, senzillament, especificant-los. Per exemple, per definir que el servidor escolti el port <code>80</code> i el <code>8080</code> introduiríem: 
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">Listen 80</div></li><li class="li1"><div class="de1">Listen 8080</div></li></ol></pre>

<p>
També podríem definir quins són els dispositius de xarxa que escoltarem:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">Listen 0.0.0.0:80</div></li><li class="li1"><div class="de1">Listen 192.168.0.2:8080</div></li></ol></pre>
<ol>
<li class="level1"><div class="li"> <strong>Paràmetre <code>&lt;Directory “..”&gt; …. &lt;/Directory&gt;</code></strong>. El paràmetre <code>Directory</code> permet configurar permisos en els diferents directoris del nostre espai web. Es tracta d’una directriu que es fa servir per definir característiques que només s’aplicaran al directori especificat i no a tot el servidor (per això s’ha de tancar).<br/>
Aquests permisos serien els següents:</div>
<ol>
<li class="level2"><div class="li"> Options</div>
<ul>
<li class="level3"><div class="li"> <code>Indexes</code>. Si dins de la carpeta no hi ha cap arxiu igual que el que hem definit al paràmetre <code>DirectoryIndex</code> al navegador es mostrarà un índex amb tots els arxius de la carpeta actual.</div>
</li>
<li class="level3"><div class="li"> <code>FollowSymLinks</code>. El servidor seguirà els enllaços simbòlics (lògics), és a dir, els àlies.</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> <strong><code>Deny from all, Deny from 192.168.1.50</code></strong>. Denega la petició a una carpeta, un arxiu o una adreça d’Internet.</div>
</li>
<li class="level2"><div class="li"> <strong><code>Allow from all, Allow from 192.168.1.50</code></strong>. Permet la petició a una carpeta, un arxiu o una adreça d’Internet.<br/>
A tall d’exemple, podríem trobar el següent:</div>
<ol>
<li class="level3"><div class="li"> Volem permetre que en el directori (<code>DocumentRoot</code>) es puguin seguir àlies.<pre class="code xml"><ol><li class="li1"><div class="de1">&lt;DIRECTORY &quot;D:\PAGSWEBS&quot;&gt;</div></li><li class="li1"><div class="de1">  Options FollowSymLinks</div></li><li class="li1"><div class="de1">  Allow from all</div></li><li class="li1"><div class="de1">&lt;/DIRECTORY&gt;</div></li></ol></pre>
</div>
</li>
<li class="level3"><div class="li"> Volem permetre que en el directori arrel (<code>DocumentRoot</code>) es pugui seguir àlies i mostrar un llistat del directori en el cas que no es localitzi l’arxiu indicat a <code>DirectoryIndex</code>.<pre class="code xml"><ol><li class="li1"><div class="de1">&lt;DIRECTORY &quot;D:\PAGSWEBS&quot;&gt;</div></li><li class="li1"><div class="de1">  Options Indexes FollowSymLinks</div></li><li class="li1"><div class="de1">  Allow from all</div></li><li class="li1"><div class="de1">&lt;/DIRECTORY&gt;</div></li></ol></pre>
</div>
</li>
<li class="level3"><div class="li"> Volem permetre que només l’adreça d’Internet 192.168.1.2 pugui accedir a la carpeta <code>admin</code>.<pre class="code xml"><ol><li class="li1"><div class="de1">&lt;DIRECTORY &quot;D:\PAGSWEBS\admin&quot;&gt;</div></li><li class="li1"><div class="de1">  Deny from all</div></li><li class="li1"><div class="de1">  Allow from 192.168.1.2</div></li><li class="li1"><div class="de1">&lt;/DIRECTORY&gt;</div></li></ol></pre>
</div>
</li>
<li class="level3"><div class="li"> Volem prohibir l’accés a la carpeta <code>secrets</code>.<pre class="code xml"><ol><li class="li1"><div class="de1">&lt;DIRECTORY &quot;D:\PAGSWEBS\secrets&quot;&gt;</div></li><li class="li1"><div class="de1">  Deny from all</div></li><li class="li1"><div class="de1">&lt;/DIRECTORY&gt;</div></li></ol></pre>
</div>
</li>
</ol>
</li>
</ol>
</li>
<li class="level1"><div class="li"> <strong>Paràmetre <code>&lt;Files “..”&gt; …. &lt;/Files&gt;</code></strong>. El paràmetre <code>Files</code> permet configurar permisos en els diferents arxius del nostre espai web. Val a dir que el paràmetre <code>Files</code> ha d’estar inclòs dintre del paràmetre <code>Directory</code>.<br/>
Aquests permisos serien els següents:</div>
<ol>
<li class="level2"><div class="li"> <code>Deny from all, Deny from 192.168.1.50</code>. Denega la petició a un arxiu o una adreça d’Internet.</div>
</li>
<li class="level2"><div class="li"> <code>Allow from all, Allow from 192.168.1.50</code>. Permet la petició a un arxiu o una adreça de Internet.<br/>
A tall d’exemple, podríem trobar el següent:</div>
<ol>
<li class="level3"><div class="li"> Volem prohibir l’accés a arxius amb format <code>JPG</code> dintre de la carpeta <code>arxiusimportants</code>.<pre class="code xml"><ol><li class="li1"><div class="de1">&lt;DIRECTORY &quot;D:\PAGSWEBS\arxiusimportants&quot;&gt;</div></li><li class="li1"><div class="de1">  &lt;Files *.jpg&gt;</div></li><li class="li1"><div class="de1">    Deny from all</div></li><li class="li1"><div class="de1">  &lt;/Files&gt;</div></li><li class="li1"><div class="de1">  Allow from all</div></li><li class="li1"><div class="de1">&lt;/DIRECTORY&gt;</div></li></ol></pre>
</div>
</li>
</ol>
</li>
</ol>
</li>
<li class="level1"><div class="li"> <strong>Paràmetre <code>Alias</code></strong>. El paràmetre <code>Alias</code> permet carpetes lògiques, és a dir, carpetes ubicades en un directori diferent a l’assignat dins del paràmetre <code>DocumentRoot</code>.<br/>
Per exemple, si definíssim <code>Alias /nohisoc “D:\PAGSWEBS2”</code>, quan accedíssim a l’adreça <a href="http://localhost/nohisoc" class="urlextern" title="http://localhost/nohisoc"  rel="nofollow">http://localhost/nohisoc</a>, realment, estaríem accedint a la carpeta <code>D:\PAGSWEBS2</code>. En aquest cas, hauríem de tenir l’opció <code>Options followsymlinks</code> activada en el directori <code>DocumentRoot</code>.</div>
</li>
<li class="level1"><div class="li"> <strong>Paràmetre <code>&lt;virtualhost&gt;…&lt;/virtualhost&gt;</code></strong>. El paràmetre <code>virtualhost</code> permet configurar més d’un lloc web en un mateix servidor, és a dir, una mateixa adreça d’Internet per a diferents noms de domini. Val a dir que, si volem utilitzar aquest paràmetre, cal haver configurat el servidor de noms de domini (<acronym title="Domain Name System">DNS</acronym>) perquè adreci els noms de domini cap al nostre servidor web Apache. </div>
</li>
</ol>

<p>
A tall d’exemple, des del punt de vista del sistema operatiu Windows, podríem definir que es permetessin llocs web virtuals (<em>virtual hosts</em>) mitjançant el port 80 (<span class="figref"><a href="#Figura4"><span>figura</span></a></span>).
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1">NameVirtualHost *:80</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;VirtualHost *:80&gt;</div></li><li class="li1"><div class="de1">  ServerName res.cat</div></li><li class="li1"><div class="de1">  DocumentRoot c:\www\res.cat</div></li><li class="li1"><div class="de1">&lt;/VirtualHost&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;VirtualHost *:80&gt;</div></li><li class="li1"><div class="de1">  ServerName cat.com</div></li><li class="li1"><div class="de1">  DocumentRoot c:\www\cat.com</div></li><li class="li1"><div class="de1">&lt;/VirtualHost&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;VirtualHost *:80&gt;</div></li><li class="li1"><div class="de1">  ServerName poblacio.servidor</div></li><li class="li1"><div class="de1">  DocumentRoot c:\www\geografia\poblacio</div></li><li class="li1"><div class="de1">&lt;/VirtualHost&gt;</div></li></ol></pre>
<div class="iocfigure"><a name="Figura4"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Llocs web virtuals

</figcaption><img src="../media/smx_m07u3-22_1.png" alt="" /></figure>
</div>
<p>
Considerant la idiosincràsia del sistema operatiu Linux, és important que,
arribats a aquest punt, avaluem els elements principals (arxius i directoris) que defineixen la configuració del servidor web Apache, ja que els haurem de tenir en compte a l’hora d’establir l’hostatge de llocs web virtuals
(<code>virtual hosting</code>).
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Paràmetre alias</p>
<p>
Permet introduir directoris que estan fora de l’arrel del servidor perquè siguin accessibles com si fossin dins. Per exemple, <em>Alias / alegre “/var/alegre”</em> faria que accedíssim a <em>/var/alegre</em> especificant el directori darrere del
nom del servidor (<a href="http://www.patata.cat/alegre7" class="urlextern" title="http://www.patata.cat/alegre7"  rel="nofollow">www.patata.cat/alegre7</a>).
</p>
</div></div><ul>
<li class="level1"><div class="li"> <strong><code>/etc/apache2/apache2.conf</code></strong>. Es tracta de l’arxiu de configuració principal del servidor. Mitjançant directives s’inclouen els mòduls necessaris i la resta de la configuració dels arxius de configuració.</div>
</li>
<li class="level1"><div class="li"> <strong><code>/etc/apache2/httpd.conf</code></strong>. Aquest arxiu es manté per raons de comptabilitat amb la primera versió d’Apache. A més, es recomana que la configuració dels mòduls de tercers vagin dins d’aquest arxiu.</div>
</li>
<li class="level1"><div class="li"> <strong><code>/etc/apache2/sites-available</code></strong>. Es tracta del directori on hi ha els arxius de configuració dels diferents llocs virtuals. L’arxiu per defecte (<code>default</code>) conté la configuració del lloc per defecte.</div>
</li>
<li class="level1"><div class="li"> <strong><code>/etc/apache2/sites-enabled</code></strong>. És un directori on hi ha enllaços simbòlics als arxius de configuració dels llocs virtuals (en el directori <code>/etc/apache2/sites-available</code>) que es troben actius.</div>
</li>
<li class="level1"><div class="li"> <strong><code>/etc/apache2/ports.conf</code></strong>. És l’arxiu de configuració on s’indica el port pel qual el servidor escolta (per defecte, el 80). </div>
</li>
<li class="level1"><div class="li"> <strong><code>/etc/apache2/mods-avalaible</code></strong> i <strong><code>/etc/apache2/mods-enabled</code></strong>. Arxius de configuració dels mòduls d’Apache, principalment en el cas de la instal·lació del programari PHP.</div>
</li>
</ul>

<p>
En els arxius de configuració, les línies que comencen amb el símbol # són comentaris i el servidor no els considera. La configuració del servidor defineix un lloc virtual per defecte que, com a directori de treball, és <code>/var/www</code>.
</p>

<p>
De fet, per comprovar que hem instal·lat correctament el servidor, introduirem dins de la barra de navegació d’un navegador web la cadena de text <a href="http://localhost" class="urlextern" title="http://localhost"  rel="nofollow">http://localhost</a>. A continuació, es visualitzarà la pàgina web desada
en el directori <code>/var/www/apache2-default3</code>.
</p>

<p>
Per últim, hem de destacar que el servidor web Apache utilitza dos arxius de registre anomenats <code>access.log</code> i <code>error.log</code> que es troben desats en la carpeta <code>/var/log/apache2</code>.
</p>

<p>
És en l’arxiu <code>/var/log/apache2/access.log</code> on Apache va registrant tots els accessos que els ordinadors fan al servidor web i en cada línia d’aquest arxiu va desant l’adreça IP, la data i l’hora, l’HTTP enviada pel client, l’adreça d’Internet sol·licitada i la versió del navegador i el sistema operatiu.
</p>

<p>
Analitzant amb deteniment aquest arxiu, podem veure quants cops s’ha descarregat una pàgina o un arxiu o bé les adreces IP més actives. Aquest arxiu de registre és utilitzat pels programes que presenten estadístiques d’accés al servidor web, com per exemple <code>Awstats</code>.
</p>

<p>
És en l’arxiu <code>/var/log/apache2/error.log</code> on Apache registra totes les incidències o els errors que es van produint com, per exemple, quan un client sol·licita una pàgina inexistent o quan un client prova d’entrar en una carpeta prohibida o protegida. Per exemple, si estem configurant alguna cosa en Apache (carpetes privades, carpetes segures, servidors web virtuals, àlies, etc.) i no funciona, una molt bona opció és fer proves i examinar l’arxiu <code>error.log</code>, ja que ens proporcionarà un ampli ventall de pistes per trobar la solució al nostre problema.
</p>

<p>
Per tant, des del punt de vista del sistema operatiu Linux, si volem veure les últimes 20 línies de l’arxiu <code>access.log</code> per conèixer qui hi està accedint, com a administradors, haurem d’escriure i executar la línia següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># tail –n 20 /var/log/apache2/access.log</div></li></ol></pre>

</div>

<h3><a id="instal_lacio_i_configuracio_del_servidor_web_apache_per_a_windows" >Instal·lació i configuració del servidor web Apache per a Windows</a></h3>
<div class="level3">

<p>
Un servidor web (Apache2) és una aplicació que interactua amb Internet igual que un navegador web. Per exemple, quan el navegador carrega una pàgina envia una petició a la web i aquesta li respon amb un <acronym title="HyperText Markup Language">HTML</acronym>/imatge/arxiu que el navegador mostra per pantalla. En aquest cas, el servidor seria la web, ja que és la que rep la petició i qui envia l’arxiu sol·licitat.
</p>

<p>
Per dur a terme la instal·lació del servidor web Apache haurem d’adreçarnos a la pàgina web <a href="http://httpd.apache.org/download.cgi" class="urlextern" title="http://httpd.apache.org/download.cgi"  rel="nofollow">httpd.apache.org/download.cgi</a>, des d’on podrem descarregar la versió actualitzada del servidor web. En el nostre cas, la distribució que escollirem serà el paquet d’instal·lació de Microsoft (MSI, <em>Microsoft Installer</em>), ja que agilitzarà, en gran mesura, els passos que cal seguir (<span class="figref"><a href="#Figura5"><span>figura</span></a></span>).
</p>
<div class="iocfigure"><a name="Figura5"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Pàgina oficial del programari Apache

</figcaption><img src="../media/smx_m07u3-24_1.png" alt="" /></figure>
</div>
<p>
Un cop haguem descarregat l’arxiu, haurem de fer clic dues vegades sobre l’arxiu en qüestió per donar inici al procés d’instal·lació. Tal com mostra la <span class="figref"><a href="#Figura6"><span>figura</span></a></span>, apareixerà una petita interfície gràfica relacionada amb el programari i amb la seva llicència.
</p>
<div class="iocfigure"><a name="Figura6"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Procés d’instal·lació del programari Apache

</figcaption><img src="../media/smx_m07u3-25_1.png" alt="" /></figure>
</div>
<p>
Dins del procés d’instal·lació del programari, arribarem a un punt en què haurem de definir una part dels paràmetres principals del servidor web (<span class="figref"><a href="#Figura7"><span>figura</span></a></span>).
</p>
<div class="iocfigure"><a name="Figura7"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Definició dels paràmetres del servidor

</figcaption><img src="../media/smx_m07u3-25_2.png" alt="" /></figure>
</div>
<p>
Tot i que dins de la casella del nom de domini de la xarxa (<em>network domain</em>) tenim diverses opcions per triar, moltes vegades instal·larem el servidor per utilitzar-lo en la comprovació del funcionament correcte de les pàgines web que dissenyem. En aquest cas, escriuríem <em>localhost</em>. Ara bé, si volem utilitzar el servidor web per atorgar-li una projecció (i una funció) pública, haurem d’introduir la nostra adreça d’Internet (IP).
</p>

<p>
D’altra banda, el nom del servidor (<em>server name</em>) és el nom que volem que el nostre servidor web tingui. Paral·lelament, dins de la casella del correu electrònic (<em>administrator’s email address</em>) introduirem l’adreça de l’administrador del servidor web.
</p>

<p>
Finalment, trobem dues opcions. L’opció <em>For all users in port 80, as a  service</em> ens permetrà indicar que Apache s’instal·li com un servidor de Windows, és a dir, que s’executi amb l’arrencada de l’ordinador. Si escollim aquesta opció, el servidor escoltarà pel port 80.
</p>

<p>
En el cas d’escollir l’opció <em>Only for the current user, on port 8080, when started manually</em>, el servidor Apache s’instal·larà com un programa normal, és a dir, per executar-lo haurem d’escollir-lo mitjançant el menú d’inici de la interfície gràfica del sistema operatiu.
</p>

<p>
Tal com mostra la <span class="figref"><a href="#Figura8"><span>figura</span></a></span>, un cop haguem definit tots aquests paràmetres, el procés d’instal·lació ens plantejarà si volem optar per fer la instal·lació estàndard o la personalitzada, és a dir, haurem d’escollir els elements que s’han d’instal·lar. A continuació, el procés d’instal·lació buscarà confirmar la carpeta on desar els diferents arxius del servidor web.
</p>
<div class="iocfigure"><a name="Figura8"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Selecció del tipus i la carpeta d’instal·lació

</figcaption><img src="../media/smx_m07u3-26_1.png" alt="" /></figure>
</div>
<p>
Arribats a aquest punt, és important destacar que, en el cas que vulguem canviar el directori on instal·lar el programari, podrem definir una carpeta de destinació nova. A continuació, apareixerà una finestra de confirmació que donarà inici a la instal·lació del programari Apache. Finalment, un cop finalitzat el procés, apareixerà una altra finestra amb la qual se sol·licita la finalització (i enllestiment) de la instal·lació del nostre servidor web.
</p>

<p>
Un cop ja tinguem el nostre servidor web Apache instal·lat, ja podrem
comprovar que, efectivament, la instal·lació s’ha fet correctament. Per comprovar-ho, podem arrencar el servidor (<em>Inici → Tots els programes → Apache http Server 2.2 → Control Apache Server → Start</em>).
</p>

<p>
Un cop arrencat el servidor, ja podrem adreçar-nos al navegador web i,
dins de la barra de navegació, escriure <code>“http://localhost”</code> o <code>http://127.0.0.1/</code>. Ja podrem visualitzar la pàgina de prova d’Apache (<span class="figref"><a href="#Figura9"><span>figura</span></a></span>).
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Adreça IP 127.0.0.1 (loopback)</p>
<p>
Interfície de xarxa virtual que sempre representa el mateix dispositiu, independentment de l’adreça IP que se li hagi assignat.
</p>
</div></div><div class="iocfigure"><a name="Figura9"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Pàgina web inicial predefinida del servidor Apache

</figcaption><img src="../media/smx_m07u3-27_1.png" alt="" /></figure>
</div>
<p>
Per arrencar o aturar el servidor podem adreçar-nos al menú Inici (<em>Inici → Tots els programes → Apache http Server 2.2 → Control Apache Server → Start/Stop</em>) des del gestor de serveis de Windows, o bé des de la línia d’ordres DOS.
</p>

<p>
En la <span class="figref"><a href="#Figura10"><span>figura</span></a></span> es pot observar que, en tots dos casos, dins de la barra de tasques al costat del rellotge apareixerà una icona (el logotip d’Apache) amb el qual, en fer-hi clic, podrem accedir a l’administració del servidor web Apache. Quan obrim el monitor d’Apache, podrem arrencar, aturar o reiniciar el servei.
</p>
<div class="iocfigure"><a name="Figura10"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Activació de l’administració del servidor web Apache

</figcaption><img src="../media/smx_m07u3-27_2.png" alt="" /></figure>
</div>
<p>
Val a dir que totes aquestes accions també les podrem dur a terme accedint al gestor de serveis de Windows mitjançant el <em>Tauler de control → Eines d’administració → Serveis</em>. Un cop dins, ens haurem d’ubicar sobre el nom del servei (<code>Apache2.2</code>) i fent-hi clic amb el botó dret del ratolí podrem arrencar el servei (sempre i quan haguem instal·lat Apache com un servei de Windows).
</p>

</div>

<h3><a id="instal_lacio_i_configuracio_del_servidor_web_apache_per_a_linux" >Instal·lació i configuració del servidor web Apache per a Linux</a></h3>
<div class="level3">
<div class="iocimportant"><div class="ioccontent">
<p>
El programari Apache s’utilitza, principalment, per servir continguts estàtics i pàgines web dinàmiques presents en la teranyina d’abast mundial (WWW).
</p>
</div></div>
<p>
Hi ha moltes aplicacions web que han estat dissenyades mitjançant l’entorn i les funcionalitats que ofereix el programari Apache. Hem de destacar, a més, que Apache s’acostuma a utilitzar en aquelles tasques en què es requereix que els continguts estiguin disponibles de manera segura com, per exemple, en la compartició d’arxius desats en un ordinador connectat a Internet. Cal destacar, a més, que els programadors que desenvolupen aplicacions web acostumen a utilitzar una versió d’Apache instal·lada localment per assajar i comprovar el comportament del codi de l’aplicació a mesura que vagi sent desenvolupat.
</p>

<p>
A l’hora de fer la instal·lació del servidor web, hem de considerar que, normalment, la major part de les distribucions de Linux té en els seus repositoris una versió actualitzada d’Apache. Per tant, ens podem adreçar a la pàgina web
oficial per descarregar-lo o bé podem executar-ne la descàrrega i la instal·lació des del terminal d’ordres mitjançant la interfície d’usuari APT.
</p>

<p>

</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Repositori</p>
<p>
Lloc centralitzat on es desen i es mantenen paquets de programari, habitualment, en bases de dades o arxius informàtics.
</p>
</div></div><div class="ioctext"><div class="ioccontent"><p class="ioctitle">Eina avançada d’empaquetatge (APT)</p>
<p>
L’APT (Advanced Packaging Tool) és la interfície d’usuari del sistema d’administració de paquets utilitzat pel sistema operatiu Debian GNU/Linux i els seus derivats. L’APT simplifica el procés d’administració mitjançant l’automatització de la instal·lació, configuració i actualització dels paquets de programari.
</p>
</div></div><pre class="code bash"><ol><li class="li1"><div class="de1">ubuntu@ubuntu:~$ sudo apt-get install apache2</div></li><li class="li1"><div class="de1">S'està llegint la llista de paquets... Fet</div></li><li class="li1"><div class="de1">S'està construint l'arbre de dependències</div></li><li class="li1"><div class="de1">Reading state information... Fet</div></li><li class="li1"><div class="de1">S'instal·laran els següents paquets extres:</div></li><li class="li1"><div class="de1">apache2-common apache2-mpm-worker apache2-utils</div></li><li class="li1"><div class="de1">Paquets suggerits:</div></li><li class="li1"><div class="de1">apache2-doc</div></li><li class="li1"><div class="de1">S'instal·laran els següents paquets NOUS:</div></li><li class="li1"><div class="de1">apache2 apache2-common apache2-mpm-worker apache2-utils</div></li><li class="li1"><div class="de1">0 actualitzats, 4 nous a instal·lar, 0 a eliminar i 0 no actualitzats.</div></li><li class="li1"><div class="de1">Es necessita obtenir 1145kB d'arxius.</div></li><li class="li1"><div class="de1">Després de desempaquetar s'usaran 3994kB d'espai en disc addicional.</div></li><li class="li1"><div class="de1">Voleu continuar [S/n]? s</div></li><li class="li1"><div class="de1">Des:1 http://es.archive.ubuntu.com edgy/main apache2-utils 2.0.554ubuntu4 [93,1kB]</div></li><li class="li1"><div class="de1">Des:2 http://es.archive.ubuntu.com edgy/main apache2-common 2.0.55-4ubuntu4 [807kB]</div></li><li class="li1"><div class="de1">Des:3 http://es.archive.ubuntu.com edgy/main apache2-mpm-worker 2.0.55-4ubuntu4 [209kB]</div></li><li class="li1"><div class="de1">Des:4 http://es.archive.ubuntu.com edgy/main apache2 2.0.554ubuntu4 [36,0kB]</div></li><li class="li1"><div class="de1">1145kB descarregats en 1s (598kB/s)</div></li><li class="li1"><div class="de1">S'està seleccionant el paquet apache2-utils prèviament no seleccionat.</div></li><li class="li1"><div class="de1">(S'està llegint la base de dades ... hi ha 118705 fitxers i directoris instal·lats actualment.)</div></li><li class="li1"><div class="de1">S'està desempaquetant apache2-utils (de .../apache2-utils_2.0.554ubuntu4_i386.deb) ...</div></li><li class="li1"><div class="de1">S'està seleccionant el paquet apache2-common prèviament no seleccionat.</div></li><li class="li1"><div class="de1">S'està desempaquetant apache2-common (de .../apache2common_2.0.55-4ubuntu4_i386.deb) ...</div></li><li class="li1"><div class="de1">S'està seleccionant el paquet apache2-mpm-worker prèviament no seleccionat.</div></li><li class="li1"><div class="de1">S'està desempaquetant apache2-mpm-worker (de .../apache2-mpmworker_2.0.55-4ubuntu4_i386.deb) ...</div></li><li class="li1"><div class="de1">S'està seleccionant el paquet apache2 prèviament no seleccionat.</div></li><li class="li1"><div class="de1">S'està desempaquetant apache2 (de .../apache2_2.0.554ubuntu4_i386.deb) ...</div></li><li class="li1"><div class="de1">S'està configurant apache2-utils (2.0.55-4ubuntu4) ...</div></li><li class="li1"><div class="de1">S'està configurant apache2-common (2.0.55-4ubuntu4) ...</div></li><li class="li1"><div class="de1">Setting Apache2 to Listen on port 80. If this is not desired, please edit /etc/apache2/ports.conf as desired. Note that the Port directive no longer works.</div></li><li class="li1"><div class="de1">Module userdir installed; run /etc/init.d/apache2 force-reload to enable.</div></li><li class="li1"><div class="de1">S'està configurant apache2-mpm-worker (2.0.55-4ubuntu4) ...</div></li><li class="li1"><div class="de1">* Starting apache 2.0 web server...</div></li><li class="li1"><div class="de1">apache2: Could not determine the server's fully qualified domain name, using 127.0.1.1 for ServerName [ ok ]</div></li><li class="li1"><div class="de1">S'està configurant apache2 (2.0.55-4ubuntu4) ...</div></li></ol></pre>

<p>
Per certificar que la instal·lació s’ha dut a terme correctament, haurem d’obrir un navegador web i, dins de la barra de navegació, escriurem <code>http://localhost</code>. Si el servidor s’ha instal·lat correctament, el navegador ens mostrarà la pàgina web per defecte (<span class="figref"><a href="#Figura11"><span>figura</span></a></span>).
</p>

<p>
El servidor web Apache2 disposa de dos arxius (<code>scripts</code>) d’arrencada i aturada dins de la carpeta <code>/etc/init.d</code>. Per tant, si volem arrencar (o tornar a arrencar) el servidor web Apache2, haurem d’escriure i executar
la línia d’ordres <code>/etc/init.d/apache2 restart</code>. En el cas que vulguem aturar el servidor, haurem d’escriure i executar la línia d’ordres <code>/etc/init.d/apache2 stop</code>.
</p>

<p>
Un cop finalitzada la instal·lació d’Apache 2.0, ja en podem treure algunes conclusions. En primer lloc, podem afirmar que utilitza un disseny modular (basat en mòduls) que s’utilitza en moltes de les funcions bàsiques del servidor web.
</p>

<p>
D’altra banda, tal com mostra el procés d’instal·lació, s’ha instal·lat per defecte el paquet “apache2-mpm-worker”. Aquest paquet proporciona una versió molt més àgil i ràpida del servidor. De fet, els mòduls de multiprocessament (MPM, <em>multi-processing modules</em>) són els responsables de connectar amb els ports de xarxa de la màquina, acceptar les peticions i gestionar les respostes corresponents. En el cas dels servidors web, el port de funcionament estàndard és el 80.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Port de xarxa</p>
<p>
És una interfície utilitzada per comunicar-se amb un programa a través d’una xarxa. Acostumen a estar numerats i una determinada implementació de protocol de transmissió de xarxa (per exemple, TCP o UDP) assigna algun d’aquests números a la informació que envia; per exemple, el programari de correu electrònic utilitza el port 25.
</p>
</div></div>
<p>

</p>
<div class="iocfigure"><a name="Figura11"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Pàgina web inicial predefinida del servidor Apache

</figcaption><img src="../media/smx_m07u3-29_1.png" alt="" /></figure>
</div>
<p>
Val a dir que dins del procés d’instal·lació per defecte del servidor web Apache també hi ha la instal·lació del mòdul de directori d’usuari (userdir), ja que cada usuari disposarà d’un espai en el seu espai de disc (home) per crear i desar les seves pròpies pàgines web.
</p>

<p>
Amb tot, si bé hi ha un ampli ventall de paquets que s’han d’instal·lar amb Apache per augmentar-ne l’ eficiència, cal no deixar de banda la descàrrega de la documentació del programari, ja que esdevindrà de gran utilitat per a l’administrador.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">ubuntu@ubuntu:~$ sudo apt-get install apache2-doc</div></li></ol></pre>

<p>
Considerant que, en el cas que haguem instal·lat la documentació, haurem de tornar a arrencar el servidor web, també podem accedir a la documentació mitjançant la pàgina principal predefinida en el servidor web Apache. Per tant, des de qualsevol navegador web ens podrem documentar sobre el funcionament del servidor web escrivint en la barra de navegació <code>http://localhost/manual/</code>.
</p>

</div>

<h3><a id="awstats_obtencio_d_estadistiques" >Awstats. Obtenció d’estadístiques</a></h3>
<div class="level3">

<p>
L’Awstats és una eina de programari lliure que permet obtenir informes d’anàlisis web adequada per analitzar dades de serveis d’Internet com un servidor web, de correu electrònic o bé de transferència d’arxius.
</p>

<p>
A grans trets, l’Awstats analitza els arxius de registre del servidor i, en conseqüència, produeix informes <acronym title="HyperText Markup Language">HTML</acronym>. De fet, tot i que les dades que es presenten es mostren en forma de taules i gràfics de barres, també es poden crear informes estàtics mitjançant una interfície de línia d’ordres i, alhora, es poden obtenir informes sota demanda mitjançant un navegador web.
</p>

<p>
Per tant, amb la finalitat d’instal·lar el programari, hem de ser conscients que disposem d’un paquet en els repositoris d’Ubuntu per descarregar i instal·lar l’Awstats. Per tant, haurem d’escriure i executar la línia següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">ubuntu@ubuntu:~$ sudo apt-get install awstats</div></li></ol></pre>

<p>
Un cop instal·lat el programari, pot ser interessant accedir a la documentació per conèixer com obtenir el màxim rendiment del programari. En aquest cas, tant podem accedir a l’adreça <code>file:///usr/share/doc/awstats/html/index.html</code>, com escriure i executar la línia següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ mozilla-firefox usr/share/doc/awstats/html/index.html</div></li></ol></pre>

<p>
Per començar a utilitzar Awstats cal configurar-lo. En aquest cas, haurem d’escriure i executar la línia d’ordres següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ sudo cp/usr/share/doc/awstats/examples/apache.conf</div></li><li class="li1"><div class="de1">/etc/apache2/conf.d/awstats</div></li></ol></pre>

<p>
Val a dir que, tot i que podem editar directament els fitxers <code>awstats.conf</code> o <code>awstats.conf.local</code>, una molt bona opció és crear un arxiu nou per a cada domini l’accés del qual vulguem monitoritzar. Per exemple, si volem monitoritzar el domini elmeudomini.com, haurem d’escriure i executar el següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ sudo cp /etc/awstats/awstats.conf</div></li><li class="li1"><div class="de1">/etc/awstats/awstats.elmeudomini.com.conf</div></li></ol></pre>

<p>
Arribats a aquest punt, amb la intenció de modificar l’arxiu per adaptar-ne la
configuració, hauríem de recórrer a l’editor de text per línia d’ordres joe.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ sudo joe /etc/awstats/awstats.elmeudomini.com.conf</div></li></ol></pre>

<p>
Un cop assolides totes aquestes etapes, ja podrem executar per primer cop el programari Awstats perquè processi els arxius de registre.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ /usr/lib/cgi-bin/awstats.pl –config=elmeudomini.com –update</div></li></ol></pre>

<p>
Val a dir que allò que posem en el paràmetre <code>config</code> depèn del nom de
l’arxiu de configuració (és el que hi ha entre <code>awstats.</code> i <code>.conf</code>). Per consultar les estadístiques hem de cridar el CGI <code>awstats.pl</code>, invocant el paràmetre <code>config</code> amb el valor del nostre domini. Un possible exemple d’accés seria el següent:
</p>
<pre class="code">http://www.elmeudomini.com/awstats/
awstats.pl?config=elmeudomini.com</pre>

</div>

<h2><a id="configuracio_de_la_seguretat" >Configuració de la seguretat</a></h2>
<div class="level2">

<p>
Un dels elements que caracteritzen i fan que Apache esdevingui molt potent són els arxius de configuració per usuaris i, alhora, la restricció de l’accés a continguts.
</p>

<p>
De fet, des del punt de vista d’Apache, els mòduls encarregats del control d’accés són el <code>mod_auth</code>, que gestiona el control d’accés per usuaris i el <code>mod_access</code>, que conté les directives <code>Allow</code>, <code>Deny</code> i <code>Access</code>. Tot i que aquests mòduls acostumen a estar activats per defecte, hi ha diferents maneres de controlar l’accés a continguts (usuari i contrasenya, adreça d’Internet d’origen, etc.).
</p>

<p>
Per tant, si volem posar un control d’accés amb usuari i contrasenya per a les pàgines personals de l’usuari Bernat (suposant que existeixi el directori <code>/home/bernat/public-html</code> amb drets d’accés per Apache), haurem de generar l’arxiu ocult específic per a aquest directori que contindrà la informació relacionada amb l’usuari i la contrasenya escrivint i executant la utilitat d’Apache següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ htpasswd -c /etc/httpd/.bernat-passwd bernat</div></li><li class="li1"><div class="de1">New password: *****</div></li><li class="li1"><div class="de1">Re-type new password: *****</div></li></ol></pre>

<p>
Si a més a més de l’usuari <code>Bernat</code>, volem que altres usuaris també hi tinguin accés, escriurem i executarem la mateixa ordre però sense l’opció <code>–c</code>, ja que aquesta opció indica que és el primer i que, per tant, volem crear l’arxiu <code>.bernat-passwd</code>.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">htpassswd/etc/httpd/.bernat-passwd amigadenbernat</div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1">htpassswd -c /etc/httpd/.bernat-passwd amicdenbernat</div></li><li class="li1"><div class="de1">...</div></li></ol></pre>

<p>
Arribats a aquest punt, haurem de crear un arxiu anomenat <code>.htaccess</code> amb els paràmetres adients i el desarem dins del directori físic que correspongui a l’adreça d’Internet (en el cas del nostre exemple, <code>/home/bernat/public-html</code>). El contingut de l’arxiu seria el següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">AuthType Basic</div></li><li class="li1"><div class="de1">AuthUserFile /etc/httpd/.bernat-passwd</div></li><li class="li1"><div class="de1">AuthName &quot;Espai web de l'usuari Bernat &quot;</div></li><li class="li1"><div class="de1">require valid-user</div></li></ol></pre>

<p>
En aquest cas, el paràmetre <code>AuthType</code> indica el tipus d’autentificació que utilitzaran els navegadors. D’altra banda, el paràmetre <code>AuthUserFile</code> indica l’arxiu que el servidor web Apache ha de consultar per validar els usuaris que intentin accedir a l’espai de l’usuari <code>Bernat</code>. El paràmetre <code>AuthName</code> indica el nom de la “zona” a la qual pertany aquesta autentificació (espai web de l’usuari <code>Bernat</code> i els seus amics). Finalment, el paràmetre <code>require</code> indica quin tipus d’actuació cal fer per obtenir l’accés. En aquest cas, hem d’introduir el nom i la contrasenya d’un usuari vàlid (<code>valid user</code>). Quan accedim des dels navegadors web, apareixerà una finestra sol·licitant el nom d’usuari i la contrasenya.
</p>

</div>

<h3><a id="https_pagines_web_segures" >HTTPS. Pàgines web segures</a></h3>
<div class="level3">

<p>
Un lloc web segur és un lloc web que utilitza el protocol HTTPS en lloc del protocol HTTP. De fet, el protocol HTTPS és idèntic al protocol HTTP amb l’excepció que la transferència d’informació entre el client (navegador web) i el servidor (servidor web) viatja per la xarxa d’Internet xifrada a partir d’uns
complexos algoritmes de xifrat de dades proporcionats pel paquet OpenSSL.
</p>
<div class="ioctextl"><div class="ioccontent"><p class="ioctitle">OpenSSL</p>
<p>
Es tracta d’un projecte de programari desenvolupat pels membres de la comunitat Open Source. És un paquet robust d’eines d’administració i llibreries relacionades amb la criptografia que proporcionen funcions criptogràfiques a navegadors web per facilitar l’accés segur a llocs HTTPS.
</p>

<p>
Aquestes eines ajuden el sistema a implementar tot un ventall de protocols relacionats amb la seguretat.
</p>
</div></div>
<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/smx_m07u3-33_1.png" class="imgB" title="El concepte de xifrat simètric es refereix al fet que per xifrar i desxifrar s’utilitza la mateixa clau." alt="El concepte de xifrat simètric es refereix al fet que per xifrar i desxifrar s’utilitza la mateixa clau." /></li><li><small>El concepte de xifrat simètric es refereix al fet que per xifrar i desxifrar s’utilitza la mateixa clau.</small></li>
</ul></div>

</p>

<p>
Els algoritmes de xifrat utilitzats reuneixen les característiques necessàries per garantir que la informació que surt del servidor cap al client estigui xifrada i que només pugui ser desxifrada pel client, i que la informació que surt del client cap al servidor estigui xifrada i només pugui ser desxifrada pel servidor.
</p>

<p>
Per exemple, en el cas que durant la transferència de la informació un pirata informàtic fes una còpia dels paquets de dades i intentés desxifrarlos, els algoritmes garantirien que ho hagués de fer mitjançant la força bruta (és a dir, provant totes les claus possibles) en un termini mínim d’uns quants anys.
</p>

<p>
Durant la transmissió, s’utilitzaran algoritmes de xifrat simètrics, però,
amb la finalitat d’intercanviar les claus de xifrat, hi ha una sessió inicial de xifrat asimètric.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Xifrat asimètric</p>
<p>
Procés de xifrat de complexitat alta basat en la utilització de dues claus, una de pública i una de privada. Tothom, sense cap mena d’excepció, pot conèixer la clau pública. Per contra, la clau privada només l’ha de conèixer el seu propietari.
</p>
</div></div>
</div>

<h2><a id="servidors_virtuals" >Servidors virtuals</a></h2>
<div class="level2">

<p>
Durant els últims anys, el terme <strong>virtualització</strong> (com en el cas del concepte orientació a objectes) ha arrelat en múltiples entorns tecnològics. Des del punt de vista de la informàtica, la definició més genèrica (o usual) per a virtualització fa referència a la instal·lació d’un sistema operatiu que actua com a hoste sobre un altre sistema que actua com a amfitrió. Aquesta cohabitació ens permetrà disposar de diverses màquines virtuals sobre una única màquina física.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Orientació a objectes</p>
<p>
Es tracta d’un paradigma de programació en el qual tot es basa en objectes. Un objecte és un tipus abstracte de dades que encapsula (amaga) tant les dades necessàries com les funcions per accedir-hi.
</p>
</div></div>
<p>
Tècnicament, la virtualització crea una interfície externa que amaga una implementació subjacent mitjançant la simplificació del sistema de control.
</p>
<div class="ioctextl"><div class="ioccontent"><p class="ioctitle">La virtualització</p>
<p>
El terme virtualització va néixer l’any 1960 i volia definir la creació d’una emulació d’un ordinador utilitzant una combinació de maquinari i programari.
</p>

<p>
L’evolució tecnològica ha fet que el terme s’apliqui a diferents àrees del camp de la informàtica, des de sistemes computacionals complets fins a capacitats o components individuals.
</p>
</div></div>
<p>
Dins de les múltiples varietats de la virtualització, podem destacar la virtualització d’aplicacions, és a dir, fer funcionar un escriptori o una aplicació de servidor local utilitzant els recursos propis d’una màquina virtual adient. Aquí és on trobem el servidor virtual.
</p>

<p>
Un servidor virtual és un servidor amb capacitat per realitzar la feina de diferents servidors compartint els recursos del sistema físic, mitjançant un o més sistemes operatius de manera segura.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Màquina virtual</p>
<p>
Programari que emula un ordinador i permet l’execució de programes informàtics com si es tractés d’un ordinador real. El terme té el seu origen en un prototip realitzat per l’empresa nord-americana IBM.
</p>
</div></div>
<p>
De fet, els servidors virtuals han anat guanyant força davant del creixement notable que ha experimentat la xarxa d’Internet durant els últims anys. És inevitable pensar que hi ha servidors que reben milers o milions de connexions al dia i, en conseqüència, n’han d’atendre simultàniament centenars o milers. Inevitablement, això comporta la necessitat de comptar amb una quantitat important de recursos informàtics per fer front a les peticions creixents dels usuaris del servei.
</p>

<p>
A grans trets, els principals requeriments per als sistemes que han de fer front a les múltiples peticions dels usuaris són:
</p>
<ol>
<li class="level1"><div class="li"> Escalabilitat. A partir del moment en què els requeriments d’un servei augmenten, el sistema ha de poder estendre’s per poder atendre totes les sol·licituds sense que els sistemes de resposta es vegin afectats.<br/>
Per exemple, tal com mostra la <span class="figref"><a href="#Figura12"><span>figura</span></a></span>, el dia en què va arrencar la biblioteca virtual europea, el servidor web es va veure col·lapsat davant de la gran quantitat de visites rebudes (10 milions cada hora). Això va obligar a tancar la pàgina web durant unes hores per doblar la capacitat del servidor.</div>
</li>
<li class="level1"><div class="li"> Alta disponibilitat. El servei ha d’estar disponible en tot moment; per tant, ha de ser tolerant davant de les fallides possibles.</div>
</li>
<li class="level1"><div class="li"> Costos raonables. Les despeses inicials en forma d’inversió juntament amb les despeses de manteniment i expansió del sistema han de ser raonables i accessibles.</div>
</li>
</ol>

<p>
Per això, davant d’aquest ampli ventall d’obstacles, cal desenvolupar solucions basades en processadors que executen instruccions simultànies i comparteixen les dades locals o bé equips independents que col·laboren entre ells per assolir un mateix objectiu (com si es tractés d’un supercomputador).
</p>
<div class="iocfigure"><a name="Figura12"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Avís de problemes en la pàgina web de l’Europeana

</figcaption><img src="../media/smx_m07u3-35_1.png" alt="" /></figure>
</div>
</div>

<h2><a id="els_llocs_virtuals" >Els llocs virtuals</a></h2>
<div class="level2">

<p>
Quan parlem de la creació de llocs virtuals ens estem referint a l’acció de fer treballar més d’un lloc web, per exemple, les pàgines web <code>www.web1.cat</code> i <code>www.web2.cat</code> en un únic ordinador.
</p>

<p>
Tal com mostra la <span class="figref"><a href="#Figura13"><span>figura</span></a></span>, tot i que tots dos dominis estiguin treballant en la mateixa màquina física, mai no ens n’adonarem quan visitem
aquests llocs web.
</p>
<div class="iocfigure"><a name="Figura13"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Creació de llocs virtuals

</figcaption><img src="../media/smx_m07u3-36_1.png" alt="" /></figure>
</div>
<p>
Els llocs web virtuals es poden basar tant en adreces d’Internet (IP), on cada lloc web té una adreça d’Internet (IP) diferent, com en noms diferents, és a dir, diversos llocs web amb diferents noms de domini estaran treballant amb una única adreça d’Internet (IP). Val a dir que, tot i que estiguem treballant en la mateixa màquina física, com a usuaris observarem que l’usuari, quan visita aquests llocs web, no se n’adona.
</p>

</div>

<h3><a id="creacio_de_llocs_web_virtuals" >Creació de llocs web virtuals</a></h3>
<div class="level3">

<p>
Per explicar la tècnica de la creació de llocs web virtuals, podem treballar amb un exemple que ens permetrà comprendre la configuració d’Apache 2.0 per treballar amb diferents llocs web virtuals basats en noms diferents.
</p>

<p>
Per tant, posem per cas que volem definir dos llocs web virtuals anomenats <a href="/doku.php?id=fp:smx:m07:www.mencantenlesharleysd.cat" class="wikilink2" title="fp:smx:m07:www.mencantenlesharleysd.cat" rel="nofollow">www.mencantenlesharleysd.cat</a> i <a href="/doku.php?id=fp:smx:m07:www.prefereixolestriumph.cat" class="wikilink2" title="fp:smx:m07:www.prefereixolestriumph.cat" rel="nofollow">www.prefereixolestriumph.cat</a> que se serviran mitjançant el mateix servidor web. Si bé el directori per defecte on es troben les pàgines web és <code>/var/www</code>, en el nostre cas utilitzarem el directori <code>/srv</code>, on crearem les diferents estructures de directori. Per tant, dins dels directoris <code>/srv/www/mencantenlesharleysd</code> i <code>/srv/www/prefereixolestriumph</code> trobarem els arxius dels llocs web corresponents a les pàgines web <a href="/doku.php?id=fp:smx:m07:www.mencantenlesharleysd.cat" class="wikilink2" title="fp:smx:m07:www.mencantenlesharleysd.cat" rel="nofollow">www.mencantenlesharleysd.cat</a> i <a href="/doku.php?id=fp:smx:m07:www.prefereixolestriumph.cat" class="wikilink2" title="fp:smx:m07:www.prefereixolestriumph.cat" rel="nofollow">www.prefereixolestriumph.cat</a>, respectivament.
</p>

<p>
Per a la configuració i posada en marxa dels llocs web virtuals hem de construir, en primer lloc, l’estructura de directoris on desarem els llocs; per fer-ho, en mode <code>root</code>, ens adreçarem al directori <code>/var</code> mitjançant la línea d’ordres <code>cd /var</code>. Un cop dins, crearem el directori <code>www</code> i els directoris interns que actuaran com a magatzems.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">mkdir www</div></li><li class="li1"><div class="de1">cd www</div></li><li class="li1"><div class="de1">mkdir mencantenlesharleysd</div></li><li class="li1"><div class="de1">mkdir prefereixolestriumph</div></li><li class="li1"><div class="de1">cd..</div></li></ol></pre>

<p>
Arribats a aquest punt, podem fer que el propietari d’aquests directoris sigui l’usuari definit per Apache2, és a dir, el www-data.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">chown –R www-data:www-data www</div></li></ol></pre>

<p>
Un cop definits els directoris on desarem els llocs web virtuals, haurem d’adreçar-nos al directori <code>/etc/httpd/conf</code>, on trobarem els arxius de configuració d’Apache. En aquest cas, l’arxiu principal de configuració és <code>httpd.conf</code>.
</p>

<p>
Considerant que per treballar amb els llocs virtuals haurem de fer alguns canvis en el contingut de l’arxiu, haurem de considerar, abans d’establir cap canvi, quina configuració de llocs web virtuals volem crear, és a dir, llocs virtuals basats en adreces d’Internet (IP) o bé basats en noms.
</p>

</div>

<h4><a id="llocs_virtuals_basats_en_l_adreca_d_internet_ip" >Llocs virtuals basats en l’adreça d’Internet (IP)</a></h4>
<div class="level4">

<p>
En aquest cas, podrem allotjar múltiples dominis en una única màquina que disposarà de diferents adreces d’Internet (IP) i, en cadascuna d’elles, s’hi executarà un lloc virtual.
</p>

<p>
Hi ha dues modalitats diferents per configurar llocs virtuals basats en IP sota Apache. En primer lloc, podem establir un dimoni <code>httpd</code> que treballi per a cada lloc virtual, o bé configurar un únic dimoni <code>httpd</code> perquè manipuli tots els llocs virtuals. Val a dir que és preferible utilitzar aquesta última opció. Per tant, haurem d’utilitzar la directriu <code>VirtualHost</code> i modificar diverses de les directrius que hi ha contingudes.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Dimoni (daemon)</p>
<p>
En el sistema operatiu Linux, quan parlem de dimonis, ens referim a un procés que, normalment, s’executa de manera continua i sense interactivitat amb l’usuari (no s’utilitzen els dispositius I/O habituals: teclat, ratolí, pantalla).
</p>
</div></div>
<p>
En primer lloc, haurem d’eliminar la primera línia <code>NameVirtualHost *</code> donat que el nom de l’ordinador virtual només ha d’aparèixer en un arxiu de configuració. Per introduir el nom de l’usuari que administrarà la pàgina (per exemple, <code>root</code>), ens haurem d’adreçar a la directriu <code>ServerAdmin</code> i escriure <code>root@mencantenlesharleysd.cat</code>. A l’hora de definir el nom del domini, ens haurem d’adreçar a la directriu <code>ServerName</code> i escriure el nom de domini del lloc web virtual corresponent, en aquest cas <code>www.mencantenlesharleysd.cat</code>. Finalment, haurem de definir el directori on es desarà el lloc web virtual corresponent (<code>/var/www/mencantenlesharleysd</code>) en la directriu <code>DocumentRoot</code>.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">Port 80</div></li><li class="li1"><div class="de1">ServerName www.motocicletes.cat</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;VirtualHost 172.29.0.221&gt;</div></li><li class="li1"><div class="de1">ServerAdmin root@mencantenlesharleysd.cat</div></li><li class="li1"><div class="de1">DocumentRoot /var/www/mencantenlesharleysd</div></li><li class="li1"><div class="de1">ServerName www.mencantenlesharleysd.cat</div></li><li class="li1"><div class="de1">ErrorLog logs/www.mencantenlesharleysd.cat-error_log</div></li><li class="li1"><div class="de1">CustomLog logs/ www.mencantenlesharleysd.cat-access_log common</div></li><li class="li1"><div class="de1">&lt;/VirtualHost&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;VirtualHost 172.29.0.231&gt;</div></li><li class="li1"><div class="de1">ServerAdmin root@prefereixolestriumph.cat</div></li><li class="li1"><div class="de1">DocumentRoot /var/www/prefereixolestriumph</div></li><li class="li1"><div class="de1">ServerName www.prefereixolestriumph.cat</div></li><li class="li1"><div class="de1">ErrorLog logs/www.prefereixolestriumph.cat-error_log</div></li><li class="li1"><div class="de1">CustomLog logs/www.prefereixolestriumph.cat-access_log common</div></li><li class="li1"><div class="de1">&lt;/VirtualHost&gt;</div></li></ol></pre>

</div>

<h4><a id="llocs_virtuals_basats_en_noms" >Llocs virtuals basats en noms</a></h4>
<div class="level4">

<p>
El problema dels llocs web virtuals basats en adreces d’Internet (IP) és que, considerant que s’allotgen molts dominis, necessitarem una adreça d’Internet (IP) per a cadascun dels dominis. Per tant, pot ser preferible treballar amb llocs virtuals basats en noms. En aquest cas, haurem d’afegir la directriu <code>Name VirtualHost</code> donat que, si bé els llocs virtuals es troben en la mateixa IP, s’ha de canviar el nom per a cadascun dels llocs. En el cas de treballar amb servidor <acronym title="Domain Name System">DNS</acronym>, aquest haurà d’estar configurat per resoldre aquests llocs en les zones corresponents.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">Port 80</div></li><li class="li1"><div class="de1">ServerName www.motocicletes.cat</div></li><li class="li1"><div class="de1">Name VirtualHost 172.29.0.221</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;VirtualHost 172.29.0.221&gt;</div></li><li class="li1"><div class="de1">ServerAdmin root@mencantenlesharleysd.cat</div></li><li class="li1"><div class="de1">DocumentRoot /var/www/mencantenlesharleysd</div></li><li class="li1"><div class="de1">ServerName www.mencantenlesharleysd.cat</div></li><li class="li1"><div class="de1">ErrorLog logs/www.mencantenlesharleysd.cat-error_log</div></li><li class="li1"><div class="de1">CustomLog logs/ www.mencantenlesharleysd.cat-access_log common</div></li><li class="li1"><div class="de1">&lt;/VirtualHost&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;VirtualHost 172.29.0.231&gt;</div></li><li class="li1"><div class="de1">ServerAdmin root@prefereixolestriumph.cat</div></li><li class="li1"><div class="de1">DocumentRoot /var/www/prefereixolestriumph</div></li><li class="li1"><div class="de1">ServerName www.prefereixolestriumph.cat</div></li><li class="li1"><div class="de1">ErrorLog logs/www.prefereixolestriumph.cat-error_log</div></li><li class="li1"><div class="de1">CustomLog logs/www.prefereixolestriumph.cat-access_log common</div></li><li class="li1"><div class="de1">&lt;/VirtualHost&gt;</div></li></ol></pre>

<p>
Finalment, per verificar que tots els canvis aplicats han tingut èxit, tornarem a arrencar el servidor web.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">/etc/init.d/apache2 restart</div></li></ol></pre>

<p>
Amb la intenció de certificar que el comportament dels llocs web virtuals és el desitjat, podem crear una petita pàgina web de prova dins del directori <code>/var/www/mencantenlesharleysd</code> que s’anomenarà <code>index.html</code>.
</p>
<pre class="code html4strict"><ol><li class="li1"><div class="de1">&lt;html&gt;</div></li><li class="li1"><div class="de1">  &lt;body&gt;</div></li><li class="li1"><div class="de1">    &lt;h1&gt; Les motocicletes tenen dues rodes &lt;/h1&gt;</div></li><li class="li1"><div class="de1">  &lt;/body&gt;</div></li><li class="li1"><div class="de1">&lt;/html&gt;</div></li></ol></pre>

<p>
Considerant que, de moment, podem no tenir instal·lat cap servidor <acronym title="Domain Name System">DNS</acronym>, haurem de fer les proves en mode local. Per tant, ens haurem d’adreçar a l’arxiu <code>/etc/hosts</code> i incloure-hi la línia <code>127.0.0.1 <a href="http://www.mencantenlesharleysd.cat" class="urlextern" title="http://www.mencantenlesharleysd.cat"  rel="nofollow">www.mencantenlesharleysd.cat</a></code>. Mitjançant el navegador web, podrem provar el nostre lloc web escrivint <code>http://www.mencantenlesharleysd.cat</code>. A continuació, haurem de veure la pàgina web de prova que hem creat amb anterioritat.
</p>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u3/resum.html">Resum</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u3/a1/activitats.html">Activitats</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
