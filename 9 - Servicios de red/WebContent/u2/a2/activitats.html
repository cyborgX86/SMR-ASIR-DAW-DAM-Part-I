<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html">
        
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Serveis de xarxa</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Serveis de xarxa">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html">Serveis de xarxa</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u3" class="parentnode"><p><a class="unit" href="../../../WebContent/u3/introduccio.html">3. Servidors web i intermediaris</a></p><ul class="expander"><li id="u3introduccio"><a href="../../../WebContent/u3/introduccio.html">Introducció</a></li><li id="u3mapa"><a href="../../../WebContent/u3/mapa.html">Mapa conceptual</a></li><li id="u3referencies"><a href="../../../WebContent/u3/referencies.html">Més informació</a></li><li id="u3resultats"><a href="../../../WebContent/u3/resultats.html">Resultats d'aprenentatge</a></li><li id="u3resum"><a href="../../../WebContent/u3/resum.html">Resum</a></li><li id="u3a1" class="tocsection"><p id='u3a1continguts'><a class="section" href="../../../WebContent/u3/a1/continguts.html">Gestió de servidors web</a><span class="buttonexp"></span></p><ul><li id="u3a1activitats"><a href="../../../WebContent/u3/a1/activitats.html">Activitats</a></li><li id="u3a1exercicis"><a href="../../../WebContent/u3/a1/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u3a1' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u3/a1/continguts.html#el_protocol_http">El protocol HTTP</a></li><li><a href="../../../WebContent/u3/a1/continguts.html#el_servidor_apache">El servidor Apache</a></li><li><a href="../../../WebContent/u3/a1/continguts.html#configuracio_de_la_seguretat">Configuració de la seguretat</a></li><li><a href="../../../WebContent/u3/a1/continguts.html#servidors_virtuals">Servidors virtuals</a></li><li><a href="../../../WebContent/u3/a1/continguts.html#els_llocs_virtuals">Els llocs virtuals</a></li></ul></div></div><li id="u3a2" class="tocsection"><p id='u3a2continguts'><a class="section" href="../../../WebContent/u3/a2/continguts.html">Interconnexió de xarxes privades amb xarxes públiques</a><span class="buttonexp"></span></p><ul><li id="u3a2activitats"><a href="../../../WebContent/u3/a2/activitats.html">Activitats</a></li><li id="u3a2exercicis"><a href="../../../WebContent/u3/a2/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u3a2' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u3/a2/continguts.html#passarel_les_a_nivell_d_aplicacio_emmagatzematge_en_memoria_cau">Passarel·les a nivell d’aplicació. Emmagatzematge en memòria cau</a></li><li><a href="../../../WebContent/u3/a2/continguts.html#instal_lacio_d_una_aplicacio_que_faci_de_passarel_la">Instal·lació d'una aplicació que faci de passarel·la</a></li></ul></div></div></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../introduccio.html">Correu electrònic i transmissió d’arxius</a></li><li><a href="continguts.html">Gestió de serveis de correu electrònic</a></li><li>Activitats</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="activitats"> Activitats </a></h1>
    	
<h2><a id="programari_postfix" >Programari Postfix</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és donar a conèixer un dels elements principals de l’engranatge que permet enviar correus electrònics per Internet.
</p>

<p>
Postfix és un agent de transport de correu (MTA, <em>mail transfer agent</em>) de programari lliure i codi obert per a l’encaminament i enviament de correus electrònics.
</p>

<p>
Configureu el programari Postfix de manera segura i amb accés al correu des d’una pàgina web en el sistema operatiu Linux.
</p>

<p>
<form action=""><div class="solution ioccontent">
<p>
<strong>1.</strong> Instal·lació de Postfix
</p>

<p>
A l’hora d’instal·lar el programari, haurem d’accedir al <em>terminal</em> mitjançant l’accés a l’opció <em>Aplicacions/Accessoris</em> per executar la instal·lació amb les ordres sudo aptitude install postfix.
</p>

<p>
<strong>2.</strong> Configuració bàsica del Postfix
</p>

<p>
Arribats en aquest punt ja podrem començar a establir la configuració bàsica del programari Postfix mitjançant l’execució de les ordres sudo dpkg-reconfigure postfix.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_26.jpg" title="w_ic10m7uf2_26.jpg" alt="w_ic10m7uf2_26.jpg" /></div>

</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_27.jpg" title="w_ic10m7uf2_27.jpg" alt="w_ic10m7uf2_27.jpg" /></div>

</p>

<p>
Posteriorment, a l’hora de definir el tipus de configuració del correu, escollirem l’opció lloc web i com a nom del correu del sistema optarem per server1.exemple.com.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_28.jpg" title="w_ic10m7uf2_28.jpg" alt="w_ic10m7uf2_28.jpg" /></div>

</p>

<p>
Un cop haguem definit el nom del correu del sistema, ja podrem definir el destinatari del correu de root i postmaster. En aquest cas, podem introduir el nostre nom. En el cas de la resta de destinacions per a les quals s’accepten correus electrònics (no hem de descartar la possibilitat de deixar-ho en blanc) podem definir-les com a server1.exemple.com, exemple.com, localhost.exemple.com, localhost.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_29.jpg" title="w_ic10m7uf2_29.jpg" alt="w_ic10m7uf2_29.jpg" /></div>

</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_30.jpg" title="w_ic10m7uf2_30.jpg" alt="w_ic10m7uf2_30.jpg" /></div>

</p>

<p>
Respecte de la possibilitat de forçar les actualitzacions síncrones a la cua de correu, és preferible que no es faci, atès que això pot alentir notablement el processament dels correus electrònics.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_31.jpg" title="w_ic10m7uf2_31.jpg" alt="w_ic10m7uf2_31.jpg" /></div>

</p>

<p>
En el cas de les xarxes locals, optarem per l’adreça 127.0.0.0/8. Paral·lelament, des del punt de vista del límit màxim de la bústia en l’ordre de bytes, optarem pel valor zero per definir en el programa perquè no hi hagi cap mena de límit.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_32.jpg" title="w_ic10m7uf2_32.jpg" alt="w_ic10m7uf2_32.jpg" /></div>

</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_33.jpg" title="w_ic10m7uf2_33.jpg" alt="w_ic10m7uf2_33.jpg" /></div>

</p>

<p>
El caràcter que utilitzarem per definir l’extensió de les adreces locals serà +.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_34.jpg" title="w_ic10m7uf2_34.jpg" alt="w_ic10m7uf2_34.jpg" /></div>

</p>

<p>
Respecte dels protocols d’Internet que utilitzarem, aquests seran tant l’IPv6 com l’IPv4.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_35.jpg" title="w_ic10m7uf2_35.jpg" alt="w_ic10m7uf2_35.jpg" /></div>

</p>

<p>
<strong>3.</strong> Configuració del mailbox
</p>

<p>
Arribats en aquest punt, haurem de configurar el format de mailbox a Maildir.
</p>

<p>
sudo postconf -e ‘home_mailbox = Maildir/&#039;
</p>

<p>
sudo postconf -e ‘mailbox_command =&#039;
</p>

<p>
<strong>4.</strong> Configuració del Postfix perquè utilitzi l’SMTP AUTH amb SASL
</p>

<p>
Hem de configurar el programari Postfix perquè utilitzi SMTP AUTH amb SASL (saslauthd) mitjançant l’execució d’un ventall d’ordres.
</p>

<p>
sudo postconf -e ‘smtpd_sasl_local_domain =&#039;
</p>

<p>
sudo postconf -e ‘smtpd_sasl_auth_enable = yes’
</p>

<p>
sudo postconf -e ‘smtpd_sasl_security_options = noanonymous’
</p>

<p>
sudo postconf -e ‘broken_sasl_auth_clients = yes’
</p>

<p>
sudo postconf -e ‘smtpd_recipient_restrictions = permit_sasl_authenticated,permit_mynetworks,reject_unauth_destination’
</p>

<p>
sudo postconf -e ‘inet_interfaces = all’
</p>

<p>
Afegirem l’usuari postfix al grup salsl mitjançant l’execució de l’ordre sudo adduser postfix sasl
</p>

<p>
D’altra banda, editarem l’arxiu /etc/postfix/sasl/smtpd.conf i afegirem les següents línies:
</p>

<p>
pwcheck_method: saslauthd
</p>

<p>
mech_list: plain login
</p>

<p>
<strong>5.</strong> Generació de certificats
</p>

<p>
Arribats en aquest punt, ja podrem començar a generar els diferents certificats:
</p>

<p>
touch smtpd.key<br/>
chmod 600 smtpd.key<br/>
openssl genrsa 1024 &amp;gt; smtpd.key<br/>
openssl req -new -key smtpd.key -x509 -days 3650 -out smtpd.crt # has prompts<br/>
openssl req -new -x509 -extensions v3_ca -keyout cakey.pem -out cacert.pem -days 3650<br/>
sudo mv smtpd.key /etc/ssl/private/<br/>
sudo mv smtpd.crt /etc/ssl/certs/<br/>
sudo mv cakey.pem /etc/ssl/private/<br/>
sudo mv cacert.pem /etc/ssl/certs/
</p>

<p>
D’ altra banda, configurarem el programari Postfix per TLS:
</p>

<p>
sudo postconf -e ‘smtp_tls_security_level = may’<br/>
sudo postconf -e ‘smtpd_tls_security_level = may’<br/>
sudo postconf -e ‘smtpd_tls_auth_only = no’<br/>
sudo postconf -e ‘smtp_tls_note_starttls_offer = yes’<br/>
sudo postconf -e ‘smtpd_tls_key_file = /etc/ssl/private/smtpd.key’<br/>
sudo postconf -e ‘smtpd_tls_cert_file = /etc/ssl/certs/smtpd.crt’<br/>
sudo postconf -e ‘smtpd_tls_CAfile = /etc/ssl/certs/cacert.pem’<br/>
sudo postconf -e ‘smtpd_tls_loglevel = 1’<br/>
sudo postconf -e ‘smtpd_tls_received_header = yes’<br/>
sudo postconf -e ‘smtpd_tls_session_cache_timeout = 3600s’<br/>
sudo postconf -e ‘tls_random_source = dev:/dev/urandom’<br/>
sudo postconf -e ‘myhostname = server1.example.com’
</p>

<p>
Per últim, reiniciarem el servei postfix mitjançant l’execució sudo /etc/init.d/postfix restart
</p>

<p>
<strong>6.</strong> Autentificació SASL
</p>

<p>
Davant del tipus de servei que estem configurant, és important que definim una autenticació SASL mitjançant l’execució sudo aptitude install libsasl2-2 sasl2-bin
</p>

<p>
A més, caldrà editar l’arxiu /etc/default/saslauthd i deixarem de comentar, o bé, canviarem la línia START=yes
</p>

<p>
Després de la línia START=yes afegirem:
</p>
<pre class="code">PWDIR=&quot;/var/spool/postfix/var/run/saslauthd&quot;\ PARAMS=&quot;-m ${PWDIR}&quot;\ PIDFILE=&quot;${PWDIR}/saslauthd.pid&quot;</pre>

<p>
Arribats en aquest punt, executarem:
</p>
<pre class="code">dpkg-statoverride --force --update --add root sasl 755 /var/spool/postfix/var/run/saslauthd &amp;gt; /dev/null</pre>

<p>
I reiniciarem sudo /etc/init.d/saslauthd start
</p>

<p>
<strong>7.</strong> Instal·lació de l’antivirus
</p>

<p>
A mode de seguretat, tractant-se d’un servidor postfix, instal·larem un antivirus mitjançant l’execució de l’ordre sudo aptitude install clamav-daemon
</p>

<p>
Per mantenir l’efectivitat de l’antivirus, instal·larem l’actualitzador de definicions de virus: sudo aptitude install clamav-freshclam
</p>

<p>
Instal·larem, a més, descompressors perquè l’antivirus pugui analitzar arxius comprimits: sudo aptitude install unrar lha arj zip unzip bzip2 gzip cpio file lzop
</p>

<p>
D’altra banda, editarem l’arxiu /etc/amavis/conf.d/15-content_filter_mode i descomentarem la línia @bypass_virus_checks_maps
</p>
<pre class="code">@bypass_virus_checks_maps = (    \%bypass_virus_checks, \@bypass_virus_checks_acl, \$bypass_virus_checks_re);</pre>

<p>
Editarem, a més, l’arxiu /etc/amavis/conf.d/05-domain_id i comentarem la línia <code>#chomp($myhostname = `hostname –fqdn`</code>); i descomentarem la línia, afegint-hi el valor:
</p>
<pre class="code">$myhostname = &quot;localhost&quot;;</pre>

<p>
Afegiu l’usuari clamav al grup amavis:
</p>
<pre class="code">sudo adduser clamav amavis

sudo /etc/init.d/amavis restart

sudo /etc/init.d/clamav-daemon restart</pre>

<p>
Executeu, a més:
</p>
<pre class="code">postconf -e &#039;content_filter = amavis:[127.0.0.1]:10024&#039;\ postconf -e &#039;receive_override_options = no_address_mappings&#039;</pre>

<p>
Modificarem l’arxiu /etc/postfix/master.cf afegint-hi les línies següents:
</p>
<pre class="code">amavis unix - - - - 2 smtp\ -o smtp_data_done_timeout=1200\ -o smtp_send_xforward_command=yes

127.0.0.1:10025 inet n - - - - smtpd\ -o content_filter=\ -o local_recipient_maps=\ -o relay_recipient_maps=\ -o smtpd_restriction_classes=\ -o smtpd_client_restrictions=\ -o smtpd_helo_restrictions=\ -o smtpd_sender_restrictions=\ -o smtpd_recipient_restrictions=permit_mynetworks,reject\ -o mynetworks=127.0.0.0/8\ -o strict_rfc821_envelopes=yes\ -o receive_override_options=no_unknown_recipient_checks,no_header_body_checks\ -o smtpd_bind_address=127.0.0.1</pre>

<p>
Per certificar els canvis, reiniciarem el servidor: sudo /etc/init.d/postfix restart
</p>

<p>
I, a més, comprovarem els ports: netstat –tap
</p>
<div class="ioctable ">
<div class="titletable"><a name=""><span>Taula: </span></a></div>
<div class="table tabminheight"><table class="inline">
	<tr class="row0">
		<td class="col0 leftalign" colspan="6"> Active Internet connections (servers and established)           </td>
	</tr>
	<tr class="row1">
		<td class="col0"> Proto </td><td class="col1"> Recv-Q </td><td class="col2"> Send-Q </td><td class="col3 leftalign"> Local Address   </td><td class="col4"> Foreign Address </td><td class="col5 leftalign"> State  </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> tcp   </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3 leftalign"> *:imaps         </td><td class="col4 leftalign"> *:*             </td><td class="col5"> LISTEN </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> tcp   </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3"> localhost:10024 </td><td class="col4 leftalign"> *:*             </td><td class="col5"> LISTEN </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> tcp   </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3"> localhost:10025 </td><td class="col4 leftalign"> *:*             </td><td class="col5"> LISTEN </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> tcp   </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3"> localhost:mysql </td><td class="col4 leftalign"> *:*             </td><td class="col5"> LISTEN </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> tcp   </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3 leftalign"> *:imap2         </td><td class="col4 leftalign"> *:*             </td><td class="col5"> LISTEN </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> tcp   </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3 leftalign"> *:www           </td><td class="col4 leftalign"> *:*             </td><td class="col5"> LISTEN </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> tcp   </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3 leftalign"> localhost:ipp   </td><td class="col4 leftalign"> *:*             </td><td class="col5"> LISTEN </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign"> tcp   </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3 leftalign"> *:smtp          </td><td class="col4 leftalign"> *:*             </td><td class="col5"> LISTEN </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> tcp6  </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3 leftalign"> [::]:smtp       </td><td class="col4 leftalign"> [::]:*          </td><td class="col5"> LISTEN </td>
	</tr>
</table></div>
</div>
<p>
<strong>8.</strong> Instal·lar l’antispam
</p>

<p>
Arribats en aquest punt, instal·larem el protector contra el correu brossa mitjançant l’execució sudo aptitude install spamassassin
</p>

<p>
Paral·lelament, descomentarem la línia @bypass_spam_checks_maps de /etc/amavis/conf.d/15-content_filter_mode (val a dir que si ja ho hem fet en l’antivirus, lògicament, no caldrà tornar a fer-ho):
</p>

<p>
@bypass_spam_checks_maps = (<br/>
   \%bypass_spam_checks, \@bypass_spam_checks_acl, \<span class="inlinelatex"><img src="../media/renderfail.png" /></span>myhostname = `hostname –fqdn`);
&lt;/code&gt;
</p>

<p>
I descomentarem la línia, afegint el valor (si ho hem fet en l’antivirus, no cal fer-ho):
</p>
<pre class="code">$myhostname = &quot;localhost&quot;;</pre>

<p>
En el cas que no ho haguem fet en l’antivirus, executarem les següents ordres:
</p>

<p>
postconf -e ‘content_filter = amavis:[127.0.0.1]:10024’<br/>
postconf -e ‘receive_override_options = no_address_mappings’
</p>

<p>
A més, modificarem l’arxiu /etc/postfix/master.cf afegint-hi les següents línies (si ho hem fet en l’antivirus, no cal fer-ho):
</p>
<pre class="code">amavis unix - - - - 2 smtp\ -o smtp_data_done_timeout=1200\ -o smtp_send_xforward_command=yes

127.0.0.1:10025 inet n - - - - smtpd\ -o content_filter=\ -o local_recipient_maps=\ -o relay_recipient_maps=\ -o smtpd_restriction_classes=\ -o smtpd_client_restrictions=\ -o smtpd_helo_restrictions=\ -o smtpd_sender_restrictions=\ -o smtpd_recipient_restrictions=permit_mynetworks,reject\ -o mynetworks=127.0.0.0/8\ -o strict_rfc821_envelopes=yes\ -o receive_override_options=no_unknown_recipient_checks,no_header_body_checks\ -o smtpd_bind_address=127.0.0.1</pre>

<p>
Per comprovar que tot és correcte, reiniciarem el servidor:
</p>
<pre class="code">sudo /etc/init.d/spamassassin restart\ sudo /etc/init.d/amavis restart\ sudo /etc/init.d/postfix restart</pre>

<p>
Comprovarem, a més, els ports (si ho hem fet a l’antivirus, no cal fer-ho): <code>netstat –tap</code>
</p>
<div class="ioctable ">
<div class="titletable"><a name=""><span>Taula: </span></a></div>
<div class="table tabminheight"><table class="inline">
	<tr class="row0">
		<td class="col0 leftalign" colspan="6"> Active Internet connections (servers and established)           </td>
	</tr>
	<tr class="row1">
		<td class="col0"> Proto </td><td class="col1"> Recv-Q </td><td class="col2"> Send-Q </td><td class="col3 leftalign"> Local Address   </td><td class="col4"> Foreign Address </td><td class="col5 leftalign"> State  </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> tcp   </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3 leftalign"> *:imaps         </td><td class="col4 leftalign"> *:*             </td><td class="col5"> LISTEN </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> tcp   </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3"> localhost:10024 </td><td class="col4 leftalign"> *:*             </td><td class="col5"> LISTEN </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> tcp   </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3"> localhost:10025 </td><td class="col4 leftalign"> *:*             </td><td class="col5"> LISTEN </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> tcp   </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3"> localhost:mysql </td><td class="col4 leftalign"> *:*             </td><td class="col5"> LISTEN </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> tcp   </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3 leftalign"> *:imap2         </td><td class="col4 leftalign"> *:*             </td><td class="col5"> LISTEN </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> tcp   </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3 leftalign"> *:www           </td><td class="col4 leftalign"> *:*             </td><td class="col5"> LISTEN </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> tcp   </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3 leftalign"> localhost:ipp   </td><td class="col4 leftalign"> *:*             </td><td class="col5"> LISTEN </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign"> tcp   </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3 leftalign"> *:smtp          </td><td class="col4 leftalign"> *:*             </td><td class="col5"> LISTEN </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> tcp6  </td><td class="col1 leftalign"> 0      </td><td class="col2 leftalign"> 0      </td><td class="col3 leftalign"> [::]:smtp       </td><td class="col4 leftalign"> [::]:*          </td><td class="col5"> LISTEN </td>
	</tr>
</table></div>
</div>
<p>
<strong>9.</strong> Comprovació del funcionament correcte del Postfix
</p>

<p>
Arribats en aquest punt, ja podem realitzar proves per comprovar que el programari funciona correctament Postfix:
</p>

<p>
En primer lloc, executarem l’ordre següent:telnet localhost 25
</p>

<p>
Escriurem ehlo localhost i, en conseqüència, apareixerà el següent:
</p>
<pre class="code">250-STARTTLS\ 250-AUTH\ (...)</pre>

<p>
Enviarem un correu electrònic a un usuari local mitjançant telnet localhost 25
</p>
<pre class="code">Trying 127.0.0.1...\ Connected to localhost.\ Escape character is &#039;^]&#039;.\ 220 server1.example.com ESMTP Postfix (Ubuntu)\ MAIL FROM: oriol@localhost\ 250 2.1.0 Ok\ RCPT TO: oriol@localhost\ 250 2.1.5 Ok\ DATA\ 354 End data with .\ Subject: Com va?!\ Prova, proveta.\ .\ 250 2.0.0 Ok: queued as 9334A8D394\ quit\ 221 2.0.0 Bye\ Connection closed by foreign host.</pre>

<p>
Per últim, podrem comprovar el missatge mitjançant l’execució de l’ordre cat /home/oriol/Maildir/cur/*
</p>

<p>
A més, podrem verificar el registre mitjançant l’execució sudo tail -f /var/log/mail.log
</p>

<p>
<strong>10.</strong> Programari squirrelmail
</p>

<p>
Per últim, instal·larem el programari squirrelmail mitjançant l’execució de les ordres següents:
</p>

<p>
sudo aptitude install dovecot-imapd<br/>
sudo aptitude install apache2<br/>
sudo aptitude install php5<br/>
aptitude install squirrelmail
</p>

<p>
A continuació, editarem l’arxiu /etc/apache2/apache2.conf i afegirem la següent línia Include <strong>/etc/squirrelmail/apache.conf</strong>
</p>

<p>
Reiniciarem el servidor mitjançant l’execució /etc/init.d/apache2 restart i comprovarem el servidor de correu <a href="http://localhost/squirrelmail" class="urlextern" title="http://localhost/squirrelmail"  rel="nofollow">http://localhost/squirrelmail</a>
</p>

<p>
Per certificar el resultat d’enviar un correu a un usuari local (oriol@localhost), haurem d’executar cat /home/oriol/Maildir/cur/*
</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="obtencio_d_un_certificat_digital" >Obtenció d&#039;un certificat digital</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és esbrinar com la llibertat d’accés i l’anonimat a Internet han motivat la necessitat d’establir certes mesures de seguretat que garanteixin la seguretat quan es comparteix informació per la Xarxa.
</p>

<p>
Actualment, gran part de les comunicacions les realitzem mitjançant el correu electrònic i, en molt poques ocasions, ens aturem per considerar com pot ser de fàcil interceptar la correspondència d’altri i, en conseqüència, posar en perill el grau de confidencialitat de la informació transmesa.
</p>

<p>
Per tant, davant d’aquest perill latent, tenim a la nostra disposició per la xarxa tot un ventall de programes que ens ajuden a amagar la informació, o bé, dificultar-ne l’accés mitjançant tècniques de criptografia. Aquestes eines ens permeten garantir la confidencialitat, autenticació i integritat dels nostres correus electrònics.
</p>

<p>
Configureu un client de correu electrònic xifrat en el sistema operatiu Windows.
</p>

<p>
<form action=""><div class="solution ioccontent">
<p>
El programari guardià de la privadesa de GNU (GnuPG, Gnu Privacy Guard) és una eina d’encriptació basada en el programari lliure i que ens permetrà encriptar els correus electrònics que enviem mitjançant el nostre client de correu electrònic.
</p>

<p>
Val a dir que el programari <em>GnuPG</em> és una eina d’encriptació basada en el programari lliure; a més utilitzarem el client de correu electrònic Thunderbird de la família Mozilla, i per establir la interacció entre el motor d’encriptació <em>GnuPG</em> i el programari <em>Thunderbird</em> utilitzarem el programari <em>Enigmail</em>.
</p>

<p>
Per tant, en primer lloc instal·larem el motor d’encriptació <em>GnuPG</em> pel sistema operatiu Windows mitjançant l’accés al servidor <acronym title="File Transfer Protocol">FTP</acronym> <a href="ftp://ftp.gnupg.org/gcrypt/binary/gnupg-w32cli-1.4.8.exe" class="urlextern" title="ftp://ftp.gnupg.org/gcrypt/binary/gnupg-w32cli-1.4.8.exe"  rel="nofollow">ftp://ftp.gnupg.org/gcrypt/binary/gnupg-w32cli-1.4.8.exe</a>. És inevitable destacar la importància de certificar que certifiquem l’última versió disponible del programari.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_36.jpg" title="w_ic10m7uf2_36.jpg" alt="w_ic10m7uf2_36.jpg" /></div>

</p>

<p>
Un cop haguem definit els paràmetres principals del programari com, per exemple, el llenguatge, el programari finalitzarà la instal·lació i el deixarà emmagatzemat dins de l’ordinador (no apareixerà cap finestra d’arrencada del programa).
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_37.jpg" title="w_ic10m7uf2_37.jpg" alt="w_ic10m7uf2_37.jpg" /></div>

</p>

<p>
Un cop ja hem instal·lat el programari, la podem començar a treballar amb el nostre client de correu electrònic. En el cas que no l’haguem instal·lat, haurem d’accedir a la pàgina web <a href="http://www.mozilla-europe.org/ca/products/thunderbird/" class="urlextern" title="http://www.mozilla-europe.org/ca/products/thunderbird/"  rel="nofollow">http://www.mozilla-europe.org/ca/products/thunderbird/</a> per descarregar-lo i instal·lar-lo.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_38.jpg" title="w_ic10m7uf2_38.jpg" alt="w_ic10m7uf2_38.jpg" /></div>

</p>

<p>
Des del punt de vista de la instal·lació, és preferible que realitzem una instal·lació de tipus estàndard, atès que no hem de definir cap paràmetre en concret a l’hora de treballar amb el programari d’encriptació.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_39.jpg" title="w_ic10m7uf2_39.jpg" alt="w_ic10m7uf2_39.jpg" /></div>

</p>

<p>
Val a dir que, en el cas que ja disposem d’un client de correu electrònic instal·lat en el nostre ordinador, el client de correu electrònic que estem instal·lant ens demanarà si volem que agafi la informació rellevant com, per exemple, la llibreta d’adreces.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_40.jpg" title="w_ic10m7uf2_40.jpg" alt="w_ic10m7uf2_40.jpg" /></div>

</p>

<p>
Un cop haguem instal·lat el programari, haurem de carregar el compte de correu electrònic que vulguem utilitzar en l’aplicació com si es tractés d’un correu electrònic qualsevol.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_41.jpg" title="w_ic10m7uf2_41.jpg" alt="w_ic10m7uf2_41.jpg" /></div>

</p>

<p>
Arribats en aquest punt, ja podrem instal·lar l’accessori d’encriptació del client de correu electrònic Thunderbird, això és, haurem d’adreçar-nos a la pàgina web <a href="https://addons.mozilla.org/es-ES/thunderbird/downloads/file/22391/enigmail-0.95.6-tb+sm.xpi" class="urlextern" title="https://addons.mozilla.org/es-ES/thunderbird/downloads/file/22391/enigmail-0.95.6-tb+sm.xpi"  rel="nofollow">https://addons.mozilla.org/es-ES/thunderbird/downloads/file/22391/enigmail-0.95.6-tb+sm.xpi</a> per descarregar el programari Enigmail. Val a dir que el programari Enigmail no és un motor criptogràfic, sinó que utilitza el programari GNU Privacy Guard per realitzar les operacions de xifratge criptogràfic.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_42.jpg" title="w_ic10m7uf2_42.jpg" alt="w_ic10m7uf2_42.jpg" /></div>

</p>

<p>
Un cop haguem descarregat el programari, l’instal·larem des del client de correu electrònic Thunderbird mitjançant <em>Eines / Complements / Instal·lar i</em>, a continuació, tal com sol·licitarà el programari, reiniciarem el client de correu electrònic.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_43.jpg" title="w_ic10m7uf2_43.jpg" alt="w_ic10m7uf2_43.jpg" /></div>

</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_44.jpg" title="w_ic10m7uf2_44.jpg" alt="w_ic10m7uf2_44.jpg" /></div>

</p>

<p>
Un cop ja hem instal·lat tots els sistemes, ja podem configurar el nostre compte de correu electrònic per poder utilitzar el nostre correu electrònic encriptat.
</p>

<p>
En conseqüència, considerant el client de correu electrònic, tindrem, com a mínim, un compte de correu electrònic configurat, i podrem accedir a l’opció <em>OpenPGP</em> de la barra superior del client de correu electrònic per crear un nou parell de claus mitjançant l’accés a l’opció <em>Generar / nova parella de claus</em>.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_45.jpg" title="w_ic10m7uf2_45.jpg" alt="w_ic10m7uf2_45.jpg" /></div>

</p>

<p>
Arribats en aquest punt, únicament ens quedarà per omplir la contrasenya i, opcionalment, el comentari per identificar el compte al qual fa referència. De fet, serà dins de l’opció <em>Avançat</em> que ens sol·licitarà la grandària d’encriptació de la clau. Els paràmetres més òptims per ser utilitzats són 2048 per la mida de la clau i <em>DSA</em> com a algoritme d’encriptació.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_46.jpg" title="w_ic10m7uf2_46.jpg" alt="w_ic10m7uf2_46.jpg" /></div>

</p>

<p>
Un cop ja haguem creat les dues claus, ja podrem començar a utilitzar-les. De fet, amb la intenció d’enfortir el nostre anell de confiança, haurem de donar a conèixer la nostra clau pública perquè els integrants del nostre anell de confiança puguin encriptar-nos els missatges.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_47.jpg" title="w_ic10m7uf2_47.jpg" alt="w_ic10m7uf2_47.jpg" /></div>

</p>

<p>
Això podrem fer-ho pujant les dues claus que hem creat a un servidor de claus, o bé, enviant-les als nostres amics (els integrants del nostre anell de confiança) per correu electrònic. Per accedir a una d’aquestes dues opcions, haurem de clicar amb el botó dret del ratolí i escollir l’opció corresponent.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_48.jpg" title="w_ic10m7uf2_48.jpg" alt="w_ic10m7uf2_48.jpg" /></div>

</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_49.jpg" title="w_ic10m7uf2_49.jpg" alt="w_ic10m7uf2_49.jpg" /></div>

</p>

<p>
En el cas d’enviar les claus a un servidor públic de claus, les claus es podran localitzar mitjançant la cerca del nostre nom i també per la nostra adreça de correu electrònic. A més, tots els servidors de claus PGP es comuniquen entre ells i donen a conèixer les diferents claus públiques a la resta de servidors.
</p>

<p>
D’altra banda, en el cas d’optar pel mètode més senzill, això és, enviar les claus creades mitjançant el correu electrònic, crearem un nou correu, posarem l’adreça del destinatari i l’assumpte i certificarem que el programari hagi adjuntat la nostra clau pública.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_50.jpg" title="w_ic10m7uf2_50.jpg" alt="w_ic10m7uf2_50.jpg" /></div>

</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="obtencio_d_un_certificat_digital1" >Obtenció d&#039;un certificat digital</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és conèixer com la llibertat d’accés i l’anonimat a Internet han motivat la necessitat d’establir certes mesures de seguretat que garanteixin la confidencialitat quan es comparteix informació per la Xarxa.
</p>

<p>
El constant creixement de la utilització de les eines que treballen mitjançant Internet ha comportat que la nostra privadesa cada cop està més envaïda. De fet, hi ha robots que controlen tant les pàgines web que visitem, els programes que utilitzem i els correus electrònics que enviem. De fet, és important destacar el client web de correu electrònic Gmail que, a partir d’anàlisis dels nostres correus electrònics, ens suggereix informació en forma de publicitat en relació amb el que hem escrit o rebut.
</p>

<p>
És per aquest motiu que, davant d’aquesta ruptura del grau de confidencialitat esperat, va sorgir el concepte de l’encriptació, això és, protegir els nostres missatges per evitar que aquelles persones que no disposin del nostre permís puguin consultar els nostres correus electrònics.
</p>

<p>
Configureu un client de correu electrònic xifrat en el sistema operatiu Linux.
</p>

<p>
<form action=""><div class="solution ioccontent">
<p>
L’encriptació dels nostres correus electrònics es pot realitzar amb qualsevol sistema operatiu i amb diferents programes client de correu electrònic. En el nostre cas, realitzarem aquesta prova amb el sistema operatiu Linux i, concretament, amb la distribució Ubuntu i el client de correu electrònic Evolution.
</p>

<p>
En aquest cas concret, habilitarem el nostre compte de correu electrònic via web (en aquest cas, un compte de Gmail) perquè pugui ser gestionat mitjançant un programa extern.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_51.jpg" title="w_ic10m7uf2_51.jpg" alt="w_ic10m7uf2_51.jpg" /></div>

</p>

<p>
Per tant, en primer lloc, accedirem al compte de correu electrònic via web i, un cop dins, ens adreçarem a la secció <em>Configuració</em> per poder gestionar els paràmetres del <em>Reenviament POP/IMAP</em>.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_52.jpg" title="w_ic10m7uf2_52.jpg" alt="w_ic10m7uf2_52.jpg" /></div>

</p>

<p>
Arribats en aquest punt, configurarem el nostre client de correu electrònic (<em>Evolution</em>) mitjançant el servei ofert pels servidors <em>POP</em> i <em>SMTP</em> del nostre correu electrònic via web Gmail que, en aquest cas, són <em>pop.gmail.com</em> i <em>smtp.gmail.com</em>.
</p>

<p>
Paral·lelament, haurem d’adreçar-nos a l’opció <em>Aplicacions</em> de la barra superior i clicant dins de l’opció <em>Internet</em> del menú desplegat, accedirem al client de correu electrònic <em>Evolution</em>.
</p>

<p>
Un cop dins, haurem d’editar el compte de correu electrònic per definir la modalitat de recepció i enviament dels correus electrònics.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_53.jpg" title="w_ic10m7uf2_53.jpg" alt="w_ic10m7uf2_53.jpg" /></div>

</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_54.jpg" title="w_ic10m7uf2_54.jpg" alt="w_ic10m7uf2_54.jpg" /></div>

</p>

<p>
Un cop establerts aquests paràmetres, la podrem accedir a la safata del correu electrònic i, alhora, comprovar si és possible enviar i rebre correus electrònics des del nostre client de correu electrònic.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_55.jpg" title="w_ic10m7uf2_55.jpg" alt="w_ic10m7uf2_55.jpg" /></div>

</p>

<p>
Un cop ja haguem pogut confirmar el funcionament correcte del client de correu electrònic, ja podrem començar a crear les claus d’encriptació. Val a dir que l’encriptació funciona amb dues claus, això és, la clau pública (que donarem a qui vulguem que ens enviï correus encriptats) i la clau privada (que ens servirà per desencriptar els correus que ens enviïn encriptats). Ambdues claus les generarem mitjançant el programari GPG:
</p>

<p>
Per tant, accedirem al terminal (o intèrpret d’ordres) per comprovar que hi hagi instal·lat el programari GPG mitjançant l’execució de l’ordre gpg –version.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_56.jpg" title="w_ic10m7uf2_56.jpg" alt="w_ic10m7uf2_56.jpg" /></div>

</p>

<p>
A continuació, generem les claus mitjançant l’execució de l’ordre gpg –gen-key i definirem els principals paràmetres que les caracteritzaran.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_56.jpg" title="w_ic10m7uf2_56.jpg" alt="w_ic10m7uf2_56.jpg" /></div>

</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_57.jpg" title="w_ic10m7uf2_57.jpg" alt="w_ic10m7uf2_57.jpg" /></div>

</p>

<p>
Serà amb la generació de les claus com definirem els paràmetres principals:
</p>
<ul>
<li class="level1"><div class="li"> Tipus de clau DSA i Elgamal (1).</div>
</li>
<li class="level1"><div class="li"> Mida de la clau Elgamal (2048).</div>
</li>
<li class="level1"><div class="li"> Clau sense caducar (0).</div>
</li>
<li class="level1"><div class="li"> Nom (Oriol T).</div>
</li>
<li class="level1"><div class="li"> Correu electrònic (torres.oriol@gmail.com).</div>
</li>
<li class="level1"><div class="li"> Contrasenya (per desencriptar la clau privada).</div>
</li>
<li class="level1"><div class="li"> Generació de les claus mitjançant un procés d’entropia (es creen diferents bytes de forma aleatòria).</div>
</li>
</ul>

<p>
Arribats en aquest punt, ja s’haurà creat la nostra clau pública. Per veure-les, haurem d’executar gpg –list-keys.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_58.jpg" title="w_ic10m7uf2_58.jpg" alt="w_ic10m7uf2_58.jpg" /></div>

</p>

<p>
El resultat de l’execució de l’ordre ens proporcionarà informació relacionada amb la nostra clau i el nostre nom d’usuari.
</p>

<p>
Per veure la nostra clau pública:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">ubuntu@ubuntu:~$ gpg --list-keys</div></li><li class="li1"><div class="de1">/home/ubuntu/.gnupg/pubring.gpg--------------------------</div></li><li class="li1"><div class="de1">pub 1024D/02156DAC 2007-11-11</div></li><li class="li1"><div class="de1">uid                Oriol T</div></li><li class="li1"><div class="de1">sub 2048g/BD7C609D 2007-11-11</div></li></ol></pre>

<p>
En el cas d’aquest exemple, la nostra clau serà 02156DAC
</p>

<p>
D’altra banda, amb la intenció de compartir la nostra clau pública perquè la gent ens pugui enviar els correus electrònics encriptats, atès que necessitaran la nostra clau. És per aquest motiu que la pujarem a un servidor de claus.
</p>

<p>
Val a dir que hi ha molts servidors de claus per Internet (només cal utilitzar-lo buscant key server al Google). En el nostre cas, utilitzarem el servidor de l’Institut Tecnològic de Massachusetts (MIT, <em>Massachusetts Institute of Technology</em>).
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_59.jpg" title="w_ic10m7uf2_59.jpg" alt="w_ic10m7uf2_59.jpg" /></div>

</p>

<p>
Un cop s’ha enviat la clau, ja podrem adreçar-nos al servidor de claus del MIT i cercar la nostra clau mitjançant el nom que haguem triat mentre generàvem la clau.
</p>

<p>
Arribats en aquest punt, ja podem començar a intercanviar correus electrònics encriptats mitjançant la clau pública de la persona a qui vulguem enviar el correu electrònic. En aquest cas, qui vulgui enviar-nos correus electrònics encriptats haurà d’executar gpg –recv-keys –keyserver pgp.mit.edu 02156DAC.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_60.jpg" title="w_ic10m7uf2_60.jpg" alt="w_ic10m7uf2_60.jpg" /></div>

</p>

<p>
A més, als servidors de claus també podrem buscar les claus de la gent que les hagi pujat mitjançant el nom aplicat (per exemple, “Oriol T”).
</p>

<p>
Per últim, és important habilitar el client de correu electrònic <em>Evolution</em> per enviar i rebre correus encriptats. Per fer-ho, haurem d’adreçar-nos a l’opció <em>Edita</em> de la barra superior del programari i, un cop dins, haurem d’adreçar-nos a l’opció <em>Preferències</em> i, un cop dins, <em>Comptes de correu / edita / Seguretat. Un cop dins, afegirem la nostra clau marcant l’opció que sempre es confiï amb el nostre anell de claus</em>.
</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_61.jpg" title="w_ic10m7uf2_61.jpg" alt="w_ic10m7uf2_61.jpg" /></div>

</p>

<p>
<div class="imgelem">
<img src="../media/w_ic10m7uf2_62.jpg" title="w_ic10m7uf2_62.jpg" alt="w_ic10m7uf2_62.jpg" /></div>

</p>

<p>
Per últim, és important habilitar el client de correu electrònic <em>Evolution</em> per enviar i rebre correus encriptats. Per fer-ho, haurem d’adreçar-nos a l’opció <em>Edita</em> de la barra superior del programari i, un cop dins, haurem d’adreçar-nos a l’opció <em>Preferències</em> i, un cop dins, <em>Comptes de correu / edita / Seguretat</em>. Un cop dins, afegirem la nostra clau marcant l’opció que sempre es confiï amb el nostre anell de claus.
</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u2/a2/continguts.html">Gestió de serveis de correu electrònic</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u2/a2/exercicis.html">Exercicis d'atuavaluació</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
