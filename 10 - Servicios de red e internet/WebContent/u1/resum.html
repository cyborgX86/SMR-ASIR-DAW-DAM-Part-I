<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html">
        
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Serveis de Xarxa i Internet</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Serveis de Xarxa i Internet">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../index.html">Serveis de Xarxa i Internet</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u1" class="parentnode"><p><a class="unit" href="../../WebContent/u1/introduccio.html">1. Serveis de noms i configuració automàtica</a></p><ul class="expander"><li id="u1introduccio"><a href="../../WebContent/u1/introduccio.html">Introducció</a></li><li id="u1resum"><a href="../../WebContent/u1/resum.html">Resum</a></li><li id="u1resultats"><a href="../../WebContent/u1/resultats.html">Resultats d'aprenentatge</a></li><li id="u1referencies"><a href="../../WebContent/u1/referencies.html">Més informació</a></li><li id="u1a1" class="tocsection"><p id='u1a1continguts'><a class="section" href="../../WebContent/u1/a1/continguts.html">Instal·lació i administració de serveis de noms de domini</a><span class="buttonexp"></span></p><ul><li id="u1a1activitats"><a href="../../WebContent/u1/a1/activitats.html">Activitats</a></li><li id="u1a1exercicis"><a href="../../WebContent/u1/a1/exercicis.html">Exercicis</a></li><li id="u1a1annexos"><a href="../../WebContent/u1/a1/annexos.html">Annexos</a></li></ul></li><div data-parent-id='u1a1' class='tocssection hidden'><div class="toc"><ul><li><a href="../../WebContent/u1/a1/continguts.html#el_servei_de_resolucio_de_noms">El servei de resolució de noms</a></li><li><a href="../../WebContent/u1/a1/continguts.html#funcionalitat_del_sistema_de_noms_jerarquics">Funcionalitat del sistema de noms jeràrquics</a></li><li><a href="../../WebContent/u1/a1/continguts.html#instal_lacio_i_configuracio_del_servei_dns">Instal·lació i configuració del servei DNS</a></li><li><a href="../../WebContent/u1/a1/continguts.html#resolucio_forwarding_i_memoria_cau">Resolució, 'forwarding' i memòria cau</a></li><li><a href="../../WebContent/u1/a1/continguts.html#creacio_de_zones">Creació de zones</a></li><li><a href="../../WebContent/u1/a1/continguts.html#transferencies_de_zona">Transferències de zona</a></li><li><a href="../../WebContent/u1/a1/continguts.html#extensions_del_protocol_dns">Extensions del protocol DNS</a></li></ul></div></div><li id="u1a2" class="tocsection"><p id='u1a2continguts'><a class="section" href="../../WebContent/u1/a2/continguts.html">Instal·lació i administració de serveis de configuració automàtica de xarxa</a><span class="buttonexp"></span></p><ul><li id="u1a2activitats"><a href="../../WebContent/u1/a2/activitats.html">Activitats</a></li><li id="u1a2exercicis"><a href="../../WebContent/u1/a2/exercicis.html">Exercicis</a></li><li id="u1a2annexos"><a href="../../WebContent/u1/a2/annexos.html">Annexos</a></li></ul></li><div data-parent-id='u1a2' class='tocssection hidden'><div class="toc"><ul><li><a href="../../WebContent/u1/a2/continguts.html#configuracio_automatitzada_de_xarxa">Configuració automatitzada de xarxa</a></li><li><a href="../../WebContent/u1/a2/continguts.html#funcionament_del_protocol_dhcp">Funcionament del protocol DHCP</a></li><li><a href="../../WebContent/u1/a2/continguts.html#instal_lacio_del_servidor_dhcp">Instal·lació del servidor DHCP</a></li><li><a href="../../WebContent/u1/a2/continguts.html#configuracio_del_servei">Configuració del servei</a></li><li><a href="../../WebContent/u1/a2/continguts.html#assignacions_estatiques_i_dinamiques">Assignacions estàtiques i dinàmiques</a></li><li><a href="../../WebContent/u1/a2/continguts.html#opcions_addicionals_de_configuracio">Opcions addicionals de configuració</a></li><li><a href="../../WebContent/u1/a2/continguts.html#documentacio_de_procediments">Documentació de procediments</a></li></ul></div></div></ul></li><li id="" class="indexnode"><p><a href="../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="introduccio.html">Serveis de noms i configuració automàtica</a></li><li>Resum</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="resum"> Resum </a></h1>
    	
<p>
L’administrador de xarxa té la missió de configurar els equips que la componen. Això significa configurar els servidors, els equips clients, els concentradors, els encaminadors… Cada equip de la xarxa s’ha d’identificar amb la seva adreça IP i la seva màscara de xarxa, i generalment disposarà d’un camí d’accés a Internet. Tant els usuaris com els serveis requeriran l’accés a d’altres equips identificant-los pel seu nom de domini en lloc de per la seva adreça IP, més difícil de recordar. Fer això equip per equip resultaria una feina feixuga i repetitiva si no es disposés de serveis de xarxa que la faciliten: el servei de resolució de noms i el de configuració automàtica.
</p>

<p>
El servei de resolució de noms té les següent característiques principals:
</p>

<p>
<strong>a) Sistema de noms pla i jeràrquic</strong>: cal un mecanisme per identificar els <em>hosts</em> que hi ha a la xarxa. Inicialment s’utilitzava un fitxer de text pla per identificar cada equip amb la seva adreça IP. Aquest sistema pot ser útil per equips en xarxes locals petites (domèstiques), però no és escalable a Internet.
</p>

<p>
El <strong><acronym title="Domain Name System">DNS</acronym></strong> o sistema de noms de domini permet mantenir una base de dades jeràrquica i distribuïda dels noms de domini.
</p>

<p>
L’<strong>espai de noms</strong> és tot l’arbre de noms, jeràrquic, que conté tots els dominis d’Internet. 
</p>

<p>
Un <strong>domini</strong> és cada un dels elements que componen l’espai de noms (per exemple, ioc.cat).
</p>

<p>
Una <strong>zona</strong> és l’espai gestionat per un servidor de noms que és autoritat sobre aquesta zona. Les  zones no tenen per què correspondre a un domini.
</p>

<p>
Convé saber identificar cada un dels elements següents:
</p>
<ul>
<li class="level1"><div class="li"> Domini absolut o FQDN: domini completament qualificat. S’hi indiquen tots els nivells fins arribar al node arrel. </div>
</li>
<li class="level1"><div class="li"> FQDN: sigla de <em>Full Qualified Domain Name</em>, un domini absolut. </div>
</li>
<li class="level1"><div class="li"> Domini relatiu: domini sense qualificar. Indica una part de la ruta del domini, relativa a on pertany.</div>
</li>
<li class="level1"><div class="li"> Domini arrel: Domini del qual deriven tots els altres noms de domini d’Internet. </div>
</li>
<li class="level1"><div class="li"> TLD: sigla de <em>Top Level Domain</em>. Dominis de primer nivell, són els famosos .com, .cat… </div>
</li>
</ul>

<p>
<strong>b) Zones primàries i secundàries</strong>: l’administració del sistema de noms de dominis a Internet es divideix en zones. Cada organització que és autoritària d’una zona gestiona el servidor primari i els secundaris de la zona. 
</p>

<p>
Una <strong>zona</strong> conté la <strong>base de dades de la zona</strong>. És a dir, la descripció dels recursos (els <em>hosts</em>, servidors de noms, d’autoritat, d’impressió…) que formen la zona. Una zona es pot <strong>delegar</strong>, és a dir, es pot passar l’administració d’un subdomini a una altra entitat, que serà qui el gestioni.
</p>

<p>
L’especificació del protocol <acronym title="Domain Name System">DNS</acronym> indica que cada zona ha de disposar d’un servidor <strong>primari</strong> (que manté la base de dades de zona) i un o més servidors <strong>secundaris</strong> o de seguretat (als quals transfereix aquesta informació).
</p>

<p>
El servidor primari i secundari són <strong>autoritaris</strong> per a la zona que administren.
</p>

<p>
La resolució de noms es pot fer mitjançant la informació continguda en la base de dades de la zona i rep el nom de <strong>resposta autoritària</strong>. També es pot fer consultant respostes anteriors d’altres servidors desades en la memòria cau, cas en què s’anomena <strong>resposta no autoritària</strong>.
</p>

<p>
Quan es fa una consulta a un servidor <acronym title="Domain Name System">DNS</acronym> es diu que cal fer la <strong>resolució</strong> d’aquesta consulta. El mecanisme a emprar pot ser:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Iteratiu</strong>: un servidor que rep una consulta iterativa proporciona la millor resposta possible basant-se en la informació que té. No consulta cap altre servidor.</div>
</li>
<li class="level1"><div class="li"> <strong>Recursiu</strong>: un servidor que rep una consulta recursiva ha de resoldre la consulta. Si no té suficient informació procedirà a consultar altres servidors iterativament.</div>
</li>
</ul>

<p>
El client o <strong><em>resolver</em></strong> normalment fa consultes recursives al seu servidor <acronym title="Domain Name System">DNS</acronym>. Els servidors <acronym title="Domain Name System">DNS</acronym> es fan consultes iteratives entre ells.
</p>

<p>
El procés de resolució consta usualment d’aquests passos:
</p>
<ul>
<li class="level1"><div class="li"> Si la consulta és d’una dada que pertany a la pròpia zona s’emet la resposta autoritària.</div>
</li>
<li class="level1"><div class="li"> Si la consulta no pertany a la zona administrada pel servidor, però es troba en la memòria cau, s’emet una resposta no autoritària.</div>
</li>
<li class="level1"><div class="li"> Si no es disposa de la resposta i cal trobar-la (perquè és una consulta recursiva), es procedeix a preguntar iterativament a altres servidors.</div>
</li>
<li class="level1"><div class="li"> Els servidors als quals es consulta o bé no tenen resposta, o bé la tenen a la seva zona, o bé la tenen en la memòria cau, o bé retornen una llista de servidors autoritaris per a un domini més proper al buscat.</div>
</li>
<li class="level1"><div class="li"> D’aquesta manera, mitjançant la llista de servidors autoritaris cada cop més propers al domini buscat s’acaba arribant al destí. Sempre es pot trobar un domini (si existeix) a partir del domini arrel.</div>
</li>
<li class="level1"><div class="li"> Si no es disposa de la resposta i s’han esgotat totes les altres opcions s’indica que no existeix.</div>
</li>
</ul>

<p>
La <strong>resolució inversa</strong> permet obtenir el nom d’un <em>host</em> a partir d’una adreça IP.
</p>

<p>
El protocol <acronym title="Domain Name System">DNS</acronym> utilitza usualment UDP, perquè la informació que es transmet es pot encapsular normalment en un datagrama de 512 <em>bytes</em>. Però també pot usar TCP quan la quantitat d’informació a transmetre és més gran (respostes llargues o transferències de zona). Per tant, el servei <acronym title="Domain Name System">DNS</acronym> utilitza <strong>UDP i TCP</strong> a través del <strong>port 53</strong>.
</p>

<p>
Existeixen evolucions i extensions del protocol <acronym title="Domain Name System">DNS</acronym> per a diverses finalitats. <strong>DDNS</strong> permet actualitzacions dinàmiques de la base de dades <acronym title="Domain Name System">DNS</acronym> des dels clients DHCP. <strong>DNSSEC</strong> estableix mecanismes de seguretat en el servei <acronym title="Domain Name System">DNS</acronym>.
</p>

<p>
<strong>c) Tipus de registres</strong>: les bases de dades de zona contenen els registres de recurs, és a dir, la descripció de cada un dels elements que pertanyen a la zona.
</p>

<p>
Els principals registres de recurs es mostren tot seguit:
</p>
<ul>
<li class="level1"><div class="li"> SOA: és l’inici d’autoritat. Indica que s’està fent una descripció autoritària de la zona. </div>
</li>
<li class="level1"><div class="li"> NS: descriu un recurs corresponent a un servidor de noms. </div>
</li>
<li class="level1"><div class="li"> A: és el recurs de <em>host</em>. Determina el nom canònic d’un <em>host</em>. </div>
</li>
<li class="level1"><div class="li"> CNAME: permet definir àlies per a un <em>host</em>.  </div>
</li>
<li class="level1"><div class="li"> PTR: descriu la resolució inversa per obtenir el nom canònic d’un <em>host</em> partint de la seva adreça IP. </div>
</li>
<li class="level1"><div class="li"> MX: defineix un servidor de correu a la zona. </div>
</li>
</ul>

<p>
<strong>d) Instal·lació d’un servei <acronym title="Domain Name System">DNS</acronym></strong>: el procediment que cal seguir per instal·lar un servidor <acronym title="Domain Name System">DNS</acronym> és similar al de qualsevol altre servei de xarxa. 
</p>

<p>
Generalment se segueix la seqüència següent:
</p>
<ul>
<li class="level1"><div class="li"> Avaluar diversos programes que realitzin la funció de servidor.</div>
</li>
<li class="level1"><div class="li"> Obtenir el programa escollit.</div>
</li>
<li class="level1"><div class="li"> Instal·lar el programari, usualment amb alguna eina de gestió de paquets.</div>
</li>
<li class="level1"><div class="li"> Observar els components, els fitxers del programari instal·lat. Especialment observar els fitxers de: <strong>configuració</strong>, <strong>executables</strong> i <strong>ajuda</strong>.</div>
</li>
<li class="level1"><div class="li"> Activar i desactivar el servei de manera puntual i de manera permanent.</div>
</li>
</ul>

<p>
<strong>e) Configuració del servei bàsic</strong>: normalment, la finalitat principal d’un servidor <acronym title="Domain Name System">DNS</acronym> és administrar una zona. Tot i així, pot realitzar altres funcions, més bàsiques:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Servidor només cau</strong>: es tracta del servei més mínim que es pot instal·lar. No s’administra cap zona, simplement fa la funció de memòria cau per emmagatzemar les respostes que rep d’altres servidors. Les consultes que no te la memòria cau les passa a un servidor extern, mentre que les que te emmagatzemades a la memòria les respon ell mateix de manera no autoritària.</div>
</li>
<li class="level1"><div class="li"> <strong>Transferència de zona</strong>: encara sense entrar en la configuració dels registres de recurs, es pot configurar un servidor <acronym title="Domain Name System">DNS</acronym> com a secundari per a actuar com a servidor autoritari d’una zona, tot rebent la informació per mitjà de transferències del servidor primari.</div>
</li>
</ul>

<p>
<strong>f) Creació d’una zona</strong>: per crear una zona per ser administrada des del propi servidor és necessari configurar el fitxer general de descripció del servei i els fitxers amb els registres de recurs que formen la base de dades de zona.
</p>

<p>
El <strong>fitxer global</strong> de configuració, usualment /etc/named.conf, conté una descripció de les zones que s’han d’administrar en la qual s’indica el tipus d’administració i el nom del fitxer amb la informació concreta dels equips de la zona.
</p>

<p>
Una zona pot ser de tipus:
</p>
<ul>
<li class="level1"><div class="li"> <em>Master</em>: indica que el mateix servidor és autoritari per la zona i disposa dels fitxers de base de dades de la zona. Cal indicar el nom del fitxer que conté aquesta informació. </div>
</li>
<li class="level1"><div class="li"> <em>Slave</em>: indica que es tracta d’una zona on el mateix servidor actua com a secundari. Cal indicar les adreces IP d’on obtenir la informació de la base de dades de la zona. És a dir, quins són els servidors masters. </div>
</li>
<li class="level1"><div class="li"> <em>Hint</em>: indica que conté informació corresponent als nodes arrel del sistema de noms de domini. </div>
</li>
</ul>

<p>
Cal un <strong>fitxer de zona</strong> per a cada zona a administrar. En aquest fitxer es descriu si és un SOA (autoritat) o no per a la zona i quins són els registres de recurs que conté.
</p>

<p>
El <strong><em>resolver</em></strong> és la part client del servei <acronym title="Domain Name System">DNS</acronym>. No és una aplicació concreta sinó que es troba integrat en diverses aplicacions client que fan ús de la xarxa. A GNU/Linux correspon al fitxer /etc/resolv.conf. 
</p>

<p>
Les directives principals són:
</p>
<ul>
<li class="level1"><div class="li"> <em>domain</em>: especifica el nom de domini al qual es pertany. </div>
</li>
<li class="level1"><div class="li"> <em>search</em>: indica una llista de preferències a l’hora de cercar un domini. El primer usualment és considerat el mateix domini. </div>
</li>
<li class="level1"><div class="li"> <em>nameserver</em>: és l’adreça IP (o nom) del servidor <acronym title="Domain Name System">DNS</acronym> a utilitzar. Usualment se’n poden descriure fins a tres a mode de <em>fallback</em>. </div>
</li>
</ul>

<p>
El <strong>nsswitch</strong>, corresponent usualment a GNU/Linux al fitxer /etc/nsswitch.conf, permet seleccionar si la resolució de noms es vol fer localment pel sistema de noms pla (fitxer <em>hosts</em>) o pel servei <acronym title="Domain Name System">DNS</acronym>.
</p>

<p>
El fitxer <strong>hosts</strong>, corresponent a GNU/Linux a /etc/hosts, conté les definicions de noms i àlies en format pla i es pot usar per a xarxes locals (a nivell petit i domèstic). 
</p>

<p>
<strong>g) Realització de transferències entre dos o més servidors</strong>: l’estàndard <acronym title="Domain Name System">DNS</acronym> defineix que per a cada zona cal un servidor primari i almenys un o més de secundaris. Fan la funció d’autoritat sobre la zona i cal que es transfereixin entre ells la informació de la base de dades.
</p>
<ul>
<li class="level1"><div class="li"> <strong>Primari/secundari(s)</strong>: una zona és gestionada per un servidor primari i un o més servidors secundaris o de seguretat. El servidor primari manté la base de dades de la zona i l’actualitza, mentre que els secundaris reben aquesta informació en un procés de transferència.</div>
</li>
<li class="level1"><div class="li"> <strong>Autoritari/no autoritari</strong>: els servidors d’una zona (el primari i els secundaris) són autoritat per a la zona que administren. Les respostes que emeten basant-se en la informació de la memòria cau (i no de la base de dades de zona) són no autoritàries.</div>
</li>
<li class="level1"><div class="li"> <strong>Transferència de zona</strong>: la informació de la base de dades de zona ha de ser coherent entre els servidors primari i secundaris. La transferència de zona és el mecanisme que s’estableix per fer que comparteixin la mateixa informació.</div>
</li>
</ul>

<p>
Establir com i quan s’ha de fer aquesta transferència és important per proporcionar un bon servei <acronym title="Domain Name System">DNS</acronym>. Cal buscar un compromís entre actualitzar constantment la informació o disposar d’informació caducada.
</p>

<p>
<strong>h) Comprovació del funcionament del servei</strong>: un cop un servei està engegat, el mecanisme més sensat per comprovar-ne el funcionament és validar que se n’obtenen els resultats desitjats. En el cas del <acronym title="Domain Name System">DNS</acronym> és observar que els clients reben la resposta correcte a la consulta que han efectuat.
</p>

<p>
A més es poden repassar els aspectes següents:
</p>
<ul>
<li class="level1"><div class="li"> Verificar l’estat del servei: <em>start</em> o engegat.</div>
</li>
<li class="level1"><div class="li"> Comprovar el PID del procés del servidor. Ha d’estar <em>running</em>.</div>
</li>
<li class="level1"><div class="li"> Observar el registre de <em>logs</em> o monitoratge.</div>
</li>
<li class="level1"><div class="li"> Observar l’estat dels ports.</div>
</li>
<li class="level1"><div class="li"> En tota comunicació de xarxa sempre es pot fer un repàs al que realment està passant fent el monitoratge del trànsit de xarxa, per exemple amb una eina com Wireshark.</div>
</li>
</ul>

<p>
Existeixen moltes eines de revisió del servei <acronym title="Domain Name System">DNS</acronym>. Són eines que funcionen com un client <em>resolver</em>, fent consultes al servidor i mostrant-ne la resposta obtinguda. A més, també es poden usar les clàssiques utilitats de xarxa per detectar connectivitat, examinar ports i monitorar el trànsit de xarxa.
</p>

<p>
Algunes d’aquestes eines són:
</p>
<ul>
<li class="level1"><div class="li"> <em>ping</em>: Ordre clàssica per provar la connectivitat. Si coneix el nom de domini és que el <acronym title="Domain Name System">DNS</acronym> funciona bé. </div>
</li>
<li class="level1"><div class="li"> <em>nslookup</em>: Eina molt completa per fer consultes <acronym title="Domain Name System">DNS</acronym>. Permet indicar el tipus d’element que se cerca (A, CNAME, MX…) i a quin servidor s’envia la consulta. </div>
</li>
<li class="level1"><div class="li"> <em>dig</em>: Una altra eina, més nova, amb una funcionalitat pràcticament calcada que la de <em>nslookup</em>. </div>
</li>
<li class="level1"><div class="li"> <em>host</em>: Utilitat clàssica de consulta <acronym title="Domain Name System">DNS</acronym>, com les dues anteriors. </div>
</li>
<li class="level1"><div class="li"> <em>nmap</em>: Eina per examinar l’estat dels ports d’un <em>host</em>. </div>
</li>
<li class="level1"><div class="li"> Wireskark: L’eina més estandarditzada per monitorar el trànsit de xarxa en mode gràfic. </div>
</li>
</ul>

<p>
Pel que fa a la instal·lació de serveis de configuració dinàmica de sistemes, tot seguit n’enumerem les principals característiques:
</p>

<p>
<strong>a) Configuració de xarxa</strong>: per realitzar configuracions dinàmiques de xarxes per DHCP primerament cal familiaritzar-se amb els elements més usuals de configuració: <strong>adreça IP</strong>, <strong>màscara de xarxa</strong> i <strong>passarel·la per defecte</strong>.
</p>

<p>
<strong>b) Tipus d’assignacions</strong>: els equips clients poden disposar de configuracions de xarxa <strong>estàtiques</strong> i configuracions rebudes del servidor DHCP. Aquestes poden ser <strong>dinàmiques de rang</strong> o <strong>dinàmiques fixes</strong> (un mateix equip rep la mateixa adreça IP).
</p>

<p>
<strong>c) El model funcional</strong>: el protocol DHCP, descrit en els <acronym title="Request for Comments">RFC</acronym> 2131 i 2132 realitza un intercanvi de missatges entre el client i el servidor. Aquest diàleg es basa en el cas general en l’intercanvi dels paquets següents:
</p>
<ul>
<li class="level1"><div class="li"> DHCPDiscover: l’origina el client. Tipus de difusió: <em>broadcast</em>.</div>
</li>
<li class="level1"><div class="li"> DHCPOffer: l’origina el servidor. Tipus de difusió: <em>unicast</em>. </div>
</li>
<li class="level1"><div class="li"> DHCPRequest: l’origina el client. Tipus de difusió: <em>broadcast</em>.</div>
</li>
<li class="level1"><div class="li"> DHCPAck: l’origina el servidor. Tipus de difusió: <em>unicast</em>.</div>
</li>
</ul>

<p>
El conjunt de paquets descrits en el protocol DHCP són:
</p>
<ul>
<li class="level1"><div class="li"> DHCP Discover</div>
</li>
<li class="level1"><div class="li"> DHCP Offer</div>
</li>
<li class="level1"><div class="li"> DHCP Request</div>
</li>
<li class="level1"><div class="li"> DHCP ACK</div>
</li>
<li class="level1"><div class="li"> DHCP NACK</div>
</li>
<li class="level1"><div class="li"> DHCP Decline</div>
</li>
<li class="level1"><div class="li"> DHCP Release</div>
</li>
<li class="level1"><div class="li"> DHCP Information</div>
</li>
</ul>

<p>
<strong>d) Concessió de configuracions</strong>: el servidor DHCP atén les peticions client i atorga o concedix configuracions de xarxa per un període de temps limitat. El client ha de renovar les concessions quan caduquen. Ambdós poden revocar una concessió activa. El client usualment pot demanar unes opcions determinades, una adreça IP preferida, un temps de concessió… El servidor pot atendre aquests requeriments o no.
</p>

<p>
Una <strong>concessió</strong> o <em>lease</em> és cada una de les configuracions de xarxa que el servidor atorga a un client. Les concessions s’anoten en un fitxer de <em>leases</em>.
</p>

<p>
Tota concessió és per un <strong>període</strong> finit de temps. 
</p>

<p>
El servidor disposa d’un conjunt o <strong>rang d’adreces</strong> dinàmiques d’on en va extraient per assignar-les als clients.
</p>

<p>
Es poden fer assignacions d’adreces <strong>dinàmiques fixes</strong>, és a dir, concedir-li sempre la mateixa adreça a un mateix client. Per això cal poder-lo identificar, usualment amb la seva adreça MAC.
</p>

<p>
<strong>e) Servei Client/Servidor</strong>: el DHCP és un dels innombrables protocols de xarxa basats en l’estructura client/servidor. 
</p>

<p>
Normalment, el <strong>client DHCP</strong> està integrat en el client de xarxa.
</p>

<p>
Usualment, el <strong>servidor DHCP</strong> és un programari de tipus dimoni que cal instal·lar i configurar adequadament.
</p>

<p>
<strong>f) Instal·lació del servidor</strong>: el procediment que cal seguir per instal·lar un servidor DHCP és similar al de qualsevol altre servei de xarxa.
</p>

<p>
Generalment es realiza la seqüència següent:
</p>
<ul>
<li class="level1"><div class="li"> Avaluar diversos programes que realitzin la funció de servidor.</div>
</li>
<li class="level1"><div class="li"> Obtenir el programa escollit.</div>
</li>
<li class="level1"><div class="li"> Instal·lar el programari, usualment amb alguna eina de gestió de paquets.</div>
</li>
<li class="level1"><div class="li"> Observar els components, els fitxers del programari instal·lat. Especialment observar els fitxers de: <strong>configuració</strong>, <strong>executables</strong> i <strong>ajuda</strong>.</div>
</li>
<li class="level1"><div class="li"> Activar i desactivar el servei de manera puntual i de manera permanent.</div>
</li>
</ul>

<p>
<strong>g) Comprovar el funcionament bàsic</strong>: un cop un servei està engegat, el mecanisme més sensat per comprovar-ne el funcionament és validar que se n’obtenen els resultats desitjats. En el cas del DHCP es tracta d’observar que els clients reben la configuració de xarxa que esperaven.
</p>

<p>
A més, es pot fer un repàs als aspectes següents:
</p>
<ul>
<li class="level1"><div class="li"> Verificar l’estat del servei: <em>start</em> o engegat.</div>
</li>
<li class="level1"><div class="li"> Comprovar el PID del procés del servidor. Ha d’estar <em>running</em>.</div>
</li>
<li class="level1"><div class="li"> Observar el registre de <em>logs</em> o monitorització.</div>
</li>
<li class="level1"><div class="li"> Observar l’estat dels ports.</div>
</li>
<li class="level1"><div class="li"> En tota comunicació de xarxa sempre es pot fer un repàs al que realment està passant fent el monitoratge del trànsit de xarxa, per exemple amb una eina tipus Wireshark.</div>
</li>
</ul>

<p>
<strong>Configuració DHCP</strong>: cada servidor DHCP es configura per donar servei adequadament als clients de xarxa als que atén. Cada subxarxa i fins i tot <em>hosts</em> individuals poden rebre configuracions de xarxa personalitzades. Les opcions tenen bàsicament els àmbits d’aplicació següents:
</p>
<ul>
<li class="level1"><div class="li"> <em>global</em>: les opcions que es defineixen afecten totes les subxarxes i <em>hosts</em>.  </div>
</li>
<li class="level1"><div class="li"> <em>subxarxa</em>: especifica opcions vàlides només per a la subxarxa en qüestió. </div>
</li>
<li class="level1"><div class="li"> <em>host</em>: indica opcions pròpies d’un únic <em>host</em>. </div>
</li>
</ul>

<p>
Les opcions tenen <strong>precedència</strong> des dels àmbits més interns als més externs.
</p>

<p>
L’estàndard DHCP defineix multitud de sentències que permeten configurar el funcionament del client i del servidor. També hi ha innombrables opcions de configuració de xarxa, que a més poden ser definides de forma condicional segons valors de determinades expressions.
</p>

<p>
Els principals elements de configuració DHCP són:
</p>
<ul>
<li class="level1"><div class="li"> <em>subnet</em>. Indica la subxarxa a la qual aplicar la configuració. </div>
</li>
<li class="level1"><div class="li"> <em>host</em>. Indica el <em>host</em> al qual aplicar la configuració. </div>
</li>
<li class="level1"><div class="li"> <em>range</em>. Defineix un rang contigu d’adreces IP disponibles pel servidor per assignar dinàmicament. </div>
</li>
<li class="level1"><div class="li"> <em>host-name</em>. Especifica el nom del client. </div>
</li>
<li class="level1"><div class="li"> <em>hardware</em>. Permet especificar un <em>host</em>, usualment amb la seva adreça MAC. </div>
</li>
<li class="level1"><div class="li"> <em>routers</em>. Defineix la llista d’encaminadors de la subxarxa client. </div>
</li>
<li class="level1"><div class="li"> <em>subnet-mask</em>. Indica la màscara de xarxa de la subxarxa client. </div>
</li>
<li class="level1"><div class="li"> <em>domain-name</em>. Indica el nom del domini al qual pertany el client. </div>
</li>
<li class="level1"><div class="li"> <em>domain-name-servers</em>. Llista de servidors <acronym title="Domain Name System">DNS</acronym> disponibles pel client. </div>
</li>
<li class="level1"><div class="li"> <em>default-lease-time</em>. Temps de concessió per defecte. </div>
</li>
<li class="level1"><div class="li"> <em>Max-lease-time</em>. Temps màxim de les concessions. </div>
</li>
</ul>

<p>
<strong>Client DHCP</strong>: el programari client DHCP està usualment incorporat en el servei de xarxa, és a dir, no cal instal·lar res. Per comprovar el funcionament correcte del client i aprendre més coses del seu funcionament es pot:
</p>
<ul>
<li class="level1"><div class="li"> Observar la configuració de xarxa actual.</div>
</li>
<li class="level1"><div class="li"> Configurar el client com a client dinàmic. Normalment s’utilitzen eines de l’<strong>entorn gràfic</strong>, però n’hi ha també en mode <strong>text</strong>, i en GNU/Linux és usual fer-ho també editant directament els <strong>fitxers de configuració</strong>.</div>
</li>
<li class="level1"><div class="li"> Sol·licitar o renegociar una adreça IP al servidor DHCP.</div>
</li>
<li class="level1"><div class="li"> Llistar el fitxer amb el registre de les concessions rebudes pel client.</div>
</li>
<li class="level1"><div class="li"> Activar i desactivar el servei de xarxa client.</div>
</li>
</ul>

<p>
<strong>Comprovació del funcionament</strong>: en general sabem que el servei funciona correctament si tot va bé. De totes maneres, quan hi ha problemes a la xarxa la millor eina és utilitzar un detector (<em>sniffer</em>) de xarxa, com per exemple Wireshark.
</p>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../WebContent/u1/introduccio.html">Introducció</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../WebContent/u1/resultats.html">Resultats d'aprenentatge</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
