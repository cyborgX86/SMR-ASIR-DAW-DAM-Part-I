<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html">
        
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Serveis de Xarxa i Internet</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Serveis de Xarxa i Internet">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html">Serveis de Xarxa i Internet</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u4" class="parentnode"><p><a class="unit" href="../../../WebContent/u4/introduccio.html">4. Serveis d'àudio i vídeo</a></p><ul class="expander"><li id="u4introduccio"><a href="../../../WebContent/u4/introduccio.html">Introducció</a></li><li id="u4resum"><a href="../../../WebContent/u4/resum.html">Resum</a></li><li id="u4resultats"><a href="../../../WebContent/u4/resultats.html">Resultats d'aprenentatge</a></li><li id="u4referencies"><a href="../../../WebContent/u4/referencies.html">Referències</a></li><li id="u4a1" class="tocsection"><p id='u4a1continguts'><a class="section" href="../../../WebContent/u4/a1/continguts.html">Instal·lació i administració del servei d’àudio</a><span class="buttonexp"></span></p><ul><li id="u4a1activitats"><a href="../../../WebContent/u4/a1/activitats.html">Activitats</a></li><li id="u4a1exercicis"><a href="../../../WebContent/u4/a1/exercicis.html">Exercicis</a></li></ul></li><div data-parent-id='u4a1' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u4/a1/continguts.html#servidors_de_reproduccio_en_temps_real">Servidors de reproducció en temps real</a></li><li><a href="../../../WebContent/u4/a1/continguts.html#audio_digital">Àudio digital</a></li><li><a href="../../../WebContent/u4/a1/continguts.html#subscripcio_d_audio">Subscripció d’àudio</a></li><li><a href="../../../WebContent/u4/a1/continguts.html#reproduccio_en_temps_real">Reproducció en temps real</a></li><li><a href="../../../WebContent/u4/a1/continguts.html#programari_de_servidors_de_difusio_en_temps_real_d_audio">Programari de servidors de difusió en temps real d’àudio</a></li></ul></div></div><li id="u4a2" class="tocsection"><p id='u4a2continguts'><a class="section" href="../../../WebContent/u4/a2/continguts.html">Instal·lació i administració del servei de vídeo</a><span class="buttonexp"></span></p><ul><li id="u4a2activitats"><a href="../../../WebContent/u4/a2/activitats.html">Activitats</a></li><li id="u4a2exercicis"><a href="../../../WebContent/u4/a2/exercicis.html">Exercicis</a></li></ul></li><div data-parent-id='u4a2' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u4/a2/continguts.html#video_digital">Vídeo digital</a></li><li><a href="../../../WebContent/u4/a2/continguts.html#servidors_de_video">Servidors de vídeo</a></li><li><a href="../../../WebContent/u4/a2/continguts.html#videoconferencies">Videoconferències</a></li></ul></div></div></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../introduccio.html">Serveis d'àudio i vídeo</a></li><li><a href="continguts.html">Instal·lació i administració del servei de vídeo</a></li><li>Activitats</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="activitats"> Activitats </a></h1>
    	
<h2><a id="servei_de_video_en_streaming_amb_el_programari_vlc" >Servei de vídeo en &#039;streaming&#039; amb el programari VLC</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és la instal·lació, configuració i emissió d’un vídeo en <em>streaming</em> i posterior visualització.
</p>

<p>
VLC és un reproductor multimèdia que forma part d’un projecte anomenat VideoLAN. Aquest reproductor és multiplataforma, gratuït i programari lliure. 
</p>

<p>
Segons la web oficial, les principals característiques són:
</p>
<ul>
<li class="level1"><div class="li"> Ho reprodueix tot: fitxers, discos, càmeres web, dispositius i fluxos.</div>
</li>
<li class="level1"><div class="li"> Reprodueix la majoria de codificadors sense necessitat d’instal·lar paquets: MPEG-2, MPEG-4, H.264, MKV, WebM, WMV, MP3…</div>
</li>
<li class="level1"><div class="li"> S’executa en totes les plataformes: Windows, Linux, Mac <acronym title="Operating System">OS</acronym> X, Unix, iOS, Android…</div>
</li>
<li class="level1"><div class="li"> És totalment lliure, sense <em>spyware</em>, sense anuncis i sense fer seguiment de l’usuari.</div>
</li>
</ul>

<p>
A més, el programari és capaç d’emetre en <em>streaming</em>.
</p>

<p>
Realitzeu les següents tasques:
</p>
<ol>
<li class="level1"><div class="li"> Instal·lació del servei de vídeo amb VLC</div>
</li>
<li class="level1"><div class="li"> Configuració del servei de vídeo</div>
</li>
<li class="level1"><div class="li"> Visualització del vídeo des del client amb VLC</div>
</li>
</ol>

<p>
<form action=""><div class="solution ioccontent">
<p>
<strong>1.</strong> Instal·lació del servei de vídeo amb VLC
</p>

<p>
Instal·leu-vos VLC:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># apt-get install vlc</div></li><li class="li1"><div class="de1">S'està llegint la llista de paquets… Fet </div></li><li class="li1"><div class="de1">S'està construint l'arbre de dependències       </div></li><li class="li1"><div class="de1">S'està llegint la informació de l'estat… Fet</div></li><li class="li1"><div class="de1">S'instal·laran els següents paquets extres:</div></li><li class="li1"><div class="de1">  libbasicusageenvironment1 libcddb2 libdca0 libdvbpsi10 libebml4v5 libgles2-mesa libgroupsock8 libkate1 liblirc-client0</div></li><li class="li1"><div class="de1">  liblivemedia57 libmatroska6v5 libmicrodns0 libmpcdec6 libmpeg2-4 libopenmpt-modplug1 libprotobuf-lite10 libproxy-tools</div></li><li class="li1"><div class="de1">  libresid-builder0c2a libsidplay2 libupnp6 libusageenvironment3 libvlc-bin libvlc5 libvlccore9 libxcb-xv0 vlc-bin vlc-data</div></li><li class="li1"><div class="de1">  vlc-l10n vlc-plugin-base vlc-plugin-notify vlc-plugin-qt vlc-plugin-samba vlc-plugin-skins2 vlc-plugin-video-output</div></li><li class="li1"><div class="de1">  vlc-plugin-video-splitter vlc-plugin-visualization</div></li><li class="li1"><div class="de1">Paquets suggerits:</div></li><li class="li1"><div class="de1">  lirc libdvdcss2</div></li><li class="li1"><div class="de1">S'instal·laran els paquets NOUS següents:</div></li><li class="li1"><div class="de1">  libbasicusageenvironment1 libcddb2 libdca0 libdvbpsi10 libebml4v5 libgles2-mesa libgroupsock8 libkate1 liblirc-client0</div></li><li class="li1"><div class="de1">  liblivemedia57 libmatroska6v5 libmicrodns0 libmpcdec6 libmpeg2-4 libopenmpt-modplug1 libprotobuf-lite10 libproxy-tools</div></li><li class="li1"><div class="de1">  libresid-builder0c2a libsidplay2 libupnp6 libusageenvironment3 libvlc-bin libvlc5 libvlccore9 libxcb-xv0 vlc vlc-bin</div></li><li class="li1"><div class="de1">  vlc-data vlc-l10n vlc-plugin-base vlc-plugin-notify vlc-plugin-qt vlc-plugin-samba vlc-plugin-skins2</div></li><li class="li1"><div class="de1">  vlc-plugin-video-output vlc-plugin-video-splitter vlc-plugin-visualization</div></li><li class="li1"><div class="de1">0 actualitzats, 37 nous a instal·lar, 0 a suprimir i 130 no actualitzats.</div></li><li class="li1"><div class="de1">S'han d'obtenir 14,7 MB d'arxius.</div></li><li class="li1"><div class="de1">Després d'aquesta operació s'empraran 66,7 MB d'espai en disc addicional.</div></li><li class="li1"><div class="de1">Voleu continuar? [S/n] </div></li></ol></pre>

<p>
<strong>2.</strong> Configuració del servei de vídeo
</p>

<p>
Per tal de configurar el servei de vídeo amb VLC i deixar-lo emetent, un cop obert cal anar a <em>Fitxer multimèdia / Flux</em>, triar el fitxer i clicar a <em>Transmet</em>.
</p>

<p>
<div class="imgelem">
<img src="../media/vlc1asx.png" alt="" /></div>

</p>

<p>
Afegiu com a nova destinació HTTP:
</p>

<p>
<div class="imgelem">
<img src="../media/vlc2asx.png" alt="" /></div>

</p>

<p>
I especifiqueu el port. En aquest cas deixem el que ve per defecte, el 8080:
</p>

<p>
<div class="imgelem">
<img src="../media/vlc3.png" alt="" /></div>

</p>

<p>
Finalment, cliqueu <em>Flux</em>:
</p>

<p>
<div class="imgelem">
<img src="../media/vlc4.png" alt="" /></div>

</p>

<p>
Es queda emetent, tot i que la presentació és una pantalla negra:
</p>

<p>
<div class="imgelem">
<img src="../media/vlc5.png" alt="" /></div>

</p>

<p>
<strong>3.</strong> Visualització del vídeo des del client amb VLC
</p>

<p>
Per poder visualitzar-ho en el client, aquest també ha de tenir instal·lat el programari VLC.
</p>

<p>
A través de l’opció <em>Fitxer multimèdia / Obre un flux de la xarxa</em>, introduïu les dades necessàries (<acronym title="Uniform Resource Locator">URL</acronym>) per poder visualitzar el vídeo en <em>streaming</em>:
</p>

<p>
<div class="imgelem">
<img src="../media/vlc6.png" alt="" /></div>

</p>

<p>
A continuació es reprodueix el vídeo:
</p>

<p>
<div class="imgelem">
<img src="../media/vlc7.png" alt="" /></div>

</p>

<p>
<strong>Referències</strong>
</p>

<p>
<a href="https://www.videolan.org/vlc/index.ca.html" class="urlextern" title="https://www.videolan.org/vlc/index.ca.html"  rel="nofollow">VideoLAN</a>
</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="servei_de_video_en_streaming_amb_el_programari_vlcemissio_en_batch" >Servei de vídeo en &#039;streaming&#039; amb el programari VLC: emissió en &#039;batch&#039;</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és conèixer els principals aspectes tècnics que cal tenir en compte a l’hora de configurar el programari VLC per obtenir-ne el rendiment més òptim.
</p>

<p>
El VLC és un reproductor multimèdia del projecte VideoLan distribuït amb llicència <acronym title="GNU General Public License">GPL</acronym>. Admet diferents còdecs d’àudio i vídeo i diferents formats d’arxiu, a més dels formats DVD, VCD i protocols d’<em>streaming</em>. És considerat un dels millors programes lliures per a la reproducció d’àudio i vídeo. És un projecte que permet visualitzar clips tant en <em>streaming</em> com a la carta.
</p>
<ul>
<li class="level1"><div class="li"> Configureu VLC per fer una emissió en temps real.</div>
</li>
</ul>

<p>
<form action=""><div class="solution ioccontent">
<p>
Un cop instal·lat el programari en la màquina emissora i en les receptores heu d’ajustar els paràmetres d’emissió en la màquina servidor. Primer heu de fer una emissió d’unidestinació (l’unidestinació o <em>unicast</em> és l’enviament d’informació a un únic receptor).
</p>

<p>
Creeu en el servidor un document anomenat prova.cfg:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># nano prova.cfg</div></li></ol></pre>

<p>
L’arxiu ha de contenir les línies d’ordres següents:
</p>
<pre class="code"># VLC media player VLM command batch
# http://www.videolan.org/vlc/
  
### Prova d&#039;unicast
new prova1 broadcast enabled loop
setup prova1 input &quot;/home/oriol/videos/TEDxESADExCT.mp4&quot;
setup prova1 output #duplicate{dst=std{access=udp,mux=ts,dst=MAQUINA_DESTI:4321}}
control prova1 play</pre>

<p>
<div class="imgelem">
<img src="../media/w_uf4m8_31.png" alt="" /></div>

</p>

<p>
Inseriu a l’arxiu comentaris informatius precedits pel signe “#” i l’adreça IP de la màquina client a la qual voleu servir el clip de vídeo. Amb <em>new</em> creeu a la primera línia un nou component anomenat <em>prova1</em>, per activar-lo amb <em>enabled</em> i fer que s’executi en bucle (<em>loop</em>).
</p>

<p>
A la segona línia indiqueu on es troba el clip de vídeo i el seu nom mitjançant l’ordre <em>input</em>. A continuació, indiqueu que el protocol que s’utilitzarà és UDP, que el format serà MPEG-TS (<em>ts</em>) i el destinatari, MAQUINA_DESTI, pel port 4321.
</p>

<p>
Per acabar, activeu la reproduccioó en temps real en el servidor amb l’ordre <em>play</em>:
</p>

<p>
Executeu des del terminal d’usuari (no <em>root</em>) i en mode dimoni la línia d’ordres següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ vlc -vvv --color --daemon -I telnet --vlm-conf prova.cfg --ttl 2 --rtsp-host 0.0.0.0:5554</div></li></ol></pre>

<p>
Des del client, adreceu-vos al terminal d’usuari (no <em>root</em>) i executeu la línia d’ordres següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ vlc udp://@:4321</div></li></ol></pre>

<p>
També podeu adreçar-vos al programari VLC i executar <em>Suport / Obre un flux de la xarxa</em> en la pestanya <em>UDP / RTP</em> i escollir el port. Podeu fer un enviament d’informació a diferents receptors (<em>broadcast</em>) mitjançant la creació de l’arxiu de configuració prova.cfg corresponent.
</p>
<pre class="code">### Prova de broadcast
new prova2 broadcast enabled loop
setup prova2 input &quot;/home/oriol/Vídeos/TEDxESADExCT.mp4&quot;
setup prova2 output #standard{mux=ts,access=udp,dst=225.0.0.1,sap,name=&quot;Carles Torrecilla&quot;}
control prova2 play</pre>

<p>
<div class="imgelem">
<img src="../media/w_uf4m8_32.png" alt="" /></div>

</p>

<p>
Si bé aquest exemple és similar al de l’emissió d’unidestinació, en aquest cas s’indica una adreça de multidifusió (225.0.0.1) i, a més, s’inclou un anunci SAP (<em>Service Advertising Protocol</em>, el protocol d’anuncis de serveis) del clip de vídeo amb el nom “Carles Torrecilla”.
</p>

<p>
A continuació heu d’executar, des del terminal d’usuari (no <em>root</em>) i en mode dimoni, la línia d’ordres següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ vlc -vvv --color --daemon -I telnet --vlm-conf prova.cfg --ttl 2 --rtsp-host 0.0.0.0:5554</div></li></ol></pre>

<p>
En aquest cas, des de la màquina client s’ha d’executar la línia d’ordres següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ vlc udp://@:225.0.0.1</div></li></ol></pre>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="emissio_en_temps_real_amb_el_protocol_rtmp" >Emissió en temps real amb el protocol RTMP</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és conèixer el protocol RTMP (<em>Real-Time Messaging Protocol</em>) i realitzar una emissió en temps real amb el servidor Nginx com a servidor web.
</p>

<p>
Realitzeu les següent tasques:
</p>
<ol>
<li class="level1"><div class="li"> Instal·lació i configuració del servidor web Nginx</div>
</li>
<li class="level1"><div class="li"> Configuració de l’<em>streaming</em> en directe</div>
</li>
<li class="level1"><div class="li"> Preparació del vídeo</div>
</li>
<li class="level1"><div class="li"> Visualització del vídeo des d’un client amb VLC</div>
</li>
</ol>

<p>
<form action=""><div class="solution ioccontent">
<p>
<strong>1.</strong> Instal·lació i configuració del servidor web Nginx
</p>

<p>
Instal·leu el servidor web Lighttpd des del terminal:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># apt-get install nginx</div></li><li class="li1"><div class="de1">S'està llegint la llista de paquets… Fet </div></li><li class="li1"><div class="de1">S'està construint l'arbre de dependències       </div></li><li class="li1"><div class="de1">S'està llegint la informació de l'estat… Fet</div></li><li class="li1"><div class="de1">S'instal·laran els següents paquets extres:</div></li><li class="li1"><div class="de1">  libnginx-mod-http-auth-pam libnginx-mod-http-dav-ext libnginx-mod-http-echo libnginx-mod-http-geoip</div></li><li class="li1"><div class="de1">  libnginx-mod-http-image-filter libnginx-mod-http-subs-filter libnginx-mod-http-upstream-fair libnginx-mod-http-xslt-filter</div></li><li class="li1"><div class="de1">  libnginx-mod-mail libnginx-mod-stream nginx-common nginx-full</div></li><li class="li1"><div class="de1">Paquets suggerits:</div></li><li class="li1"><div class="de1">  fcgiwrap nginx-doc ssl-cert</div></li><li class="li1"><div class="de1">S'instal·laran els paquets NOUS següents:</div></li><li class="li1"><div class="de1">  libnginx-mod-http-auth-pam libnginx-mod-http-dav-ext libnginx-mod-http-echo libnginx-mod-http-geoip</div></li><li class="li1"><div class="de1">  libnginx-mod-http-image-filter libnginx-mod-http-subs-filter libnginx-mod-http-upstream-fair libnginx-mod-http-xslt-filter</div></li><li class="li1"><div class="de1">  libnginx-mod-mail libnginx-mod-stream nginx nginx-common nginx-full</div></li><li class="li1"><div class="de1">0 actualitzats, 13 nous a instal·lar, 0 a suprimir i 0 no actualitzats.</div></li><li class="li1"><div class="de1">S'ha d'obtenir 1632 kB d'arxius.</div></li><li class="li1"><div class="de1">Després d'aquesta operació s'empraran 2871 kB d'espai en disc addicional.</div></li><li class="li1"><div class="de1">Voleu continuar? [S/n] </div></li></ol></pre>

<p>
Un cop instal·lat, podeu veure la pàgina web per defecte:
</p>

<p>
<div class="imgelem">
<img src="../media/nginx.png" alt="" /></div>

</p>

<p>
Si ho comproveu amb Nmap, veureu que s’ha obert el port 80, corresponent al protocol HTTP:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># nmap -A localhost</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">Starting Nmap 7.40 ( https://nmap.org ) at 2019-09-26 18:12 CEST</div></li><li class="li1"><div class="de1">Nmap scan report for localhost (127.0.0.1)</div></li><li class="li1"><div class="de1">Host is up (0.000017s latency).</div></li><li class="li1"><div class="de1">Other addresses for localhost (not scanned): ::1</div></li><li class="li1"><div class="de1">Not shown: 999 closed ports</div></li><li class="li1"><div class="de1">PORT   STATE SERVICE VERSION</div></li><li class="li1"><div class="de1">80/tcp open  http    nginx 1.10.3</div></li><li class="li1"><div class="de1">|_http-server-header: nginx/1.10.3</div></li><li class="li1"><div class="de1">|_http-title: Welcome to nginx!</div></li><li class="li1"><div class="de1">Device type: general purpose</div></li><li class="li1"><div class="de1">Running: Linux 3.X|4.X</div></li><li class="li1"><div class="de1">OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4</div></li><li class="li1"><div class="de1">OS details: Linux 3.8 - 4.6</div></li><li class="li1"><div class="de1">Network Distance: 0 hops</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</div></li><li class="li1"><div class="de1">Nmap done: 1 IP address (1 host up) scanned in 10.44 seconds</div></li></ol></pre>

<p>
El suport per a RTMP s’instal·la a Nginx com un mòdul. Aquest mòdul no es troba a la versió estable, sinó que s’ha d’instal·lar com un <em>backport</em>.
</p>

<p>
Els <em>backports</em> són paquets de la propera versió de Debian que encara s’estan testejant. Es compilen i s’adeqüen per a la versió estable. Com que estaran presents a la propera versió, s’actualitzen forma transparent.
</p>

<p>
Per afegir el <em>backport</em> cal modificar les fonts del repositori:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># echo &quot;deb http://ftp.es.debian.org/debian stretch-backports main&quot; &gt;&gt; /etc/apt/sources.list</div></li><li class="li1"><div class="de1"># apt-get update</div></li><li class="li1"><div class="de1">Obj:1 http://security.debian.org/debian-security stretch/updates InRelease</div></li><li class="li1"><div class="de1">Ign:2 http://ftp.es.debian.org/debian stretch InRelease</div></li><li class="li1"><div class="de1">Obj:3 http://ftp.es.debian.org/debian stretch-updates InRelease </div></li><li class="li1"><div class="de1">Bai:4 http://ftp.es.debian.org/debian stretch-backports InRelease [91,8 kB]             </div></li><li class="li1"><div class="de1">Obj:5 http://ftp.es.debian.org/debian stretch Release                                   </div></li><li class="li1"><div class="de1">Bai:6 http://ftp.es.debian.org/debian stretch-backports/main i386 Packages [601 kB]    </div></li><li class="li1"><div class="de1">Bai:8 http://ftp.es.debian.org/debian stretch-backports/main Translation-en [466 kB]   </div></li><li class="li1"><div class="de1">S'ha baixat 1158 kB en 2s (495 kB/s)                          </div></li><li class="li1"><div class="de1">S'està llegint la llista de paquets… Fet</div></li></ol></pre>

<p>
I ara ja es pot instal·lar el mòdul:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># apt-get -t stretch-backports install libnginx-mod-rtmp</div></li><li class="li1"><div class="de1">S'està llegint la llista de paquets… Fet </div></li><li class="li1"><div class="de1">S'està construint l'arbre de dependències       </div></li><li class="li1"><div class="de1">S'està llegint la informació de l'estat… Fet</div></li><li class="li1"><div class="de1">S'instal·laran els següents paquets extres:</div></li><li class="li1"><div class="de1">  libnginx-mod-http-auth-pam libnginx-mod-http-dav-ext libnginx-mod-http-echo libnginx-mod-http-geoip</div></li><li class="li1"><div class="de1">  libnginx-mod-http-image-filter libnginx-mod-http-subs-filter libnginx-mod-http-upstream-fair libnginx-mod-http-xslt-filter</div></li><li class="li1"><div class="de1">  libnginx-mod-mail libnginx-mod-stream nginx nginx-common nginx-full</div></li><li class="li1"><div class="de1">Paquets suggerits:</div></li><li class="li1"><div class="de1">  fcgiwrap nginx-doc ssl-cert</div></li><li class="li1"><div class="de1">S'instal·laran els paquets NOUS següents:</div></li><li class="li1"><div class="de1">  libnginx-mod-rtmp</div></li><li class="li1"><div class="de1">S'actualitzaran els paquets següents:</div></li><li class="li1"><div class="de1">  libnginx-mod-http-auth-pam libnginx-mod-http-dav-ext libnginx-mod-http-echo libnginx-mod-http-geoip</div></li><li class="li1"><div class="de1">  libnginx-mod-http-image-filter libnginx-mod-http-subs-filter libnginx-mod-http-upstream-fair libnginx-mod-http-xslt-filter</div></li><li class="li1"><div class="de1">  libnginx-mod-mail libnginx-mod-stream nginx nginx-common nginx-full</div></li><li class="li1"><div class="de1">13 actualitzats, 1 nous a instal·lar, 0 a suprimir i 393 no actualitzats.</div></li><li class="li1"><div class="de1">S'ha d'obtenir 2002 kB d'arxius.</div></li><li class="li1"><div class="de1">Després d'aquesta operació s'empraran 777 kB d'espai en disc addicional.</div></li><li class="li1"><div class="de1">Voleu continuar? [S/n] </div></li></ol></pre>

<p>
<strong>2. Configuració de l’<em>streaming</em> en directe.</strong>
</p>

<p>
Per poder configurar l’<em>streaming</em> en directe cal editar l’arxiu principal de configuració d’Nginx. Aquest fitxer és /etc/nginx/nginx.conf. Afegim la secció rtmp següent:
</p>
<pre class="code">rtmp {
        server {
                listen 1935;
                application live {
                        live on;
                }
        }
}</pre>

<p>
En aquesta secció estem indicant per quin port transmetrà el protocol RTMP (1935 és l’habitual) i el nom de l’aplicació o canal.
</p>

<p>
Un cop configurat el mòdul RTMP, cal reiniciar el servidor web per tal que aquests canvis tinguin efecte:
</p>
<pre class="code"># service nginx restart
# service nginx status
● nginx.service - A high performance web server and a reverse proxy server
   Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)
   Active: active (running) since Thu 2019-09-26 18:51:34 CEST; 9s ago
     Docs: man:nginx(8)
  Process: 3579 ExecStop=/sbin/start-stop-daemon --quiet --stop --retry QUIT/5 --pidfile /run/nginx.pid (code=exited, status=0/S
  Process: 3584 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS)
  Process: 3582 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=0/SUCCESS)
 Main PID: 3587 (nginx)
    Tasks: 2 (limit: 4915)
   CGroup: /system.slice/nginx.service
           ├─3587 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;
           └─3588 nginx: worker process

set 26 18:51:34 debian systemd[1]: Starting A high performance web server and a reverse proxy server...
set 26 18:51:34 debian systemd[1]: nginx.service: Failed to read PID from file /run/nginx.pid: Invalid argument
set 26 18:51:34 debian systemd[1]: Started A high performance web server and a reverse proxy server.</pre>

<p>
<strong>3. Preparació del vídeo.</strong>
</p>

<p>
A partir d’aquest punt, aquesta aplicació o canal es podria alimentar a partir d’una càmera de vídeo per tal de transmetre en directe. Per a l’activitat, el que es farà serà alimentar-lo amb un vídeo. Aquest vídeo només es podrà veure en temps real (com si fos la televisió) i no es podrà avançar ni retrocedir, és a dir, no serà un vídeo a la carta, sinó en directe.
</p>

<p>
Per poder-ho fer ens ajudarem del programari <strong>ffmpeg</strong>. Amb ffmpeg publicarem el vídeo i el deixarem emetent.
</p>

<p>
Primer instal·lem el programari:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># apt-get install ffmpeg</div></li><li class="li1"><div class="de1">S'està llegint la llista de paquets… Fet </div></li><li class="li1"><div class="de1">S'està construint l'arbre de dependències       </div></li><li class="li1"><div class="de1">S'està llegint la informació de l'estat… Fet</div></li><li class="li1"><div class="de1">S'instal·laran els següents paquets extres:</div></li><li class="li1"><div class="de1">  libavcodec57 libavdevice57 libavfilter6 libavformat57 libavresample3 libavutil55 libpostproc54 libswresample2 libswscale4</div></li><li class="li1"><div class="de1">Paquets suggerits:</div></li><li class="li1"><div class="de1">  ffmpeg-doc</div></li><li class="li1"><div class="de1">S'actualitzaran els paquets següents:</div></li><li class="li1"><div class="de1">  ffmpeg libavcodec57 libavdevice57 libavfilter6 libavformat57 libavresample3 libavutil55 libpostproc54 libswresample2</div></li><li class="li1"><div class="de1">  libswscale4</div></li><li class="li1"><div class="de1">10 actualitzats, 0 nous a instal·lar, 0 a suprimir i 322 no actualitzats.</div></li><li class="li1"><div class="de1">S'ha d'obtenir 8764 kB d'arxius.</div></li><li class="li1"><div class="de1">Després d'aquesta operació s'empraran 88,1 kB d'espai en disc addicional.</div></li><li class="li1"><div class="de1">Voleu continuar? [S/n] </div></li></ol></pre>

<p>
Un cop instal·lat, ja podem emetre el vídeo en directe:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># ffmpeg -re -i /var/www/html/live/Mulan.mp4 -c copy -f flv rtmp://localhost/live/Mulan</div></li><li class="li1"><div class="de1">ffmpeg version 3.2.14-1~deb9u1 Copyright (c) 2000-2019 the FFmpeg developers</div></li><li class="li1"><div class="de1">  built with gcc 6.3.0 (Debian 6.3.0-18+deb9u1) 20170516</div></li><li class="li1"><div class="de1">  configuration: --prefix=/usr --extra-version='1~deb9u1' --toolchain=hardened --libdir=/usr/lib/i386-linux-gnu --incdir=/usr/include/i386-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libebur128 --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared</div></li><li class="li1"><div class="de1">  libavutil      55. 34.101 / 55. 34.101</div></li><li class="li1"><div class="de1">  libavcodec     57. 64.101 / 57. 64.101</div></li><li class="li1"><div class="de1">  libavformat    57. 56.101 / 57. 56.101</div></li><li class="li1"><div class="de1">  libavdevice    57.  1.100 / 57.  1.100</div></li><li class="li1"><div class="de1">  libavfilter     6. 65.100 /  6. 65.100</div></li><li class="li1"><div class="de1">  libavresample   3.  1.  0 /  3.  1.  0</div></li><li class="li1"><div class="de1">  libswscale      4.  2.100 /  4.  2.100</div></li><li class="li1"><div class="de1">  libswresample   2.  3.100 /  2.  3.100</div></li><li class="li1"><div class="de1">  libpostproc    54.  1.100 / 54.  1.100</div></li><li class="li1"><div class="de1">Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/var/www/html/live/Mulan.mp4':</div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1">Output #0, flv, to 'rtmp://localhost/live/Mulan':</div></li><li class="li1"><div class="de1">  Metadata:</div></li><li class="li1"><div class="de1">    major_brand     : isom</div></li><li class="li1"><div class="de1">    minor_version   : 512</div></li><li class="li1"><div class="de1">    compatible_brands: isomiso2avc1mp41</div></li><li class="li1"><div class="de1">    encoder         : Lavf57.56.101</div></li><li class="li1"><div class="de1">    Stream #0:0(eng): Video: h264 (High) ([7][0][0][0] / 0x0007), yuv420p, 848x360, q=2-31, 556 kb/s, 23.98 fps, 23.98 tbr, 1k tbn, 24k tbc (default)</div></li><li class="li1"><div class="de1">    Metadata:</div></li><li class="li1"><div class="de1">      handler_name    : VideoHandler</div></li><li class="li1"><div class="de1">      timecode        : 01:00:00:00</div></li><li class="li1"><div class="de1">    Stream #0:1(eng): Audio: aac (LC) ([10][0][0][0] / 0x000A), 44100 Hz, stereo, 129 kb/s (default)</div></li><li class="li1"><div class="de1">    Metadata:</div></li><li class="li1"><div class="de1">      handler_name    : SoundHandler</div></li><li class="li1"><div class="de1">Stream mapping:</div></li><li class="li1"><div class="de1">  Stream #0:0 -&gt; #0:0 (copy)</div></li><li class="li1"><div class="de1">  Stream #0:1 -&gt; #0:1 (copy)</div></li><li class="li1"><div class="de1">Press [q] to stop, [?] for help</div></li><li class="li1"><div class="de1">frame= 1162 fps= 24 q=-1.0 Lsize=    3426kB time=00:00:48.36 bitrate= 580.2kbits/s speed=   1x  </div></li></ol></pre>

<p>
<strong>4. Visualització del vídeo des d’un client amb VLC.</strong>
</p>

<p>
Amb el programari VLC obrirem un flux de xarxa i com a <acronym title="Uniform Resource Locator">URL</acronym> li indicarem el protocol, el <em>host</em> i l’aplicació. 
</p>

<p>
<div class="imgelem">
<img src="../media/vlc.png" alt="" /></div>

</p>

<p>
En prémer <em>Reprodueix</em> començarem a veure la retransmissió del vídeo:
</p>

<p>
<div class="imgelem">
<img src="../media/mulan.jpg" title="mulan.jpg" alt="mulan.jpg" /></div>

</p>

<p>
<strong>Referències</strong>
</p>

<p>
<a href="https://www.nginx.com/" class="urlextern" title="https://www.nginx.com/"  rel="nofollow">NGINX</a>
</p>

<p>
<a href="https://backports.debian.org/" class="urlextern" title="https://backports.debian.org/"  rel="nofollow">Debian backports</a>
</p>

<p>
<a href="https://ffmpeg.org/" class="urlextern" title="https://ffmpeg.org/"  rel="nofollow">FFmpeg</a>
</p>

<p>
<a href="https://www.videolan.org/vlc/index.ca.html" class="urlextern" title="https://www.videolan.org/vlc/index.ca.html"  rel="nofollow">VideoLAN</a>
</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="pseudostreaming_amb_el_servidor_web_lighttpd" >&#039;Pseudostreaming&#039; amb el servidor web Lighttpd</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és la realització d’una emissió en el <em>pseudostreaming</em>. Per fer-ho utilitzarem el servidor web <strong>Lighttpd</strong>, la tecnologia <strong>Flash</strong> i el reproductor de vídeo <strong>FlowPlayer</strong>.
</p>

<p>
Realitzeu les següent tasques:
</p>
<ol>
<li class="level1"><div class="li"> Instal·lació del servidor web</div>
</li>
<li class="level1"><div class="li"> Configuració del servidor web</div>
</li>
<li class="level1"><div class="li"> Preparació del vídeo</div>
</li>
<li class="level1"><div class="li"> Preparació del reproductor de vídeo Flowplayer</div>
</li>
<li class="level1"><div class="li"> Visualització del vídeo amb Firefox</div>
</li>
</ol>

<p>
<form action=""><div class="solution ioccontent">
<p>
<strong>1.</strong> Instal·lació del servidor web <strong>Lighttpd</strong>.
</p>

<p>
Cerquem el nom del paquet per al servidor Lighttpd. Usarem el paràmetre <em>–names-only</em> per tal que no busqui a dins dels paquets i així afinar el resultat, si no el llistat és molt llarg:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># apt-cache search --names-only lighttp</div></li><li class="li1"><div class="de1">lighttpd - fast webserver with minimal memory footprint</div></li><li class="li1"><div class="de1">lighttpd-doc - documentation for lighttpd</div></li><li class="li1"><div class="de1">lighttpd-mod-authn-gssapi - GGSAPI authentication for lighttpd</div></li><li class="li1"><div class="de1">lighttpd-mod-authn-ldap - LDAP authentication for lighttpd</div></li><li class="li1"><div class="de1">lighttpd-mod-authn-mysql - MySQL authentication for lighttpd</div></li><li class="li1"><div class="de1">lighttpd-mod-cml - cache meta language module for lighttpd</div></li><li class="li1"><div class="de1">lighttpd-mod-geoip - GeoIP restrictions for lighttpd</div></li><li class="li1"><div class="de1">lighttpd-mod-magnet - control the request handling module for lighttpd</div></li><li class="li1"><div class="de1">lighttpd-mod-mysql-vhost - MySQL-based virtual host configuration for lighttpd</div></li><li class="li1"><div class="de1">lighttpd-mod-trigger-b4-dl - anti-deep-linking module for lighttpd</div></li><li class="li1"><div class="de1">lighttpd-mod-webdav - WebDAV module for lighttpd</div></li><li class="li1"><div class="de1">root@server:~# </div></li></ol></pre>

<p>
Instal·lem el servidor:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># apt-get install lighttpd</div></li><li class="li1"><div class="de1">S'està llegint la llista de paquets… Fet </div></li><li class="li1"><div class="de1">S'està construint l'arbre de dependències       </div></li><li class="li1"><div class="de1">S'està llegint la informació de l'estat… Fet</div></li><li class="li1"><div class="de1">El paquets següents s'han instal·lat automàticament i ja no serà necessaris:</div></li><li class="li1"><div class="de1">  erlang-asn1 erlang-base erlang-crypto erlang-edoc erlang-goldrush erlang-inets erlang-jiffy erlang-lager erlang-mnesia erlang-odbc</div></li><li class="li1"><div class="de1">  erlang-p1-cache-tab erlang-p1-iconv erlang-p1-stringprep erlang-p1-tls erlang-p1-utils erlang-p1-xml erlang-p1-yaml erlang-p1-zlib</div></li><li class="li1"><div class="de1">  erlang-proper erlang-public-key erlang-runtime-tools erlang-ssl erlang-syntax-tools erlang-xmerl libnginx-mod-http-auth-pam</div></li><li class="li1"><div class="de1">  libnginx-mod-http-dav-ext libnginx-mod-http-echo libnginx-mod-http-geoip libnginx-mod-http-image-filter libnginx-mod-http-subs-filter</div></li><li class="li1"><div class="de1">  libnginx-mod-http-upstream-fair libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream libodbc1 libsctp1 nginx-full</div></li><li class="li1"><div class="de1">Empreu «apt autoremove» per a suprimir-los.</div></li><li class="li1"><div class="de1">S'instal·laran els següents paquets extres:</div></li><li class="li1"><div class="de1">  spawn-fcgi</div></li><li class="li1"><div class="de1">Paquets suggerits:</div></li><li class="li1"><div class="de1">  rrdtool php5-cgi apache2-utils lighttpd-doc</div></li><li class="li1"><div class="de1">S'instal·laran els paquets NOUS següents:</div></li><li class="li1"><div class="de1">  lighttpd spawn-fcgi</div></li><li class="li1"><div class="de1">0 actualitzats, 2 nous a instal·lar, 0 a suprimir i 319 no actualitzats.</div></li><li class="li1"><div class="de1">S'han d'obtenir 322 kB d'arxius.</div></li><li class="li1"><div class="de1">Després d'aquesta operació s'empraran 1030 kB d'espai en disc addicional.</div></li><li class="li1"><div class="de1">Voleu continuar? [S/n]</div></li></ol></pre>

<p>
Comprovem l’estat del servei:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># service lighttpd status</div></li><li class="li1"><div class="de1">● lighttpd.service - Lighttpd Daemon</div></li><li class="li1"><div class="de1">   Loaded: loaded (/lib/systemd/system/lighttpd.service; enabled; vendor preset: enabled)</div></li><li class="li1"><div class="de1">   Active: active (running) since Mon 2019-10-07 09:11:16 CEST; 33s ago</div></li><li class="li1"><div class="de1"> Main PID: 1207 (lighttpd)</div></li><li class="li1"><div class="de1">    Tasks: 1 (limit: 4915)</div></li><li class="li1"><div class="de1">   CGroup: /system.slice/lighttpd.service</div></li><li class="li1"><div class="de1">           └─1207 /usr/sbin/lighttpd -D -f /etc/lighttpd/lighttpd.conf</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">oct 07 09:11:16 server.ioc.cat systemd[1]: Starting Lighttpd Daemon...</div></li><li class="li1"><div class="de1">oct 07 09:11:16 server.ioc.cat systemd[1]: Started Lighttpd Daemon.</div></li></ol></pre>

<p>
Comprovem la pàgina principal per veure que funciona:
</p>

<p>
<div class="imgelem">
<img src="../media/lighttpd1.png" alt="" /></div>

</p>

<p>
I verifiquem amb Nmap el port que ha obert:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># nmap -T4 -A localhost</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">Starting Nmap 7.40 ( https://nmap.org ) at 2019-10-07 09:20 CEST</div></li><li class="li1"><div class="de1">Nmap scan report for localhost (127.0.0.1)</div></li><li class="li1"><div class="de1">Host is up (0.000026s latency).</div></li><li class="li1"><div class="de1">Other addresses for localhost (not scanned): ::1</div></li><li class="li1"><div class="de1">Not shown: 999 closed ports</div></li><li class="li1"><div class="de1">PORT   STATE SERVICE VERSION</div></li><li class="li1"><div class="de1">80/tcp open  http    lighttpd 1.4.45</div></li><li class="li1"><div class="de1">|_http-server-header: lighttpd/1.4.45</div></li><li class="li1"><div class="de1">|_http-title: Welcome page</div></li><li class="li1"><div class="de1">Device type: general purpose</div></li><li class="li1"><div class="de1">Running: Linux 3.X|4.X</div></li><li class="li1"><div class="de1">OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4</div></li><li class="li1"><div class="de1">OS details: Linux 3.8 - 4.6</div></li><li class="li1"><div class="de1">Network Distance: 0 hops</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</div></li><li class="li1"><div class="de1">Nmap done: 1 IP address (1 host up) scanned in 10.65 seconds</div></li></ol></pre>

<p>
Veiem que és un servidor web que escolta el port per defecte del protocol HTTP (port 80).
</p>

<p>
<strong>2.</strong> Configuració del servidor web <strong>Lighttpd</strong>.
</p>

<p>
Configurarem el mòdul d’<em>streaming</em>. Per fer-ho, habilitarem el mòdul per a la visualització de vídeos en format FLV amb la comanda <em>lighttpd-enable-mod</em> i recarregarem la configuració del servidor:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># lighttpd-enable-mod</div></li><li class="li1"><div class="de1">Disabled modules: accesslog auth cgi debian-doc dir-listing evasive evhost expire extforward fastcgi fastcgi-php flv-streaming no-www proxy rewrite rrdtool simple-vhost ssi ssl status userdir usertrack </div></li><li class="li1"><div class="de1">Enabled modules: </div></li><li class="li1"><div class="de1">Enable module: flv-streaming</div></li><li class="li1"><div class="de1">Enabling flv-streaming: ok</div></li><li class="li1"><div class="de1">Run &quot;service lighttpd force-reload&quot; to enable changes</div></li><li class="li1"><div class="de1"># service lighttpd force-reload</div></li><li class="li1"><div class="de1"># service lighttpd status</div></li><li class="li1"><div class="de1">● lighttpd.service - Lighttpd Daemon</div></li><li class="li1"><div class="de1">   Loaded: loaded (/lib/systemd/system/lighttpd.service; enabled; vendor preset: enabled)</div></li><li class="li1"><div class="de1">   Active: active (running) since Mon 2019-10-07 09:21:07 CEST; 6s ago</div></li><li class="li1"><div class="de1">  Process: 6402 ExecStartPre=/usr/sbin/lighttpd -tt -f /etc/lighttpd/lighttpd.conf (code=exited, status=0/SUCCESS)</div></li><li class="li1"><div class="de1"> Main PID: 6410 (lighttpd)</div></li><li class="li1"><div class="de1">    Tasks: 1 (limit: 4915)</div></li><li class="li1"><div class="de1">   CGroup: /system.slice/lighttpd.service</div></li><li class="li1"><div class="de1">           └─6410 /usr/sbin/lighttpd -D -f /etc/lighttpd/lighttpd.conf</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">oct 07 09:21:07 server.ioc.cat systemd[1]: Starting Lighttpd Daemon...</div></li><li class="li1"><div class="de1">oct 07 09:21:07 server.ioc.cat systemd[1]: Started Lighttpd Daemon.</div></li></ol></pre>

<p>
<strong>3.</strong> Preparació del vídeo.
</p>

<p>
<strong>FFmpeg</strong> és un conjunt d’utilitats de vídeo que permeten codificar, editar, convertir fitxers d’àudio i de vídeo, entre altres coses.
</p>

<p>
Convertirem el vídeo MP4 al format FLV utilitzant el còdec libx264, ja que si es transforma sense especificar la qualitat és molt baixa. 
</p>

<p>
Primer instal·lem el programari:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># apt-get install ffmpeg</div></li><li class="li1"><div class="de1">S'està llegint la llista de paquets… Fet </div></li><li class="li1"><div class="de1">S'està construint l'arbre de dependències       </div></li><li class="li1"><div class="de1">S'està llegint la informació de l'estat… Fet</div></li><li class="li1"><div class="de1">S'instal·laran els següents paquets extres:</div></li><li class="li1"><div class="de1">  libavcodec57 libavdevice57 libavfilter6 libavformat57 libavresample3 libavutil55 libpostproc54 libswresample2 libswscale4</div></li><li class="li1"><div class="de1">Paquets suggerits:</div></li><li class="li1"><div class="de1">  ffmpeg-doc</div></li><li class="li1"><div class="de1">S'actualitzaran els paquets següents:</div></li><li class="li1"><div class="de1">  ffmpeg libavcodec57 libavdevice57 libavfilter6 libavformat57 libavresample3 libavutil55 libpostproc54 libswresample2</div></li><li class="li1"><div class="de1">  libswscale4</div></li><li class="li1"><div class="de1">10 actualitzats, 0 nous a instal·lar, 0 a suprimir i 322 no actualitzats.</div></li><li class="li1"><div class="de1">S'han d'obtenir 8.764 kB d'arxius.</div></li><li class="li1"><div class="de1">Després d'aquesta operació s'empraran 88,1 kB d'espai en disc addicional.</div></li><li class="li1"><div class="de1">Voleu continuar? [S/n] </div></li></ol></pre>

<p>
Convertim el vídeo a FLV:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># ffmpeg -i frozen2.mov -c:v libx264 frozen2.flv</div></li><li class="li1"><div class="de1">ffmpeg version 3.2.14-1~deb9u1 Copyright (c) 2000-2019 the FFmpeg developers</div></li><li class="li1"><div class="de1">  built with gcc 6.3.0 (Debian 6.3.0-18+deb9u1) 20170516</div></li><li class="li1"><div class="de1">  configuration: --prefix=/usr --extra-version='1~deb9u1' --toolchain=hardened --libdir=/usr/lib/i386-linux-gnu --incdir=/usr/include/i386-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libebur128 --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared</div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1">Stream mapping:</div></li><li class="li1"><div class="de1">  Stream #0:0 -&gt; #0:0 (h264 (native) -&gt; h264 (libx264))</div></li><li class="li1"><div class="de1">  Stream #0:2 -&gt; #0:1 (aac (native) -&gt; mp3 (libmp3lame))</div></li><li class="li1"><div class="de1">Press [q] to stop, [?] for help</div></li><li class="li1"><div class="de1">frame= 3385 fps= 34 q=28.0 Lsize=   15578kB time=00:02:21.21 bitrate= 903.7kbits/s speed=1.42x    </div></li><li class="li1"><div class="de1">video:13220kB audio:2207kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.980381%</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] frame I:108   Avg QP:17.44  size: 17129</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] frame P:1299  Avg QP:21.98  size:  5525</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] frame B:1978  Avg QP:25.13  size:  2280</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] consecutive B-frames:  6.6% 45.4%  3.2% 44.8%</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] mb I  I16..4: 32.5% 37.8% 29.7%</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] mb P  I16..4:  7.2% 11.6%  3.4%  P16..4: 29.7% 10.2%  4.2%  0.0%  0.0%    skip:33.7%</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] mb B  I16..4:  1.2%  2.4%  1.0%  B16..8: 28.4%  4.3%  0.8%  direct: 3.5%  skip:58.3%  L0:39.0% L1:51.1% BI:10.0%</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] 8x8 transform intra:49.1% inter:58.5%</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] coded y,uvDC,uvAC intra: 48.7% 56.4% 15.7% inter: 10.5% 14.5% 1.3%</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] i16 v,h,dc,p: 28% 32% 14% 27%</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 23% 22% 28%  4%  4%  4%  5%  4%  6%</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 25% 20% 17%  6%  7%  7%  7%  6%  6%</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] i8c dc,h,v,p: 53% 23% 18%  6%</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] Weighted P-Frames: Y:13.4% UV:11.7%</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] ref P L0: 76.4% 10.3% 10.3%  3.0%  0.2%</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] ref B L0: 93.1%  5.9%  1.0%</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] ref B L1: 98.8%  1.2%</div></li><li class="li1"><div class="de1">[libx264 @ 0x8118fb00] kb/s:767.04</div></li></ol></pre>

<p>
<strong>4.</strong> Preparació del reproductor de vídeo <strong>Flowplayer</strong>.
</p>

<p>
Flowplayer és un un reproductor de vídeo per a la web de programamari lliure. Reprodueix tant Flash com HTML5. El codi es pot trobar a <a href="https://github.com/flowplayer/flowplayer" class="urlextern" title="https://github.com/flowplayer/flowplayer"  rel="nofollow">flowplayer</a>.
</p>

<p>
Per començar, ens situem a la carpeta de publicació web, és a dir, a /var/www/html, i descarreguem el reproductor:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># wget https://releases.flowplayer.org/7.2.7/flowplayer-7.2.7.zip</div></li><li class="li1"><div class="de1">--2019-10-07 20:04:08--  https://releases.flowplayer.org/7.2.7/flowplayer-7.2.7.zip</div></li><li class="li1"><div class="de1">S'està resolent releases.flowplayer.org (releases.flowplayer.org)… 108.161.188.151</div></li><li class="li1"><div class="de1">S'està connectant a releases.flowplayer.org (releases.flowplayer.org)|108.161.188.151|:443… connectat.</div></li><li class="li1"><div class="de1">HTTP: s'ha enviat la petició, s'està esperant una resposta… 200 OK</div></li><li class="li1"><div class="de1">Mida: 290716 (284K) [application/zip]</div></li><li class="li1"><div class="de1">S'està desant a: «flowplayer-7.2.7.zip»</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">flowplayer-7.2.7.zip             100%[==========================================================&gt;] 283,90K   910KB/s    in 0,3s    </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">2019-10-07 20:04:09 (910 KB/s) - s'ha desat «flowplayer-7.2.7.zip» [290716/290716]</div></li></ol></pre>

<p>
Descomprimim el fitxer zip:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># unzip flowplayer-7.2.7.zip </div></li><li class="li1"><div class="de1">Archive:  flowplayer-7.2.7.zip</div></li><li class="li1"><div class="de1">  inflating: LICENSE.md              </div></li><li class="li1"><div class="de1">  inflating: flowplayer.js           </div></li><li class="li1"><div class="de1">  inflating: flowplayer.min.js       </div></li><li class="li1"><div class="de1"> extracting: flowplayer.swf          </div></li><li class="li1"><div class="de1">  inflating: flowplayerhls.swf       </div></li><li class="li1"><div class="de1">  inflating: index.html              </div></li><li class="li1"><div class="de1">   creating: skin/</div></li><li class="li1"><div class="de1">   creating: skin/icons/</div></li><li class="li1"><div class="de1">  inflating: skin/icons/flowplayer.svg  </div></li><li class="li1"><div class="de1">  inflating: skin/icons/flowplayer.woff  </div></li><li class="li1"><div class="de1">  inflating: skin/icons/flowplayer.ttf  </div></li><li class="li1"><div class="de1">  inflating: skin/icons/flowplayer.eot  </div></li><li class="li1"><div class="de1"> extracting: skin/icons/flowplayer.woff2  </div></li><li class="li1"><div class="de1">  inflating: skin/skin.css           </div></li></ol></pre>

<p>
Modifiquem el fitxer index.html perquè es pugui veure el nostre vídeo:
</p>
<pre class="code html4strict"><ol><li class="li1"><div class="de1">&lt;!doctype html&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;head&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   &lt;!-- player skin --&gt;</div></li><li class="li1"><div class="de1">   &lt;link rel=&quot;stylesheet&quot; href=&quot;skin/skin.css&quot;&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   &lt;!-- site specific styling --&gt;</div></li><li class="li1"><div class="de1">   &lt;style&gt;</div></li><li class="li1"><div class="de1">   body { font: 12px &quot;Myriad Pro&quot;, &quot;Lucida Grande&quot;, sans-serif; text-align: center; padding-top: 5%; }</div></li><li class="li1"><div class="de1">   .flowplayer { width: 80%; }</div></li><li class="li1"><div class="de1">   &lt;/style&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   &lt;!-- for video tag based installs flowplayer depends on jQuery 1.7.2+ --&gt;</div></li><li class="li1"><div class="de1">   &lt;script src=&quot;https://code.jquery.com/jquery-1.11.2.min.js&quot;&gt;&lt;/script&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   &lt;!-- include flowplayer --&gt;</div></li><li class="li1"><div class="de1">   &lt;script src=&quot;flowplayer.min.js&quot;&gt;&lt;/script&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;/head&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;body&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   &lt;!-- the player --&gt;</div></li><li class="li1"><div class="de1">   &lt;div class=&quot;flowplayer&quot; data-swf=&quot;flowplayer.swf&quot; data-ratio=&quot;0.4167&quot;&gt;</div></li><li class="li1"><div class="de1">      &lt;video&gt;</div></li><li class="li1"><div class="de1">         &lt;source type=&quot;video/flv&quot; src=&quot;frozen2.flv&quot;&gt;</div></li><li class="li1"><div class="de1">      &lt;/video&gt;</div></li><li class="li1"><div class="de1">   &lt;/div&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;/body&gt;</div></li></ol></pre>

<p>
<strong>5.</strong> Visualització del vídeo amb Firefox. 
</p>

<p>
Provem de veure el vídeo des del navegador Firefox. Com que no està instal·lat el <strong>Flash Player</strong>, evidentment no es pot:
</p>

<p>
<div class="imgelem">
<img src="../media/lighttpd2.png" alt="" /></div>

</p>

<p>
Instal·lem el <em>plugin</em> de Flash Player per a Debian. Anem a la pàgina <a href="https://wiki.debian.org/FlashPlayer" class="urlextern" title="https://wiki.debian.org/FlashPlayer"  rel="nofollow">https://wiki.debian.org/FlashPlayer</a> i seguim les instruccions:
</p>

<p>
<div class="imgelem">
<img src="../media/lighttpd3.png" alt="" /></div>

</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># wget https://fpdownload.adobe.com/get/flashplayer/pdc/32.0.0.255/flash_player_npapi_linux.i386.tar.gz</div></li><li class="li1"><div class="de1">--2019-10-08 05:20:07--  https://fpdownload.adobe.com/get/flashplayer/pdc/32.0.0.255/flash_player_npapi_linux.i386.tar.gz</div></li><li class="li1"><div class="de1">S'està resolent fpdownload.adobe.com (fpdownload.adobe.com)… 23.210.45.240, 2a02:26f0:e0:591::11e2, 2a02:26f0:e0:581::11e2</div></li><li class="li1"><div class="de1">S'està connectant a fpdownload.adobe.com (fpdownload.adobe.com)|23.210.45.240|:443… connectat.</div></li><li class="li1"><div class="de1">HTTP: s'ha enviat la petició, s'està esperant una resposta… 200 OK</div></li><li class="li1"><div class="de1">Mida: 8538367 (8,1M) [application/x-gzip]</div></li><li class="li1"><div class="de1">S'està desant a: «flash_player_npapi_linux.i386.tar.gz»</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">flash_player_npapi_linux.i386.ta 100%[=========================================================&gt;]   8,14M   902KB/s    in 10s     </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">2019-10-08 05:20:17 (833 KB/s) - s'ha desat «flash_player_npapi_linux.i386.tar.gz» [8538367/8538367]</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"># tar -xzf flash_player_npapi_linux.i386.tar.gz </div></li></ol></pre>

<p>
Identifiquem la carpeta dels <em>plugins</em> de Mozilla Firefox:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># ls /usr/lib/mozilla/plugins/</div></li><li class="li1"><div class="de1">libjavaplugin.so</div></li></ol></pre>

<p>
Copiem el <em class="u">plugin</em> a la carpeta:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># cp libflashplayer.so /usr/lib/mozilla/plugins/</div></li><li class="li1"><div class="de1"># ls /usr/lib/mozilla/plugins/</div></li><li class="li1"><div class="de1">libflashplayer.so  libjavaplugin.so</div></li></ol></pre>

<p>
Copiem les preferències del Flash Player tal com indica la guia:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># cp -r usr/* /usr</div></li></ol></pre>

<p>
I reiniciem el navegador i visualitzem el vídeo.
</p>

<p>
<div class="imgelem">
<img src="../media/lighttpd4.png" alt="" /></div>

</p>

<p>
<strong> Referències </strong>
</p>

<p>
<a href="https://www.lighttpd.net/" class="urlextern" title="https://www.lighttpd.net/"  rel="nofollow">LIGHTTPD</a>
</p>

<p>
<a href="https://www.ffmpeg.org/" class="urlextern" title="https://www.ffmpeg.org/"  rel="nofollow">FFmpeg</a>
</p>

<p>
<a href="https://get.adobe.com/flashplayer/" class="urlextern" title="https://get.adobe.com/flashplayer/"  rel="nofollow">Adobe Flash Player</a>
</p>

<p>
<a href="https://github.com/flowplayer/flowplayer" class="urlextern" title="https://github.com/flowplayer/flowplayer"  rel="nofollow">flowplayer</a>
</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="servei_de_video_a_la_carta_amb_el_servidor_d_streaming_darwin" >Servei de vídeo a la carta amb el servidor d&#039;&#039;streaming&#039; Darwin</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és instal·lar i configurar el servidor d’<em>streaming</em> de vídeo <strong>Darwin</strong>.
</p>

<p>
Realitzeu les següents tasques:
</p>
<ol>
<li class="level1"><div class="li"> Instal·lació i configuració del servidor d’<em>streaming</em> Darwin</div>
</li>
<li class="level1"><div class="li"> Preparació de l’<em>streaming</em> de vídeo en el servidor</div>
</li>
<li class="level1"><div class="li"> Visualització de l’<em>streaming</em> des d’un client amb VLC</div>
</li>
</ol>

<p>
<form action=""><div class="solution ioccontent">
<p>
<strong>1</strong>. Instal·lació i configuració del servidor d’<em>streaming</em> <strong>Darwin</strong>
</p>

<p>
La instal·lació i configuració del servidor d’<em>streaming</em> Darwin es pot consultar al mateix apartat d’activitats per als serveis d’àudio.
</p>

<p>
Partim del servidor instal·lat i configurat, i amb algun vídeo a la carpeta <em>/usr/local/movies</em>.
</p>

<p>
<strong>2</strong>. Preparació de l’<em>streaming</em> de vídeo en el <strong>servidor</strong>
</p>

<p>
Prepararem, doncs, el vídeo al servidor perquè sigui retransmès via <em>streaming</em>. Amb Darwin s’ha de realitzar un procés anomenat <strong>hinting</strong> a la pel·lícula, per tal que pugui ser retransmesa. Aquest procés marca el vídeo amb una sèrie de <em>marques</em> que diuen al servidor com ha de ser retransmès aquest vídeo a través de la xarxa.
</p>

<p>
Utilitzarem l’eina lliure <em>MP4Box</em>, que es troba al paquet <em>gpac</em>:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># apt-cache search MP4Box</div></li><li class="li1"><div class="de1">gpac - GPAC Project on Advanced Content - utilities</div></li></ol></pre>

<p>
L’instal·lem: 
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># apt-get install gpac</div></li><li class="li1"><div class="de1">[sudo] contrasenya per a user: </div></li><li class="li1"><div class="de1">S'està llegint la llista de paquets… Fet </div></li><li class="li1"><div class="de1">S'està construint l'arbre de dependències       </div></li><li class="li1"><div class="de1">S'està llegint la informació de l'estat… Fet</div></li><li class="li1"><div class="de1">S'instal·laran els següents paquets extres:</div></li><li class="li1"><div class="de1">  gpac-modules-base libavdevice-ffmpeg56 libfreenect0.5 libgpac4</div></li><li class="li1"><div class="de1">S'instal·laran els paquets NOUS següents:</div></li><li class="li1"><div class="de1">  gpac gpac-modules-base libavdevice-ffmpeg56 libfreenect0.5 libgpac4</div></li><li class="li1"><div class="de1">0 actualitzats, 5 nous a instal·lar, 0 a suprimir i 435 no actualitzats.</div></li><li class="li1"><div class="de1">S'han d'obtenir 2371 kB d'arxius.</div></li><li class="li1"><div class="de1">Després d'aquesta operació s'empraran 7493 kB d'espai en disc addicional.</div></li><li class="li1"><div class="de1">Voleu continuar? [S/n]</div></li></ol></pre>

<p>
Realitzem el procés de <em>hinting</em>:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># MP4Box -hint Bron4.mp4</div></li><li class="li1"><div class="de1">Hinting file with Path-MTU 1450 Bytes</div></li><li class="li1"><div class="de1">Hinting track ID 1 - Type &quot;avc1:avc1&quot; (H264) - BW 399 kbps</div></li><li class="li1"><div class="de1">Hinting track ID 2 - Type &quot;mp4a:mp4a&quot; (mpeg4-generic) - BW 126 kbps</div></li><li class="li1"><div class="de1">Saving Bron4.mp4: 0.500 secs Interleaving      </div></li></ol></pre>

<p>
Un cop realitzat el procés ja podem crear una llista multimèdia que contingui el vídeo. En aquest cas, seleccionem l’opció <em>New Media Playlist</em>:
</p>

<p>
<div class="imgelem">
<img src="../media/darwin7.png" alt="" /></div>

</p>

<p>
I deixem el vídeo reproduint-se:
</p>

<p>
<div class="imgelem">
<img src="../media/darwin8.png" alt="" /></div>

</p>

<p>
<strong>3</strong>. Visualització de l’<em>streaming</em> des d’un client amb VLC
</p>

<p>
Instal·lem el programari VLC:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># apt-get install vlc</div></li><li class="li1"><div class="de1">S'està llegint la llista de paquets… Fet </div></li><li class="li1"><div class="de1">S'està construint l'arbre de dependències       </div></li><li class="li1"><div class="de1">S'està llegint la informació de l'estat… Fet</div></li><li class="li1"><div class="de1">S'instal·laran els següents paquets extres:</div></li><li class="li1"><div class="de1">  libbasicusageenvironment1 libcddb2 libdca0 libdvbpsi10 libebml4v5 libgles2-mesa libgroupsock8 libkate1 liblirc-client0</div></li><li class="li1"><div class="de1">  liblivemedia57 libmatroska6v5 libmicrodns0 libmpcdec6 libmpeg2-4 libopenmpt-modplug1 libprotobuf-lite10 libproxy-tools</div></li><li class="li1"><div class="de1">  libresid-builder0c2a libsidplay2 libupnp6 libusageenvironment3 libvlc-bin libvlc5 libvlccore9 libxcb-xv0 vlc-bin vlc-data</div></li><li class="li1"><div class="de1">  vlc-l10n vlc-plugin-base vlc-plugin-notify vlc-plugin-qt vlc-plugin-samba vlc-plugin-skins2 vlc-plugin-video-output</div></li><li class="li1"><div class="de1">  vlc-plugin-video-splitter vlc-plugin-visualization</div></li><li class="li1"><div class="de1">Paquets suggerits:</div></li><li class="li1"><div class="de1">  lirc libdvdcss2</div></li><li class="li1"><div class="de1">S'instal·laran els paquets NOUS següents:</div></li><li class="li1"><div class="de1">  libbasicusageenvironment1 libcddb2 libdca0 libdvbpsi10 libebml4v5 libgles2-mesa libgroupsock8 libkate1 liblirc-client0</div></li><li class="li1"><div class="de1">  liblivemedia57 libmatroska6v5 libmicrodns0 libmpcdec6 libmpeg2-4 libopenmpt-modplug1 libprotobuf-lite10 libproxy-tools</div></li><li class="li1"><div class="de1">  libresid-builder0c2a libsidplay2 libupnp6 libusageenvironment3 libvlc-bin libvlc5 libvlccore9 libxcb-xv0 vlc vlc-bin</div></li><li class="li1"><div class="de1">  vlc-data vlc-l10n vlc-plugin-base vlc-plugin-notify vlc-plugin-qt vlc-plugin-samba vlc-plugin-skins2</div></li><li class="li1"><div class="de1">  vlc-plugin-video-output vlc-plugin-video-splitter vlc-plugin-visualization</div></li><li class="li1"><div class="de1">0 actualitzats, 37 nous a instal·lar, 0 a suprimir i 130 no actualitzats.</div></li><li class="li1"><div class="de1">S'han d'obtenir 14,7 MB d'arxius.</div></li><li class="li1"><div class="de1">Després d'aquesta operació s'empraran 66,7 MB d'espai en disc addicional.</div></li><li class="li1"><div class="de1">Voleu continuar? [S/n] </div></li></ol></pre>

<p>
Obrim el VLC i anem a <em>Fitxer multimèdia / Obre un flux de la xarxa</em>, posem la <acronym title="Uniform Resource Locator">URL</acronym> corresponent i <em>Reprodueix</em>:
</p>

<p>
<div class="imgelem">
<img src="../media/vlc1.png" alt="" /></div>

</p>

<p>
I veiem la reproducció del vídeo en <em>streaming</em>:
</p>

<p>
<div class="imgelem">
<img src="../media/vlc2.png" alt="" /></div>

</p>

<p>
<strong>Referències</strong>
</p>

<p>
<a href="https://manuals.info.apple.com/MANUALS/0/MA579/en_US/QuickTimeStreamingSrvrAdminGuide.pdf" class="urlextern" title="https://manuals.info.apple.com/MANUALS/0/MA579/en_US/QuickTimeStreamingSrvrAdminGuide.pdf"  rel="nofollow">Manual Darwin Stream Server</a>
</p>

<p>
<a href="http://www.oit.uci.edu/stream/mp4-hinting/" class="urlextern" title="http://www.oit.uci.edu/stream/mp4-hinting/"  rel="nofollow">Hinting</a>
</p>

<p>
<a href="https://github.com/gpac/gpac/wiki/MP4Box-Introduction" class="urlextern" title="https://github.com/gpac/gpac/wiki/MP4Box-Introduction"  rel="nofollow">MP4Box</a>
</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="servei_de_video_a_la_carta_amb_el_servidor_d_streaming_gnump3d" >Servei de vídeo a la carta amb el servidor d&#039;&#039;streaming&#039; gnump3d</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és instal·lar i configurar el servidor d’<em>streaming</em> de vídeo <strong>gnump3d</strong>.
</p>

<p>
Realitzeu les següents tasques:
</p>
<ol>
<li class="level1"><div class="li"> Instal·lació i configuració del servidor d’<em>streaming</em> Darwin</div>
</li>
<li class="level1"><div class="li"> Preparació de l’<em>streaming</em> de vídeo en el servidor</div>
</li>
<li class="level1"><div class="li"> Visualització de l’<em>streaming</em> des d’un client amb VLC</div>
</li>
</ol>

<p>
<form action=""><div class="solution ioccontent">
<p>
<strong>1</strong>. Instal·lació i configuració del servidor d’<em>streaming</em> <strong>gnump3d</strong>
</p>

<p>
La instal·lació i configuració del servidor d’<em>streaming</em> gnump3d es pot consultar al mateix apartat d’activitats per als serveis d’àudio.
</p>

<p>
Partim del servidor instal·lat i configurat, i amb algun vídeo, a la carpeta <em>/var/music.</em>
</p>

<p>
<strong>2</strong>. Preparació de l’<em>streaming</em> de vídeo en el <strong>servidor</strong>
</p>

<p>
Els formats que associa per defecte gnump3 es poden trobar a /etc/gnump3d/file.types i són:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ tail /etc/gnump3d/file.types</div></li><li class="li1"><div class="de1"># movie files.</div></li><li class="li1"><div class="de1">#</div></li><li class="li1"><div class="de1">#  Files with these suffixes will be included in the HTML pages</div></li><li class="li1"><div class="de1"># served to clients.</div></li><li class="li1"><div class="de1">#</div></li><li class="li1"><div class="de1">mov  = movie</div></li><li class="li1"><div class="de1">mpg  = movie</div></li><li class="li1"><div class="de1">mpeg = movie</div></li><li class="li1"><div class="de1">avi  = movie</div></li><li class="li1"><div class="de1">wmv  = movie</div></li></ol></pre>

<p>
Afegim el format MP4 al fitxer /etc/gnump3d/file.types per tal que el servidor el pugui reproduir. Com que està al final del fitxer, ho podem fer amb una simple comanda:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"># echo mp4 = movie &gt;&gt; /etc/gnump3d/file.types</div></li></ol></pre>

<p>
Col·loquem els vídeos que vulguem reproduir a la carpeta <em>/var/music</em>.
</p>

<p>
Com que l’estem reproduint en <em>streaming</em> a través del protocol HTTP, ho podem veure directament amb un navegador modern:
</p>

<p>
<div class="imgelem">
<img src="../media/gnump3d5.png" alt="" /></div>

</p>

<p>
No obstant això, també el prodem reproduir amb el programari VLC. L’obrim i anem a <em>Fitxer multimèdia / Obre un flux de la xarxa</em>, posem la <acronym title="Uniform Resource Locator">URL</acronym> corresponent i <em>Reprodueix</em>:
</p>

<p>
<div class="imgelem">
<img src="../media/gnump3d6.png" alt="" /></div>

</p>

<p>
I veiem la reproducció del vídeo en <em>streaming</em>:
</p>

<p>
<div class="imgelem">
<img src="../media/gnump3d7.png" alt="" /></div>

</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="instal_lacio_i_configuracio_del_servidor_de_videoconferencies_bigbluebutton" >Instal·lació i configuració del servidor de videoconferències BigBlueButton</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és conèixer amb tot detall l’aplicació per a videoconferències BigBlueButton i els principals paràmetres tècnics de configuració per obtenir-ne la màxima usabilitat des del punt de vista d’administrador i d’usuari.
</p>

<p>
BigBlueButton és una aplicació web de font pública per a videoconferències i aprenentatge en línia (<em>elearning</em>). És un programa amb llicència GNU que es basa en projectes com Asterisk, Flex SDK, Red5 i MySQL, entre d’altres.
</p>

<p>
Paral·lelament, el programari BigBlueButton ofereix altres característiques com, per exemple, la pujada de tot tipus d’arxius (documents PDF, de text, fulls de càlcul…).
</p>

<p>
Descarregueu l’última versió del programari BigBlueButton, instal·leu-la i configureu-la.
</p>

<p>
<form action=""><div class="solution ioccontent">
<p>
En primer lloc haurem de donar accés al nostre servidor al repositori del paquet BigBlueButton en la seva versió 0.8. En una finestra del terminal d’ordres escriurem i executarem les ordres següents:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">wget http://ubuntu.bigbluebutton.org/bigbluebutton.asc -O- | sudo apt-key add -</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">echo &quot;deb http://ubuntu.bigbluebutton.org/lucid_dev_08/ bigbluebutton-lucid main&quot; | sudo tee /etc/apt/sources.list.d/bigbluebutton.list</div></li><li class="li1"><div class="de1">echo &quot;deb http://us.archive.ubuntu.com/ubuntu/ lucid multiverse&quot; | sudo tee -a /etc/apt/sources.list</div></li></ol></pre>

<p>
Un cop fet això haurem de confirmar que el servidor i els paquets amb què treballa estan actualitzats abans d’iniciar el procés d’instal·lació del servidor BigBlueButton.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">sudo apt-get update</div></li><li class="li1"><div class="de1">sudo apt-get dist-upgrade</div></li></ol></pre>

<p>
A continuació crearem un arxiu anomenat install-ruby.sh.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">sudo nano install-ruby.sh</div></li></ol></pre>

<p>
I hi copiarem l’<em>script</em> següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">#!/bin/bash</div></li><li class="li1"><div class="de1">cd /tmp</div></li><li class="li1"><div class="de1">wget http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.2-p290.tar.gz</div></li><li class="li1"><div class="de1">tar xvzf ruby-1.9.2-p290.tar.gz</div></li><li class="li1"><div class="de1">cd ruby-1.9.2-p290</div></li><li class="li1"><div class="de1">./configure --prefix=/usr\</div></li><li class="li1"><div class="de1">            --program-suffix=1.9.2\</div></li><li class="li1"><div class="de1">            --with-ruby-version=1.9.2\</div></li><li class="li1"><div class="de1">            --disable-install-doc</div></li><li class="li1"><div class="de1">make</div></li><li class="li1"><div class="de1">sudo checkinstall -D -y\</div></li><li class="li1"><div class="de1">                  --fstrans=no\</div></li><li class="li1"><div class="de1">                  --nodoc\</div></li><li class="li1"><div class="de1">                  --pkgname='ruby1.9.2'\</div></li><li class="li1"><div class="de1">                  --pkgversion='1.9.2-p290'\</div></li><li class="li1"><div class="de1">                  --provides='ruby'\</div></li><li class="li1"><div class="de1">                  --requires='libc6,libffi5,libgdbm3,libncurses5,libreadline5,openssl,libyaml-0-2,zlib1g'\</div></li><li class="li1"><div class="de1">                  --maintainer=brendan.ribera@gmail.com</div></li><li class="li1"><div class="de1">sudo update-alternatives --install /usr/bin/ruby ruby /usr/bin/ruby1.9.2 500\</div></li><li class="li1"><div class="de1">                         --slave   /usr/bin/ri   ri   /usr/bin/ri1.9.2\</div></li><li class="li1"><div class="de1">                         --slave   /usr/bin/irb  irb  /usr/bin/irb1.9.2\</div></li><li class="li1"><div class="de1">                         --slave   /usr/bin/gem  gem  /usr/bin/gem1.9.2\</div></li><li class="li1"><div class="de1">                         --slave   /usr/bin/erb  erb  /usr/bin/erb1.9.2\</div></li><li class="li1"><div class="de1">                         --slave   /usr/bin/rdoc rdoc /usr/bin/rdoc1.9.2 </div></li></ol></pre>

<p>
A continuació canviarem els permisos de l’<em>script</em> que acabem de crear i l’executarem.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">chmod +x install-ruby.sh</div></li><li class="li1"><div class="de1">./install-ruby.sh</div></li></ol></pre>

<p>
Considerant que la infrastructura d’enregistrament i reproducció utilitza el programari Ruby per al processament de sessions enregistrades, en primer lloc haurem d’instal·lar les dependències següents per compilar Ruby:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">sudo apt-get install zlib1g-dev libssl-dev libreadline5-dev libyaml-dev build-essential bison checkinstall libffi5 gcc checkinstall libreadline5 libyaml-0-2</div></li></ol></pre>

<p>
Després haurem d’executar l’intèrpret Ruby. Tot seguit apareixerà la resposta de l’intèrpret.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ ruby -v</div></li><li class="li1"><div class="de1">ruby 1.9.2p290 (2011-07-09 revision 32553)</div></li></ol></pre>

<p>
A continuació escriurem “gem -v” i esperarem la resposta corresponent. 
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ gem -v</div></li><li class="li1"><div class="de1">1.3.7</div></li></ol></pre>

<p>
Per acabar, abans de procedir a instal·lar el servidor BigBlueButton, haurem de comprovar que podem instal·lar gems (per exemple, <em>hello</em>).
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ sudo gem install hello</div></li><li class="li1"><div class="de1">Successfully installed hello-0.0.1</div></li><li class="li1"><div class="de1">1 gem installed</div></li><li class="li1"><div class="de1">Installing ri documentation for hello-0.0.1...</div></li><li class="li1"><div class="de1">Installing RDoc documentation for hello-0.0.1...</div></li></ol></pre>

<p>
Si tot ha anat bé ja estem preparats per instal·lar BigblueButton.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">sudo apt-get install bigbluebutton</div></li></ol></pre>

<p>
Amb aquesta ordre instal·larem tots els components i dependències de BigBlueButton.
</p>

<p>
<div class="imgelem">
<img src="../media/w_uf4m8_34.png" alt="" /></div>

</p>

<p>
Per testejar interactivament el nostre servidor BigBlueButton haurem d’instal·lar un ventall de versions de demostració de l’<acronym title="Application Programming Interface">API</acronym> (interfície de programa d’aplicació), que ens permetran arrencar el servidor i connectar-nos per videoconferència.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">sudo apt-get install bbb-demo</div></li></ol></pre>

<p>
També podrem comprovar que BigBlueButton ha arrencat correctament executant les línies d’ordres següents:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">sudo bbb-conf --clean</div></li><li class="li1"><div class="de1">sudo bbb-conf --check</div></li></ol></pre>

<p>
Ja podem definir l’adreça IP de la màquina en què està instal·lat BigBlueButton. En aquest cas el servidor té l’adreça IP 192.168.0.36.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">sudo bbb-conf --setip 192.168.0.36</div></li></ol></pre>

<p>
Si estem en la màquina servidor i obrim un navegador web i introduïm l’adreça IP en la barra de navegació podrem iniciar una videoconferència, mentre que si ho fem des d’una màquina client podrem accedir a la videoconferència arrencada des del servidor.
</p>

<p>
<div class="imgelem">
<img src="../media/w_uf4m8_35.png" alt="" /></div>

</p>

<p>
Per començar a utilitzar el servidor BigBlueButton haurem d’introduir el nostre nom i farem clic en el botó <em>Join</em>.
</p>

<p>
<div class="imgelem">
<img src="../media/w_uf4m8_36.png" alt="" /></div>

</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u4/a2/continguts.html">Instal·lació i administració del servei de vídeo</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u4/a2/exercicis.html">Exercicis</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
