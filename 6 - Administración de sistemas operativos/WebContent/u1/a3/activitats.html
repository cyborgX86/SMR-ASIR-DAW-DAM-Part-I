<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
	
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Administració de sistemes operatius</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Administració de sistemes operatius">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html">Administració de sistemes operatius</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u1" class="parentnode"><p><a href="../../../WebContent/u1/introduccio.html">1. Administració de processos. Administració remota. Administració de serveis d'impressió</a></p><ul class="expander"><li id="u1introduccio"><a href="../../../WebContent/u1/introduccio.html">Introducció</a></li><li id="u1resum"><a href="../../../WebContent/u1/resum.html">Resum</a></li><li id="u1resultats"><a href="../../../WebContent/u1/resultats.html">Resultats d'aprenentatge</a></li><li id="u1referencies"><a href="../../../WebContent/u1/referencies.html">Més informació</a></li><li id="u1a1" class="tocsection"><p id="u1a1continguts"><a href="../../../WebContent/u1/a1/continguts.html">Administració de processos del sistema</a><span class="buttonexp"></span></p><ul><li id="u1a1activitats"><a href="../../../WebContent/u1/a1/activitats.html">Activitats</a></li><li id="u1a1exercicis"><a href="../../../WebContent/u1/a1/exercicis.html">Exercicis</a></li></ul></li><li id="u1a2" class="tocsection"><p id="u1a2continguts"><a href="../../../WebContent/u1/a2/continguts.html">Serveis d'accés i administració remota</a><span class="buttonexp"></span></p><ul><li id="u1a2activitats"><a href="../../../WebContent/u1/a2/activitats.html">Activitats</a></li><li id="u1a2exercicis"><a href="../../../WebContent/u1/a2/exercicis.html">Exercicis</a></li></ul></li><li id="u1a3" class="tocsection"><p id="u1a3continguts"><a href="../../../WebContent/u1/a3/continguts.html">Administració de servidors d'impressió</a><span class="buttonexp"></span></p><ul><li id="u1a3activitats"><a href="../../../WebContent/u1/a3/activitats.html">Activitats</a></li><li id="u1a3exercicis"><a href="../../../WebContent/u1/a3/exercicis.html">Exercicis</a></li></ul></li></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../introduccio.html">Administració de processos. Administració remota. Administració de ser...</a></li><li><a href="continguts.html">Administració de servidors d'impressió</a></li><li>Activitats</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="activitats"> Activitats </a></h1>
    	
<h2><a id="instal_lacio_gestio_i_configuracio_de_la_impressora_virtual_pdf" >Instal·lació, gestió i configuració de la impressora virtual PDF</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és instal·lar la impressora virtual de documents PDF i familiaritzar-se amb els arxius i aplicacions implicats en la configuració d’impressores en l’entorn CUPS. Per fer aquesta tasca es demanen les activitats següents:
</p>
<ol>
<li class="level1"><div class="li"> Instal·lar a CUPS la impressora virtual de documents PDF.</div>
</li>
<li class="level1"><div class="li"> Comprovar mitjançant línia d’ordres, aplicació gràfica i interfície web que la impressora està correctament donada d’alta al sistema.</div>
</li>
<li class="level1"><div class="li"> Visualitzar l’arxiu que conté les impressores locals.</div>
</li>
<li class="level1"><div class="li"> Visualitzar l’arxiu PPD que conté la configuració de la impressora PDF.</div>
</li>
<li class="level1"><div class="li"> Imprimir qualsevol document amb aquesta impressora amb aplicació gràfica i amb línia d’ordres i comprovar-ne el resultat.</div>
</li>
<li class="level1"><div class="li"> Esbrinar consultant Internet com canviar el directori per defecte al qual la impressora PDF envia els treballs d’impressió.</div>
</li>
</ol>

<p>
<form action=""><div class="solution ioccontent">
<p>
1. Primer procedim a la instal·lació de la impressora PDF. Només cal fer:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="co4">$ </span><span class="kw2">apt-get install</span> cups-pdf</div></li></ol></pre>

<p>
2. Finalitzat aquest procediment, la impressora ja està disponible i ho podem comprovar de diferents maneres:
</p>
<ul>
<li class="level1"><div class="li"> Per línia d’ordres, amb <em>lpstat</em> o bé amb <em>lpc</em>:</div>
</li>
</ul>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ lpstat <span class="re5">-pprinter</span> PDF is idle. enabled since dt <span class="nu0">31</span> gen <span class="nu0">2012</span> <span class="nu0">22</span>:03:05 CET</div></li><li class="li1"><div class="de1">$ lpc statusPDF:printer is on device <span class="st_h">'cups-pdf'</span> speed <span class="re5">-1queuing</span> is enabledprinting is enabledno entriesdaemon present</div></li></ol></pre>
<ul>
<li class="level1"><div class="li"> Mitjançant l’aplicació gràfica d’escriptori que es pot arrancar per línia d’ordres (system-config-printer) o bé per menú <em>Sistema &gt; Administració &gt; Impressió</em>:</div>
</li>
</ul>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="co4">$ </span>system-config-printer</div></li></ol></pre>
<div class="iocfigure"><a name=""></a><figure>
<figcaption><span class="figuretitle">Figura</span></figcaption><img src="../media/activitats_image_18.png" alt="" /></figure>
<div class="footfigure"></div></div><ul>
<li class="level1"><div class="li"> Per interfície web a l’adreça <a href="http://localhost:631" class="urlextern" title="http://localhost:631"  rel="nofollow">http://localhost:631</a> i seleccionant la pestanya d’impressores:</div>
</li>
</ul>
<div class="iocfigure"><a name=""></a><figure>
<figcaption><span class="figuretitle">Figura</span></figcaption><img src="../media/activitats_image_19.png" alt="" /></figure>
<div class="footfigure"></div></div>
<p>
3. Per visualitzar l’arxiu que conté el llistat de les impressores locals només cal accedir a l’arxiu <code>/etc/cups/printers.conf</code>:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ <span class="kw2">cat</span> <span class="sy0">/</span>etc<span class="sy0">/</span>cups<span class="sy0">/</span>printers.conf</div></li><li class="li1"><div class="de1"><span class="co0"># Printer configuration file for CUPS v1.4.4# Written by cupsd# DO NOT EDIT THIS FILE WHEN CUPSD IS RUNNING&lt;DefaultPrinter PDF&gt;Info PDFMakeModel Generic CUPS-PDF PrinterDeviceURI cups-pdf:/State IdleStateTime 1328043785Type 8450124Filter application/vnd.cups-raw 0 -Filter application/vnd.cups-pdf 0 -Filter application/vnd.cups-postscript 100 -Filter application/vnd.cups-command 0 commandtopsAccepting YesShared YesJobSheets none noneQuotaPeriod 0PageLimit 0KLimit 0OpPolicy defaultErrorPolicy stop-printer&lt;/Printer&gt;</span></div></li></ol></pre>

<p>
4. Trobareu l’arxiu PPD d’aquesta impressora al directori /etc/cups/ppd<em>. </em>Comproveu que conté totes les característiques i opcions de la impressora.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="co4">$ </span><span class="kw2">cat</span> <span class="sy0">/</span>etc<span class="sy0">/</span>cups<span class="sy0">/</span>ppd<span class="sy0">/</span>PDF.ppd</div></li></ol></pre>

<p>
5. Podem imprimir un document des de qualsevol aplicació gràfica o bé per la línia d’ordres:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="co4">$ </span><span class="kw2">lp</span> <span class="sy0">/</span>etc<span class="sy0">/</span><span class="kw2">passwd</span></div></li></ol></pre>

<p>
Per defecte, els treballs van al directori <code>$HOME/PDF</code>, i si l’usuari és anònim arriben a <code>/var/spool/cups-pdf/ANONYMOUS/</code>.
</p>

<p>
Per canviar el directori de destí cal editar l’arxiu /etc/cups/cups-pdf i canviar la directiva:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">Out <span class="co1">${HOME}</span><span class="sy0">/</span>PDF</div></li></ol></pre>

<p>
Sempre convé reiniciar el servei per assegurar-nos que els canvis tinguin efecte:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ <span class="sy0">/</span>etc<span class="sy0">/</span>init.d<span class="sy0">/</span>cups restart</div></li><li class="li1"><div class="de1">Restarting Common Unix Printing System: cupsd.</div></li></ol></pre>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="control_d_acces_a_la_interficie_d_administracio_web_de_cups" >Control d&#039;accés a la interfície d&#039;administració web de CUPS</a></h2>
<div class="level2">

<p>
Per defecte, només es pot accedir a l’administració web de CUPS des de la màquina local i per part d’usuaris amb dret d’administració. L’objectiu d’aquesta activitat és conèixer les possibilitats de canviar els permisos d’accés a CUPS tant de màquines remotes com d’usuaris. Per fer aquesta tasca es demanen les activitats següents:
</p>
<ul>
<li class="level1"><div class="li"> Permetre que es pugui accedir a la interfície web des de qualsevol ordinador de la xarxa.</div>
</li>
<li class="level1"><div class="li"> Habilitar la interfície web només en mode local o des de una adreça IP concreta.</div>
</li>
<li class="level1"><div class="li"> Permetre accedir a tota la interfície d’administració a l’usuari Josep, al grup de professors només per a l’administració de treballs d’impressió i a qualsevol usuari correctament identificat per gestionar les impressores.</div>
</li>
</ul>

<p>
NOTA: Convindria disposar de dues màquines virtuals en xarxa per poder comprovar l’accés remot al sistema d’administració de CUPS. En aquest exemple considerem que el servidor cups té l’adreça 192.168.56.10, i el client, l’adreça 192.168.56.11.
</p>

<p>
<form action=""><div class="solution ioccontent">
<p>
Es pot permetre l’accés a la interfície web des de qualsevol ordinador connectat directament marcant la casella corresponent (<em>Allow remote administration</em>) de la secció d’administració: <a href="http://localhost:631/admin" class="urlextern" title="http://localhost:631/admin"  rel="nofollow">http://localhost:631/admin</a> (vegeu la figura següent).
</p>
<div class="iocfigure"><a name=""></a><figure>
<figcaption><span class="figuretitle">Figura</span></figcaption><img src="../media/activitats_image_20.png" alt="" /></figure>
<div class="footfigure"></div></div>
<p>
Un cop guardats els canvis (botó <em>Change settings</em>) el servei es reinicia automàticament perquè els canvis tinguin efecte.
</p>

<p>
Comproveu que ara s’hi pot accedir des d’una màquina client remota indicant al navegador l’adreça del servidor (per exemple, <a href="http://192.168.56.10:631/" class="urlextern" title="http://192.168.56.10:631/"  rel="nofollow">http://192.168.56.10:631</a>). Naturalment, per fer qualsevol canvi administratiu ens demanarà usuari i contrasenya amb permisos d’administració al servidor:
</p>
<div class="iocfigure"><a name=""></a><figure>
<figcaption><span class="figuretitle">Figura</span></figcaption><img src="../media/activitats_image_21.png" alt="" /></figure>
<div class="footfigure"></div></div>
<p>
El problema d’aquesta configuració és que posem en perill la seguretat, ja que s’hi pot accedir des de qualsevol màquina de la xarxa. Si volem restringir l’accés a un determinat equip haurem d’editar directament l’arxiu /etc/cups/cupsd.conf i canviar les directives següents:
</p>
<ul>
<li class="level1"><div class="li"> Les directives <em>listen</em> determinen els controladors de xarxa i els ports que el servidor escolta per rebre les peticions IPP. Podem indicar que atengui les peticions localhost i les adreçades a la interfície de xarxa del nostre servidor CUPS:</div>
</li>
</ul>
<pre class="code bash"><ol><li class="li1"><div class="de1">Listen localhost:<span class="nu0">631</span></div></li><li class="li1"><div class="de1">Listen 192.168.56.10:<span class="nu0">631</span></div></li></ol></pre>
<ul>
<li class="level1"><div class="li"> Les directives <em>allow</em> dins de cada secció <em>Location</em> habilitaran l’accés remot només des de la màquina amb IP 192.168.56.11.</div>
</li>
</ul>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="sy0">&lt;</span>Location <span class="sy0">/&gt;</span></div></li><li class="li1"><div class="de1">  <span class="co0"># Restrict access to the server...</span></div></li><li class="li1"><div class="de1">  Order allow,deny</div></li><li class="li1"><div class="de1">  Allow from 192.168.56.11</div></li><li class="li1"><div class="de1"><span class="sy0">&lt;/</span>Location<span class="sy0">&gt;</span></div></li></ol></pre>
<ul>
<li class="level1"><div class="li"> Si volem restringir, a més de l’accés de certes màquines, l’accés a usuaris o grups, hem de fer servir les directives <em>require</em>:</div>
</li>
</ul>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="sy0">&lt;</span>Location <span class="sy0">/</span>admin<span class="sy0">&gt;</span></div></li><li class="li1"><div class="de1">  Require user josep <span class="sy0">@</span>admin</div></li><li class="li1"><div class="de1"><span class="sy0">&lt;/</span>Location<span class="sy0">&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sy0">&lt;</span>Location <span class="sy0">/</span><span class="kw3">jobs</span><span class="sy0">&gt;</span></div></li><li class="li1"><div class="de1">  Require user <span class="sy0">@</span>professors</div></li><li class="li1"><div class="de1"><span class="sy0">&lt;/</span>Location<span class="sy0">&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sy0">&lt;</span>Location <span class="sy0">/</span>printers<span class="sy0">&gt;</span></div></li><li class="li1"><div class="de1">  Require valid-user</div></li><li class="li1"><div class="de1"><span class="sy0">&lt;/</span>Location<span class="sy0">&gt;</span></div></li></ol></pre>

<p>
Amb aquestes directives es permet accedir a tota l’administració a l’usuari Josep i al grup d’administradors, mentre que al grup de professors només se’ls permet gestionar els treballs d’impressió, i qualsevol usuari correctament identificat pot gestionar únicament les impressores i classes.
</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="canvi_d_opcions_d_impressora" >Canvi d&#039;opcions d&#039;impressora</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és realitzar canvis en la configuració de les opcions d’impressió, tant en treballs concrets com deixant els canvis com a configuració per defecte. Per fer aquesta tasca es demanen les activitats següents:
</p>
<ul>
<li class="level1"><div class="li"> Imprimir des de consola un arxiu d’imatge en paper de mida A5 apaïsat.</div>
</li>
<li class="level1"><div class="li"> Que tots els usuaris de la màquina tinguin com a opcions predeterminades mida de paper A4 amb marge esquerra d’una polsada.</div>
</li>
<li class="level1"><div class="li"> Que tots els clients de la xarxa tinguin la impressora configurada per a una resolució de 150 punts per polsada.</div>
</li>
</ul>

<p>
<form action=""><div class="solution ioccontent">
<p>
Si no teniu cap impressora instal·lada es pot fer la pràctica amb la impressora virtual PDF i comprovant després el resultat accedint als arxius d’impressió PDF generats, que en principi trobarem al directori ~/PDF.
</p>

<p>
Per imprimir un treball determinat canviant la configuració per defecte de la impressora farem servir la opció <em>-o</em> de l’ordre d’impressió <em>lp</em>:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="kw2">lp</span> <span class="re5">-d</span> PDF <span class="re5">-o</span> landscape <span class="re5">-o</span> <span class="re2">media</span>=A5 imatge.jpg</div></li></ol></pre>

<p>
Aquesta ordre imprimirà l’arxiu d’imatge en format DIN A5 apaïsat. Si heu fet servir la impressora virtual PDF podreu comprovar el resultat visualitzant l’arxiu <code>~/PDF/imatge.pdf</code>.
</p>

<p>
Perquè l’ordre afecti tots els usuaris de la màquina cal que l’usuari administrador faci servir l’ordre <em>loptions</em>, que crearà/modificarà l’arxiu de configuració general <code>/etc/cups/loptions</code>:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">lpoptions <span class="re5">-d</span> PDF <span class="re5">-o</span> <span class="re2">media</span>=A4 page-right=<span class="nu0">72</span></div></li></ol></pre>

<p>
Després d’aquesta ordre, totes les impressions quedaran afectades per aquesta configuració i el contingut de l’arxiu <code>/etc/cups/loptions</code> serà el següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ <span class="kw2">cat</span> <span class="sy0">/</span>etc<span class="sy0">/</span>cups<span class="sy0">/</span>lpoptions </div></li><li class="li1"><div class="de1">Default PDF <span class="re2">media</span>=A4 page-right=<span class="nu0">72</span> <span class="re2">PageSize</span>=Letter</div></li></ol></pre>

<p>
Finalment, si volem que la configuració afecti a qualsevol client de la xarxa caldrà modificar l’arxiu PPD mitjançant l’ordre <em>lpadmin</em>.
</p>

<p>
Podem comprovar la configuració de resolució original de l’arxiu mitjançant:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="kw2">cat</span> <span class="sy0">/</span>etc<span class="sy0">/</span>cups<span class="sy0">/</span>ppd<span class="sy0">/</span>PDF.ppd<span class="sy0">|</span><span class="kw2">grep</span> <span class="st0">&quot;DefaultResolution&quot;</span></div></li><li class="li1"><div class="de1"><span class="sy0">*</span>DefaultResolution: 300dpi</div></li></ol></pre>

<p>
Veiem que la resolució per defecte és de 300 punts per polsada. Després de l’ordre
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">lpadmin <span class="re5">-p</span> PDF <span class="re5">-o</span> <span class="re2">ppi</span>=<span class="nu0">150</span></div></li></ol></pre>

<p>
si tornem a veure el contingut de l’arxiu, podrem constatar que la resolució per defecte ha canviat i ara afectarà a tots els usuaris locals o remots del servidor:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="kw2">cat</span> <span class="sy0">/</span>etc<span class="sy0">/</span>cups<span class="sy0">/</span>ppd<span class="sy0">/</span>PDF.ppd<span class="sy0">|</span><span class="kw2">grep</span> <span class="st0">&quot;Resolution&quot;</span></div></li><li class="li1"><div class="de1"><span class="sy0">*</span>DefaultResolution: 150dpi</div></li></ol></pre>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u1/a3/continguts.html">Administració de servidors d'impressió</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u1/a3/exercicis.html">Exercicis</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
