<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html">
        
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Xarxes d'àrea local</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Xarxes d'àrea local">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html">Xarxes d'àrea local</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u3" class="parentnode"><p><a class="unit" href="../../../WebContent/u3/introduccio.html">3. Interconnexió de la xarxa</a></p><ul class="expander"><li id="u3introduccio"><a href="../../../WebContent/u3/introduccio.html">Introducció</a></li><li id="u3objectius"><a href="../../../WebContent/u3/objectius.html">Resultats d'aprenentatge</a></li><li id="u3referencies"><a href="../../../WebContent/u3/referencies.html">Referències</a></li><li id="u3resum"><a href="../../../WebContent/u3/resum.html">Resum</a></li><li id="u3a1" class="tocsection"><p id='u3a1continguts'><a class="section" href="../../../WebContent/u3/a1/continguts.html">Adreçament físic i lògic de la xarxa</a><span class="buttonexp"></span></p><ul><li id="u3a1activitats"><a href="../../../WebContent/u3/a1/activitats.html">Activitats</a></li><li id="u3a1annexos"><a href="../../../WebContent/u3/a1/annexos.html">Annexos</a></li><li id="u3a1exercicis"><a href="../../../WebContent/u3/a1/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u3a1' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u3/a1/continguts.html#adrecament_fisic">Adreçament físic</a></li><li><a href="../../../WebContent/u3/a1/continguts.html#adrecament_logic">Adreçament lògic</a></li></ul></div></div><li id="u3a2" class="tocsection"><p id='u3a2continguts'><a class="section" href="../../../WebContent/u3/a2/continguts.html">Protocols de nivell d'enllaç</a><span class="buttonexp"></span></p><ul><li id="u3a2exercicis"><a href="../../../WebContent/u3/a2/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u3a2' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u3/a2/continguts.html#serveis_de_la_capa_d_enllac">Serveis de la capa d'enllaç</a></li><li><a href="../../../WebContent/u3/a2/continguts.html#ieee_802">IEEE 802</a></li></ul></div></div><li id="u3a3" class="tocsection"><p id='u3a3continguts'><a class="section" href="../../../WebContent/u3/a3/continguts.html">Protocols de xarxa</a><span class="buttonexp"></span></p><ul><li id="u3a3activitats"><a href="../../../WebContent/u3/a3/activitats.html">Activitats</a></li><li id="u3a3annexos"><a href="../../../WebContent/u3/a3/annexos.html">Annexos</a></li><li id="u3a3exercicis"><a href="../../../WebContent/u3/a3/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u3a3' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u3/a3/continguts.html#funcions_dels_protocols_de_xarxa">Funcions dels protocols de xarxa</a></li><li><a href="../../../WebContent/u3/a3/continguts.html#ip_internet_protocol">IP (Internet protocol)</a></li><li><a href="../../../WebContent/u3/a3/continguts.html#l_icmp">L'ICMP</a></li><li><a href="../../../WebContent/u3/a3/continguts.html#arp">ARP</a></li><li><a href="../../../WebContent/u3/a3/continguts.html#ipx">IPX</a></li></ul></div></div><li id="u3a4" class="tocsection"><p id='u3a4continguts'><a class="section" href="../../../WebContent/u3/a4/continguts.html">Adreçament IP</a><span class="buttonexp"></span></p><ul><li id="u3a4activitats"><a href="../../../WebContent/u3/a4/activitats.html">Activitats</a></li><li id="u3a4exercicis"><a href="../../../WebContent/u3/a4/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u3a4' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u3/a4/continguts.html#encapcalament_ip">Encapçalament IP</a></li><li><a href="../../../WebContent/u3/a4/continguts.html#classes_d_adreca_ipv4">Classes d'adreça IPv4</a></li><li><a href="../../../WebContent/u3/a4/continguts.html#creacio_de_subxarxes_o_subneeting">Creació de subxarxes o subneeting</a></li><li><a href="../../../WebContent/u3/a4/continguts.html#adrecament_public_i_privatnat">Adreçament públic i privat: NAT</a></li><li><a href="../../../WebContent/u3/a4/continguts.html#el_protocol_ipv6">El protocol IPv6</a></li></ul></div></div><li id="u3a5" class="tocsection"><p id='u3a5continguts'><a class="section" href="../../../WebContent/u3/a5/continguts.html">Protocols de la capa de transport</a><span class="buttonexp"></span></p><ul><li id="u3a5activitats"><a href="../../../WebContent/u3/a5/activitats.html">Activitats</a></li><li id="u3a5exercicis"><a href="../../../WebContent/u3/a5/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u3a5' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u3/a5/continguts.html#funcions_de_la_capa_de_transport">Funcions de la capa de transport</a></li><li><a href="../../../WebContent/u3/a5/continguts.html#serveis_orientats_a_connexiointercanvi_de_senyals_a_tres_passes">Serveis orientats a connexió: intercanvi de senyals a tres passes</a></li><li><a href="../../../WebContent/u3/a5/continguts.html#protocols_de_capa_de_transport_i_ports">Protocols de capa de transport i ports</a></li></ul></div></div><li id="u3a6" class="tocsection"><p id='u3a6continguts'><a class="section" href="../../../WebContent/u3/a6/continguts.html">Protocols de la capa d'aplicació</a><span class="buttonexp"></span></p><ul><li id="u3a6activitats"><a href="../../../WebContent/u3/a6/activitats.html">Activitats</a></li><li id="u3a6exercicis"><a href="../../../WebContent/u3/a6/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u3a6' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u3/a6/continguts.html#model_client-servidor">Model client-servidor</a></li><li><a href="../../../WebContent/u3/a6/continguts.html#assignacio_automatica_d_adreces_ipbootp_i_dhcp">Assignació automàtica d'adreces IP: BOOTP i DHCP</a></li><li><a href="../../../WebContent/u3/a6/continguts.html#noms_de_hosts_i_dns">Noms de hosts i DNS</a></li><li><a href="../../../WebContent/u3/a6/continguts.html#altres_protocols_i_serveissmtp_pop_telnet_ftp_http_ntp_etc">Altres protocols i serveis: SMTP, POP, Telnet, FTP, HTTP, NTP, etc</a></li><li><a href="../../../WebContent/u3/a6/continguts.html#servidors_intermediaris">Servidors intermediaris</a></li><li><a href="../../../WebContent/u3/a6/continguts.html#utilitats_tcp_ip">Utilitats TCP/IP</a></li></ul></div></div></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../introduccio.html">Interconnexió de la xarxa</a></li><li>Adreçament IP</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="adrecament_ip"> Adreçament IP </a></h1>
    	
<p>
L’adreçament IP es fa servir per poder identificar ordinadors i d’altres dispositius. Aquest es basa, per una banda, en la pròpia direcció del equip que l’identifica quan es comunica amb la resta d’equips i la màscara de xarxa que permet saber si un altre equip amb el que ens hem de comunicar esta dins de la mateixa xarxa o bé cal fer ús d’algun encaminador per tal de d’establir-hi una comunicació.
</p>

<p>
En el cas que la direcció amb la qual ens haguem de comunicar no estigui directament connectat al equip, caldrà consultar la taula de rutes. En aquesta taula hi constaran les xarxes per les quals haguem de passar per algun encaminador en concret i finalment una entrada amb el nostre encaminador per defecte.
</p>

<h2><a id="encapcalament_ip" >Encapçalament IP</a></h2>
<div class="level2">

<p>
Tota la informació que es vol transmetre s’ha d’empaquetar en <em>datagrames</em>, unitats que es transmetran per la xarxa. Perquè arribin a la destinació, cal empaquetar la informació mitjançant el protocol IP, el qual hi afegeix uns camps de control anomenats <em>encapçalaments</em> que contenen tota la informació de la màquina d’origen i de destinació.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Un dels camps més importants a l’hora de transmetre la informació per Internet és l’<strong>encapçalament IP</strong>: el protocol hi afegeix una sèrie de dades importants perquè pugui circular per la xarxa i arribar a la destinació.
</p>
</div></div>
<p>
Com veiem en la <span class="figref"><a href="#Figure19"><span>figura</span></a></span>, l’encapçalament IP està format per diferents camps:
</p>
<div class="iocnote"><div class="ioccontent">
<p>
IPHL: <em>IP head length</em>.
</p>
</div></div><div class="iocfigure"><a name="Figure19"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Encapçalament IP

</figcaption><img src="../media/ic10m5u3_23.png" alt="" /></figure>
</div><ul>
<li class="level1"><div class="li"> <strong>Versió</strong>: és un camp de quatre bits que indica la versió del protocol. Per paquets IPv4 es faria servir el valor 4 i de la mateixa manera seria el 6 si el paquet és IPv6.</div>
</li>
<li class="level1"><div class="li"> <strong>IHL</strong>: indica la longitud de l’encapçalament IP. Serveix per saber en quin punt exacte comencen les dades que es volen transmetre.</div>
</li>
<li class="level1"><div class="li"> <strong>Tipus de servei</strong> (<em>type of service</em>): especifica la qualitat de servei desitjada per aquest paquet, utilitzant 8 bits (<span class="figref"><a href="#Figure20"><span>figura</span></a></span>).</div>
</li>
</ul>
<div class="iocfigure"><a name="Figure20"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Tipus de servei

</figcaption><img src="../media/ic10m5u3_24.png" alt="" /></figure>
</div>
<p>
Els significats dels bits del tipus de servei i un exemple d’ús, els podeu veure a la <span class="tabref"><a href="#Table2"><span>taula</span></a></span> i <span class="tabref"><a href="#Table3"><span>taula</span></a></span>, respectivament.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Significat dels bits</p>
<p>
D = 1 Poc retard T = 1 Cabal alt R = 1 Fiabilitat alta M = 1 Cost econòmic baix
</p>
</div></div><div class="ioctable ">
<div class="titletable"><a name="Table2"><span>Taula: </span></a>Significat dels bits del tipus de servei</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0"> D </th><th class="col1"> T </th><th class="col2"> R </th><th class="col3"> M </th><th class="col4 leftalign">                             </th>
	</tr>
	<tr class="row1">
		<td class="col0"> 0 </td><td class="col1"> 0 </td><td class="col2"> 0 </td><td class="col3"> 0 </td><td class="col4 leftalign"> Defecte                     </td>
	</tr>
	<tr class="row2">
		<td class="col0"> 0 </td><td class="col1"> 0 </td><td class="col2"> 0 </td><td class="col3"> 1 </td><td class="col4"> Minimitzar el cost monetari </td>
	</tr>
	<tr class="row3">
		<td class="col0"> 0 </td><td class="col1"> 0 </td><td class="col2"> 1 </td><td class="col3"> 0 </td><td class="col4 leftalign"> Maximitzar la fiabilitat    </td>
	</tr>
	<tr class="row4">
		<td class="col0"> 0 </td><td class="col1"> 1 </td><td class="col2"> 0 </td><td class="col3"> 0 </td><td class="col4 leftalign"> Maximitzar el cabal         </td>
	</tr>
	<tr class="row5">
		<td class="col0"> 1 </td><td class="col1"> 0 </td><td class="col2"> 0 </td><td class="col3"> 0 </td><td class="col4 leftalign"> Minimitzar el retard        </td>
	</tr>
	<tr class="row6">
		<td class="col0"> 1 </td><td class="col1"> 1 </td><td class="col2"> 1 </td><td class="col3"> 1 </td><td class="col4 leftalign"> Maximitzar la seguretat     </td>
	</tr>
</table></div>
</div><div class="ioctable ">
<div class="titletable"><a name="Table3"><span>Taula: </span></a>Exemple de l’ús dels bits del tipus de servei</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign">             </th><th class="col1"> D </th><th class="col2"> T </th><th class="col3"> R </th><th class="col4"> M </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> TELNET      </td><td class="col1"> 1 </td><td class="col2"> 0 </td><td class="col3"> 0 </td><td class="col4"> 0 </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <acronym title="File Transfer Protocol">FTP</acronym> control </td><td class="col1"> 1 </td><td class="col2"> 0 </td><td class="col3"> 0 </td><td class="col4"> 0 </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <acronym title="File Transfer Protocol">FTP</acronym> dades   </td><td class="col1"> 0 </td><td class="col2"> 1 </td><td class="col3"> 0 </td><td class="col4"> 0 </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> SNMP        </td><td class="col1"> 0 </td><td class="col2"> 0 </td><td class="col3"> 1 </td><td class="col4"> 0 </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> NNTP        </td><td class="col1"> 0 </td><td class="col2"> 0 </td><td class="col3"> 0 </td><td class="col4"> 1 </td>
	</tr>
</table></div>
</div><ul>
<li class="level1"><div class="li"> <strong>Longitud total</strong> (<em>total lenght</em>): especifica la longitud total del paquet incloent-hi les dades i l’encapçalament.</div>
</li>
<li class="level1"><div class="li"> <strong>Identificació</strong> (<em>identification</em>): identifica el número de seqüència del datagrama. En el cas que el paquet es divideixi en fragments més petits per circular per una xarxa que tingui una unitat de transmissió més petita, identifica el número de fragment per tal de reconstruir el paquet original al arribar a la destinació.</div>
</li>
<li class="level1"><div class="li"> <strong>Assenyalador</strong> (<em>flags</em>): és un camp de tres bits (<span class="figref"><a href="#Figure21"><span>figura</span></a></span>) en què els dos bits de menys pes controlen la fragmentació dels paquets. Un bit identifica si el paquet es pot fragmentar, i l’altre si és l’últim fragment de paquet o no.</div>
</li>
</ul>
<div class="iocfigure"><a name="Figure21"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Utilització dels assenyaladors

</figcaption><img src="../media/ic10m5u3_25.png" alt="" /></figure>
</div><ul>
<li class="level1"><div class="li"> <strong>Desplaçament de fragment</strong> (<em>fragment offset</em>): Indica la posició que ocupa el fragment actual en el paquet original mitjançant 13 bits.</div>
</li>
<li class="level1"><div class="li"> <strong>Temps de vida</strong> (<em>Time To Live</em>): aquest camp determina el temps de vida del paquet o, dit d’una altra manera, els salts (passos per encaminadors) que pot fer un paquet. Cada vegada que travessa un encaminador, el valor que hi ha en aquest camp es decrementa en una unitat. Aquest camp és necessari perquè no quedin paquets voltant per la xarxa sense trobar la destinació.</div>
</li>
<li class="level1"><div class="li"> <strong>Protocol</strong>: indica quin protocol de capa superior ha generat el paquet. Els protocols que pot utilitzar són els que es poden veure en la <span class="tabref"><a href="#Table4"><span>taula</span></a></span>.</div>
</li>
</ul>
<div class="ioctable ">
<div class="titletable"><a name="Table4"><span>Taula: </span></a>Alguns codis dels protocols que pot encapsular el protocol IP</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> <strong>Decimal</strong>  </th><th class="col1 leftalign"> <strong>Hexadecimal</strong>  </th><th class="col2 leftalign"> <strong>Protocol</strong>  </th><th class="col3 leftalign"> <strong>Descripció</strong>  </th>
	</tr>
	<tr class="row1">
		<td class="col0"> 1 </td><td class="col1"> 01 </td><td class="col2"> ICMP </td><td class="col3"> Protocol de missatges de control per Internet (<em>Internet control message protocol</em>) </td>
	</tr>
	<tr class="row2">
		<td class="col0"> 2 </td><td class="col1"> O2 </td><td class="col2"> IGMP </td><td class="col3"> Protocol d’administració del grup Internet (<em>Internet group management protocol</em>) </td>
	</tr>
	<tr class="row3">
		<td class="col0"> 3 </td><td class="col1"> 03 </td><td class="col2"> GGP </td><td class="col3"> Protocol de passarel·la a passarel·la (<em>gateway- to-gateway protocol</em>) </td>
	</tr>
	<tr class="row4">
		<td class="col0"> 4 </td><td class="col1"> 04 </td><td class="col2"> IP </td><td class="col3"> Protocol d’Internet </td>
	</tr>
	<tr class="row5">
		<td class="col0"> 6 </td><td class="col1"> 06 </td><td class="col2"> TCP </td><td class="col3"> Protocol de control de transmissió (<em>transmission control protocol</em>) </td>
	</tr>
	<tr class="row6">
		<td class="col0"> 8 </td><td class="col1"> 08 </td><td class="col2"> EGP </td><td class="col3"> Protocol de passarel·la exterior (<em>exterior gateway protocol</em>) </td>
	</tr>
	<tr class="row7">
		<td class="col0"> 9 </td><td class="col1"> 09 </td><td class="col2"> IGP </td><td class="col3"> Protocol de passarel·la interior (<em>interior gateway protocol</em>) </td>
	</tr>
	<tr class="row8">
		<td class="col0"> 17 </td><td class="col1"> 11 </td><td class="col2"> UDP </td><td class="col3"> Protocol de datagrama d’usuari (<em>user datagram protocol</em>) </td>
	</tr>
	<tr class="row9">
		<td class="col0"> 29 </td><td class="col1"> 1D </td><td class="col2"> ISO-TP4 </td><td class="col3"> ISO transport protocol 4 </td>
	</tr>
	<tr class="row10">
		<td class="col0"> 88 </td><td class="col1"> 58 </td><td class="col2"> IGRP </td><td class="col3"> Internet gateway routing protocol (Cisco) </td>
	</tr>
	<tr class="row11">
		<td class="col0"> 89 </td><td class="col1"> 59 </td><td class="col2"> OSPFIGP </td><td class="col3"> Open shortest paht first protocol </td>
	</tr>
</table></div>
</div><ul>
<li class="level1"><div class="li"> <strong>Suma de verificació d’encapçalament</strong> (<em>header checksum</em>): bits de control per saber si existeix algun error de transmissió en l’encapçalament del paquet IP.</div>
</li>
<li class="level1"><div class="li"> <strong>Adreça d’origen</strong> (<em>source address</em>): especifica l’adreça de la màquina que ha generat el paquet.</div>
</li>
<li class="level1"><div class="li"> <strong>Adreça de destinació</strong> (<em>destination address</em>): especifica l’adreça de la màquina a la qual es volen enviar les dades.</div>
</li>
<li class="level1"><div class="li"> <strong>Opcions i farciment</strong> (<em>options and padding</em>): les opcions, si n’hi ha, permeten que admeti seguretat, o longitud variable. En el farciment s’hi afegeix zeros perquè l’encapçalament sigui múltiple de 32 bits.</div>
</li>
</ul>

<p>
Després d’aquest encapçalament es troben les dades que es volen transmetre.
</p>

</div>

<h2><a id="classes_d_adreca_ipv4" >Classes d&#039;adreça IPv4</a></h2>
<div class="level2">

<p>
L’adreça IP és un nombre de 32 bits que identifica cada una de les màquines que estan connectades a Internet o a qualsevol xarxa, i també la xarxa a la qual estan connectades. Una part de l’adreça IP, segons la seva màscara de xarxa, serveix per identificar la xarxa, sent el tros restant de la direcció IP la que identifica la màquina (<span class="figref"><a href="#Figure22"><span>figura</span></a></span>).
</p>
<div class="iocfigure"><a name="Figure22"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

IP dividida en xarxa i ordinador

</figcaption><img src="../media/ic10m5u3_26.png" alt="" /></figure>
</div>
<p>

</p>

<p>
Per poder separar el camp que identifica la xarxa del camp que identifica la màquina, s’ha d’aplicar una màscara de xarxa. És a dir, al aplicar la operació lògica <strong>AND</strong> entre la màscara de xarxa i l’adreça IP s’obté la xarxa. 
</p>

<p>
La notació de l’adreça IP són quatre xifres menors o iguals a 255 separades per punts. Per poder calcular l’adreça de xarxa caldrà passar les quatre xifres de forma independent a binari. Per exemple l’adreça 192.168.2.23 en binari seria:
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Operació AND</p>
<p>
Una operació lògica AND té com a resultat: <code>0 AND 0 = 0 0 AND 1 = 0 1 AND 0 = 0 1 AND 1 = 1</code>
</p>
</div></div><pre class="code">192.168.2.23 = 11000000.10101000.00000010.00010111</pre>

<p>
La màscara de xarxa resulta molt més simple ja que sempre seran un conjunt de uns al principi i en algun punt canviaran a zeros:
</p>
<pre class="code">255.255.0.0 = 11111111.11111111.00000000.00000000</pre>

<p>
Els valors possibles de la màscara de xarxa són els que es mostren a la <span class="tabref"><a href="#Table5"><span>taula</span></a></span>.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table5"><span>Taula: </span></a>Valors possibles de la màscara de xarxa</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0"> Valor en decimal </th><th class="col1"> Valor en binari </th>
	</tr>
	<tr class="row1">
		<td class="col0"> 255 </td><td class="col1"> <code>11111111</code> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> 254 </td><td class="col1"> <code>11111110</code> </td>
	</tr>
	<tr class="row3">
		<td class="col0"> 252 </td><td class="col1"> <code>11111100</code> </td>
	</tr>
	<tr class="row4">
		<td class="col0"> 248 </td><td class="col1"> <code>11111000</code> </td>
	</tr>
	<tr class="row5">
		<td class="col0"> 240 </td><td class="col1"> <code>11110000</code> </td>
	</tr>
	<tr class="row6">
		<td class="col0"> 224 </td><td class="col1"> <code>11100000</code> </td>
	</tr>
	<tr class="row7">
		<td class="col0"> 192 </td><td class="col1"> <code>11000000</code> </td>
	</tr>
	<tr class="row8">
		<td class="col0"> 128 </td><td class="col1"> <code>10000000</code> </td>
	</tr>
	<tr class="row9">
		<td class="col0"> 0 </td><td class="col1"> <code>00000000</code> </td>
	</tr>
</table></div>
</div>
<p>
Aplicant l’operació lògica AND, s’obté el següent resultat:
</p>
<pre class="code">11000000.10101000.00000010.00010111 ^ 11111111.11111111.00000000.00000000 =
= 11000000.10101000.00000000.00000000</pre>

<p>
D’aquest resultat s’obté l’adreça de xarxa, en binari <code>11000000.10101000.00000000.00000000</code>, és a dir, <code>192.168.0.0</code> en decimal. Per tant, el valor dels dos últims octets és l’identificador de l’equip.
</p>

<p>
Depenent de la quantitat de bits que s’utilitzin per identificar la xarxa, es classifica dintre d’un tipus o d’una altra.
</p>

<p>
Hi ha tres classes principals d’adreces IP:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Adreça de classe A</strong>: el primer octet identifica la xarxa.</div>
</li>
<li class="level1"><div class="li"> <strong>Adreça de classe B</strong>: els dos primers octets identifiquen la xarxa.</div>
</li>
<li class="level1"><div class="li"> <strong>Adreça de classe C</strong>: els tres primers octets identifiquen la xarxa.</div>
</li>
</ul>

<p>
A més de dues classes addicionals que es tracten per separat:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Adreça de classe D</strong>: Es tracta d’un conjunt d’adreces reservades per multidifusió. </div>
</li>
<li class="level1"><div class="li"> <strong>Adreça de classe E</strong>: Es tracta d’una classe reservada.</div>
</li>
</ul>

</div>

<h3><a id="adreca_de_classe_a" >Adreça de classe A</a></h3>
<div class="level3">

<p>
En una adreça de classe A el primer octet identifica la xarxa i el bit que pesa més sempre té el valor de 0. Els 7 bits següents identifiquen la xarxa, i la resta de bits —és a dir, 24— identifiquen les màquines connectades. Aquesta combinació fa que la primera xarxa sigui la <code>0.0.0.0</code> i l’última, la <code>127.255.255.255</code>. Amb adreces de classe A es poden implementar poques xarxes, però cada xarxa pot incloure molts equips.
</p>
<div class="iocreference"><div class="ioccontent">
<p>
Una adreça de multidifusió té com a destinataris un subconjunt dels possibles destinataris de la xarxa.  <em>Multidifusió</em> és el mateix que <em>multicast</em> o <em>difusió selectiva</em>, que es veu a l’apartat “Adreça de classe D”.
</p>
</div></div>
<p>
Si s’utilitzen 7 bits per identificar les xarxes, podreu obtenir 2<sup>7</sup> xarxes (128 xarxes), a cada una de les quals es poden connectar 2<sup>24</sup>-2 màquines (concretament, 16.777.214 màquines).
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Adreça de classe A</p>
<p>
Es poden implementar poques xarxes i molts equips per cada xarxa. <br/>
Xarxes &lt; 128 <br/>
Dispositius &gt; 65.535
</p>
</div></div><div class="iocimportant"><div class="ioccontent">
<p>
Amb una adreça de classe A, es poden implementar 128 xarxes i connectar-hi uns 16 milions d’ordinadors. Aquesta adreça utilitza el primer octet com a identificador de xarxa i el bit de més pes sempre és 0.
</p>
</div></div>
<p>
Si teniu l’adreça IP <code>68.127.23.4</code> i voleu comprovar de quin tipus d’adreça es tracta, només cal agafar el primer octet, en aquest cas el 68, i fer la conversió a binari (<span class="figref"><a href="#Figure23"><span>figura</span></a></span>).
</p>
<div class="iocfigure"><a name="Figure23"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Adreça de classe A

</figcaption><img src="../media/ic10m5u3_27.png" alt="" /></figure>
</div>
<p>
Després de dividir 68 entre 2 ha quedat un nombre de 7 bits, tal com podeu veure a la <span class="figref"><a href="#Figure24"><span>figura</span></a></span>. Com que les adreces IP es basen en octets, cal afegir un bit amb valor 0 al bit que pesa més. Per tant, el nombre transformat que queda és el següent: <code>01000100</code>
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Recordeu</p>
<p>
Recordeu que per fer la conversió de decimal a binari cal començar a dividir el nombre entre 2 tantes vegades com faci falta. I que a l’hora de fer la transformació, cal agafar els bits des de l’última divisió fins a la primera: és a dir, l’últim resultat obtingut és el bit de més pes i el primer resultat obtingut és el bit de menys pes.
</p>
</div></div><div class="iocfigure"><a name="Figure24"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Transformació a binari del nombre 68

</figcaption><img src="../media/ic10m5u3_28.png" alt="" /></figure>
</div>
<p>

</p>

<p>
Com podeu comprovar, el bit que pesa més d’aquest octet té un valor de 0, que és precisament el que identifica que es tracta d’una adreça de classe A. Així doncs, la resta d’octets (<code>.127.23.4</code> en valor decimal) identifiquen dins de la xarxa l’ordinador del qual comproveu l’adreça IP.
</p>

<p>
Suposeu que teniu l’adreça <code>142.123.23.1</code> i voleu saber si es tracta d’una adreça de classe A. Heu de seguir el mateix procediment: agafar el primer camp de l’adreça IP i canviar-lo de base de decimal a binari (<span class="figref"><a href="#Figure25"><span>figura</span></a></span>).
</p>
<div class="iocfigure"><a name="Figure25"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Transformació a binari del nombre 142

</figcaption><img src="../media/ic10m5u3_29.png" alt="" /></figure>
</div>
<p>
El nombre obtingut és el <code>10001110</code>. Si observeu el bit que pesa més, comprovareu que té com a valor 1. Com que en les adreces de classe A el bit que pesa més ha de tenir un valor de 0, aquesta adreça no és de classe A.
</p>

<p>
Per saber de quin tipus d’adreça és aquesta IP, caldrà esperar i continuar llegint. Més endavant, sereu capaços de dir amb total seguretat de quin tipus d’adreça es tracta.
</p>

</div>

<h3><a id="adreca_de_classe_b" >Adreça de classe B</a></h3>
<div class="level3">

<p>
En una adreça de classe B  (<span class="figref"><a href="#Figure26"><span>figura</span></a></span>) els dos primer octets codifiquen les xarxes i del nombre total d’octets els dos que pesen més sempre valen 10. Els 14 bits següents s’utilitzen per identificar les xarxes. En aquest tipus d’adreça es fan servir 16 bits per identificar les màquines connectades. Aquesta combinació fa que la primera xarxa de classe B tingui el valor <code>128.0.0.0</code> i l’última adreça de classe B tingui el valor de <code>191.255.255.255</code>. El fet d’utilitzar adreces de classe B comporta que hi hagi més xarxes que amb una adreça de classe A, però per contra, cada adreça de classe B accepta menys màquines connectades.
</p>
<div class="iocfigure"><a name="Figure26"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Adreça de classe B

</figcaption><img src="../media/ic10m5u3_30.png" alt="" /></figure>
</div>
<p>
Si s’utilitzen 14 bits per identificar les xarxes, podreu obtenir 2<sup>14</sup> xarxes, és a dir, 16.384 xarxes. A cadascuna d’aquestes xarxes s’hi poden connectar  2<sup>16</sup>-2 màquines, en concret, 65.534 màquines.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Adreça de classe B</p>
<p>
Es pot implementar un nombre mitjà de xarxes i un nombre mitjà d’ordinadors a cada xarxa. <br/>
Xarxes &lt; 17.000 <br/>
Dispositius &lt; 65.535
</p>
</div></div><div class="iocimportant"><div class="ioccontent">
<p>
Amb una adreça de classe B, es poden implementar 16.384 xarxes i connectar-hi uns 65.000 ordinadors. Aquesta adreça utilitza els dos primers octets com a identificadors de xarxa i els dos bits que pesen més valen sempre 10.
</p>
</div></div>
<p>
Un exemple d’adreça de classe B podria ser la IP <code>185.23.145.233</code>. Si no esteu segurs que sigui una adreça de classe B, només cal que seguiu els mateixos passos que abans (<span class="figref"><a href="#Figure27"><span>figura</span></a></span>): agafeu el primer camp i comenceu la transformació a binari.
</p>

<p>
El resultat de la transformació de decimal a binari és <code>10111001</code>. Com en el cas de l’adreça de classe A, heu de buscar el bit que pesa més. Atès que en aquest cas és l’1, heu de buscar també el segon bit que pesa més, que com podeu comprovar, a la <span class="figref"><a href="#Figure27"><span>figura</span></a></span>, és el 0. És a dir, aquesta adreça comença per 10. Si repasseu les característiques de les adreces de classe B, comprovareu que comencen amb els dos bits que pesen més i tenen un valor de 10.
</p>
<div class="iocfigure"><a name="Figure27"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Transformació a binari del nombre 185

</figcaption><img src="../media/ic10m5u3_31.png" alt="" /></figure>
</div>
<p>
Podeu concloure que es tracta d’una adreça de classe B, que l’adreça de xarxa és <code>185.23</code> i que la resta de nombres corresponen a la numeració de l’ordinador del qual comproveu l’adreça IP.
</p>
<div class="ioctextl"><div class="ioccontent"><p class="ioctitle">Seguint l&#039;exemple de l&#039;adreça de classe A</p>
<p>
Podeu comprovar si l’adreça anterior, aquella que no és de classe A, correspon a una adreça de classe B. Només cal que recordeu de quina adreça es tractava.
</p>

<p>
L’adreça era <code>142.123.23.1</code> i havíeu arribat a la conclusió que no es tractava d’una adreça de classe A. Recordeu que el valor del primer octet de l’adreça en format binari era: <code>10001110</code>.
</p>

<p>
Si comproveu els dos bits que pesen més -ja que no es tractava d’una adreça de classe A-, comprovareu que el seu valor és 10. Aquesta dada s’ajusta a les característiques que havia de complir una adreça de classe B.
</p>
</div></div>
<p>

</p>
<div class="ioctextl"><div class="ioccontent"><p class="ioctitle">Un altre exemple</p>
<p>
Comproveu una altra adreça per veure el vostre domini en aquestes tasques. L’adreça que us proposem és la següent: IP <code>218.12.12.12</code>
</p>

<p>
La comprovació sempre segueix els mateixos passos; primer heu de fer la transformació (<span class="figref"><a href="#Figure28"><span>figura</span></a></span>):
</p>
<div class="iocfigure"><a name="Figure28"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Transformació a binari del nombre 218

</figcaption><img src="../media/ic10m5u3_32.png" alt="" /></figure>
</div>
<p>

<p>
Un cop teniu el nombre en binari -en aquest cas, el <code>11011010</code>-, heu de comprovar quins són els bits que pesen més: com podeu veure, el bit que pesa més és l’1, però el segon no és el 0 i, en conseqüència, aquesta adreça IP no és de classe B. De quina classe és? Segur que ho descobrireu més endavant.
</p>

</p>
</div></div>
</div>

<h3><a id="adreca_de_classe_c" >Adreça de classe C</a></h3>
<div class="level3">

<p>
En una adreça de classe C  (<span class="figref"><a href="#Figure29"><span>figura</span></a></span>) s’utilitzen els tres primers octets per identificar les xarxes i es dedica l’últim a la identificació d’ordinador. Els tres bits que pesen més de l’identificador de xarxa sempre tindran per valor <code>110</code>: la primera xarxa de classe C que es pot implementar tindrà l’adreça IP <code>192.0.0.0</code> i l’última serà la <code>223.255.255.255</code>. Aquest valor indica que es poden implementar moltes xarxes a les adreces de classe C, però també que es poden connectar poques màquines a cada xarxa.
</p>
<div class="iocfigure"><a name="Figure29"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Adreça de classe C

</figcaption><img src="../media/ic10m5u3_33.png" alt="" /></figure>
</div>
<p>
Si s’utilitzen 21 bits per identificar les xarxes, podreu obtenir 2<sup>21</sup> xarxes, és a dir, 2.097.152 xarxes. A cada una d’aquestes xarxes s’hi poden connectar 2<sup>8</sup>-2 màquines, és a dir, 254.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Adreça de classe C</p>
<p>
Es poden implementar moltes xarxes i molt pocs ordinadors a cada xarxa. <br/>
Xarxes &gt; 17.000 <br/>
Dispositius &lt; 256
</p>
</div></div><div class="iocimportant"><div class="ioccontent">
<p>
Amb una adreça de classe C, es poden implementar uns dos milions de xarxes i connectar-hi uns 256 ordinadors. Aquesta adreça empra els tres primers octets com a identificadors de xarxa i els tres bits que pesen sempre són <code>110</code>.
</p>
</div></div><div class="ioctextl"><div class="ioccontent"><p class="ioctitle">Exemples</p>
<p>
Com en els casos anteriors, en aquest també es posaran exemples d’adreces de classe C, com la següent: <code>92.3.23.54</code>.
</p>

<p>
Per comprovar si es tracta realment d’una adreça de classe C, els passos que heu de seguir són els mateixos que en els casos anteriors: transformar el primer camp de l’adreça IP a binari (veure <span class="figref"><a href="#Figure30"><span>figura</span></a></span>).
</p>
<div class="iocfigure"><a name="Figure30"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Transformació a binari del nombre 92

</figcaption><img src="../media/ic10m5u3_34.png" alt="" /></figure>
</div>
<p>

<p>
El resultat obtingut de la transformació és <code>1011100</code>. Com podeu comprovar, només són 7 bits i, per tant, heu afegir un 0 a la posició que pesa més i així tindreu el nombre <code>01011100</code>. Per comprovar si es tracta d’una adreça de classe C, heu de mirar el bit que pesa més.
</p>

<p>
Després de comprovar que aquest bit és el 0 i de repassar les característiques de les adreces IP, veieu que una adreça de classe C sempre comença amb la combinació de bits <code>110</code>. No és el cas de l’adreça IP que heu transformat, ja que comença per 0, i per tant, no és una adreça de classe C.
</p>

<p>
De quin tipus és, doncs? Si comproveu les característiques de les adreces IP vistes fins ara, comprovareu que les de classe A començaven amb un 0: per tant, aquesta adreça IP no és de classe C, sinó que és de classe A.
</p>

<p>
Comproveu l’adreça IP <code>192.3.23.54</code>. Amb el que heu après, podeu indicar també quina és la part de l’adreça IP que identifica la xarxa i quina part identifica els ordinadors.
</p>

<p>
Per saber quina part de l’adreça IP identifica la xarxa, el primer que cal esbrinar és el tipus d’adreça. Coneixent el tipus, podreu dir sense por d’equivocar-vos quina part de l’adreça IP identifica la xarxa.
</p>

<p>
Per començar, doncs, cal fer la transformació de decimal a binari (<span class="figref"><a href="#Figure31"><span>figura</span></a></span>), ja que aquesta és la manera més senzilla d’identificar el tipus d’adreça.
</p>

</p>
<div class="iocfigure"><a name="Figure31"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Transformació a binari del nombre 192

</figcaption><img src="../media/ic10m5u3_35.png" alt="" /></figure>
</div>
<p>

<p>
El primer camp de l’adreça IP en binari té el valor de <code>11000000</code> i, com podeu comprovar, l’inici de l’adreça IP en format binari és <code>110</code>. Si consulteu les característiques dels diferents tipus d’adreces IP, veureu que les de classe A comencen per <code>0</code>, les de classe B comencen per <code>10</code> i les de classe C, per <code>110</code>; per tant, la que ens ocupa és una adreça de classe C.
</p>

<p>
Comproveu ara quina part de l’adreça IP determina la xarxa i quina part determina l’identificador d’ordinador.
</p>

<p>
Si consulteu les característiques de l’adreça de classe C, podeu comprovar que els 21 bits que segueixen els tres primers identifiquen la xarxa i els últims 8 bits, l’ordinador. Per tant, a l’adreça teniu: Identificador de xarxa Identificador de l’estació de treball
</p>

<p>
En format binari seria de la manera següent: Identificador de xarxa Identificador de l’estació de treball. L’identificador de la xarxa és <code>192.3.23</code> i l’identificador de l’ordinador és <code>.5</code>.
</p>

</p>
</div></div>
</div>

<h3><a id="adreca_de_classe_d" >Adreça de classe D</a></h3>
<div class="level3">

<p>
L’adreça de classe D (<span class="figref"><a href="#Figure32"><span>figura</span></a></span>) es va crear per permetre difusió selectiva o <em>multicast</em> en una adreça IP. Una <strong>adreça de difusió selectiva</strong> és una adreça exclusiva de xarxa que dirigeix els paquets amb aquesta direcció de destinació cap a grups predefinits d’adreces IP. Per tant, una sola estació pot transmetre simultàniament un sol corrent de dades a múltiples receptors.
</p>

<p>
L’adreça de classe D es pot diferenciar de les altres gràcies als quatre bits de més pes, que en una adreça d’aquesta classe valen sempre <code>1110</code> i, per tant, són adreces de xarxa que comencen en el nombre <code>224.0.0.0</code> i acaben en el nombre <code>239.255.255.255</code>. Aquesta adreça utilitza els 28 bits restants com a adreça de difusió selectiva.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
<em>Multicast</em> és una forma de transmissió.
</p>
</div></div><div class="iocfigure"><a name="Figure32"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Adreça de classe D

</figcaption><img src="../media/ic10m5u3_36.png" alt="" /></figure>
</div><div class="iocimportant"><div class="ioccontent">
<p>
L’adreça de classe D no té cap octet dedicat a la xarxa ni cap de dedicat a l’identificador d’ordinador perquè és una adreça de difusió selectiva. S’ha de tenir en compte que es pot diferenciar una adreça de classe D de les altres mitjançant els quatre primers bits, que sempre tindran el valor de <code>1110</code>.
</p>
</div></div><div class="iocnote"><div class="ioccontent">
<p>
Les adreces de classe D estan reservades per a adreces de difusió selectiva.
</p>
</div></div>
</div>

<h3><a id="adreca_de_classe_e" >Adreça de classe E</a></h3>
<div class="level3">

<p>
Les adreces de classe E (<span class="figref"><a href="#Figure33"><span>figura</span></a></span>) són adreces IP que s’han reservat per a usos futurs. Normalment l’IEFF (Comitè d’Experts en Enginyeria d’Internet o <em>Internet Engineering Task Force</em>) les fa servir per investigar i, per tant, no s’ha donat cap adreça de classe E per poder-la utilitzar a Internet.
</p>

<p>
De totes maneres, s’identificarà una adreça de classe E de la mateixa manera que s’identifiquen les altres: per mitjà dels bits que pesen més. En el cas de l’adreça de classe E, els cinc primers bits que pesen més tenen un valor fix: <code>11110</code>. Tenint en compte que aquests bits no poden variar les adreces IP de classe E, van de l’adreça <code>240.0.0.0</code> fins a l’adreça <code>247.255.255.255</code>, i els 27 bits restants estan reservats.
</p>
<div class="iocfigure"><a name="Figure33"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Adreça de classe E

</figcaption><img src="../media/ic10m5u3_37.png" alt="" /></figure>
</div><div class="iocimportant"><div class="ioccontent">
<p>
Les adreces de classe E estan reservades per a usos futurs i de moment només les fa servir l’IEFT per investigar. Els cinc bits que pesen més tenen el valor de <code>11110</code>.
</p>
</div></div>
<p>
No és difícil adonar-se que una manera ràpida de conèixer la classe d’una adreça a partir de la seva notació decimal és mirar el primer octet i:
</p>
<ul>
<li class="level1"><div class="li"> Si es troba entre 0 i 127, és de classe A</div>
</li>
<li class="level1"><div class="li"> Si es troba entre 128 i 191, és de classe B</div>
</li>
<li class="level1"><div class="li"> Si es troba entre 192 i 223, és de classe C</div>
</li>
<li class="level1"><div class="li"> Si es troba entre 224 i 239, és de classe D</div>
</li>
<li class="level1"><div class="li"> Si es troba entre 240 i 247, és de classe E</div>
</li>
</ul>

</div>

<h3><a id="cidr_encaminament_sense_classe" >CIDR (encaminament sense classe)</a></h3>
<div class="level3">

<p>
Amb la ràpida expansió d’Internet va quedar clar que l’encaminament basat en classes no era suficient, és per això que l’any 1993 es va proposar la CIDR (<em>classless inter-domain routing</em>) que vol dir encaminament entre dominis sense classe. Gràcies a aquest sistema es millora el mètode amb el que s’interpreten les adreces IP a més de com s’encaminen els paquets.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
{Adreça IP} / {nombre de bits “1” en la màscara de subxarxa}
</p>
</div></div>
<p>
En lloc de parlar de classes es fa servir el nombre de bits a 1 de la màscara de xarxa per tal d’indicar la xarxa. Les classes A, B i C tindrien una màscara de xarxa amb 8, 16 i 24 bits a 1 respectivament. Per exemple, per tal de definir la xarxa que va del <code>192.168.0.0</code> a la <code>192.168.255.255</code> (seria una classe B) indiquem la IP i amb un barra els 16 bits a 1 de la màscara de xarxa. Per tant la notació seria: <code>192.168.0.0/16</code>
</p>

<p>
Per poder fer ús de CIDR, els encaminadors de la xarxa han de ser capaços d’interpretar adreces IP que no pertanyen a cap de les classes convencionals (A, B o C). Per aquest motiu, els encaminadors que fan ús de protocols antics d’encaminament, com ara RIPv1 (la primera versió de RIP), no donen suport a CIDR. Cal dir que <strong>RIPv2</strong> —és a dir, la segona versió de RIP— sí que <strong>suporta CIDR</strong>.
</p>

</div>

<h3><a id="espai_d_adreces_reservades" >Espai d&#039;adreces reservades</a></h3>
<div class="level3">

<p>
Hi ha certs conjunts d’IP que estan reservats per usos especials:
</p>
<ul>
<li class="level1"><div class="li"> Quan l’identificador d’equip és 0, es fa referència a la xarxa a la qual està connectat.</div>
</li>
<li class="level1"><div class="li"> Quan l’identificador d’equip són tot 1 vol dir totes les màquines; això seria una adreça de difusió (<em>broadcast</em>).</div>
</li>
<li class="level1"><div class="li"> Quan tota l’adreça són 0 indica totes les IPs de la màquina.</div>
</li>
<li class="level1"><div class="li"> Adreça de <em>loopback</em>. La xarxa 127.0.0.0/8 indica que el paquet es que a la mateixa màquina i retorna internament, es refereix sempre al equip local.</div>
</li>
<li class="level1"><div class="li"> Adreces privades. Són adreces que només es poden utilitzar dins d’una organització privada no encaminables. Els blocs d’adreces privades són els següents:</div>
<ul>
<li class="level2"><div class="li"> <code>10.0.0.0/8</code>: és una classe A que permet 2<sup>24</sup> hosts a la xarxa. Per la grandària que té se sol dividir en subxarxes.</div>
</li>
<li class="level2"><div class="li"> <code>172.16.0.0/12</code>: és una xarxa que admet fins a 2<sup>20</sup> equips connectats a la xarxa</div>
</li>
<li class="level2"><div class="li"> <code>192.168.0.0/16</code>: és una classe C que permet fins a 2<sup>16</sup> equips. Encara que sigui la més petita de les tres és la més comuna.</div>
</li>
</ul>
<div class="iocnote"><div class="ioccontent">
<p>
L’adreça <code>127.0.0.1</code> es refereix a la màquina mateixa.
</p>
</div></div></li>
</ul>

<p>
Gràcies a això, en diferents xarxes privades es poden repetir les mateixes adreces IP, sense que entrin en conflicte, ja que l’una no té visibilitat de l’altra.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Divisió en xarxes més petites</p>
<p>
La utilització de les adreces privades permet la creació de xarxes empresarials que es poden dividir per formar xarxes més petites que són més fàcils de manipular i controlar.
</p>
</div></div>
<p>
Per tal de tenir accés a Internet caldrà, doncs, fer ús de NAT per traduir les IP internes a una IP pública perquè des de l’altre extrem sembli que la IP és pública.
</p>

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10m5u3_38.png" class="imgB" title=" Xarxa d&#039;una empresa" alt=" Xarxa d&#039;una empresa" /></li><li><small> Xarxa d&#039;una empresa</small></li>
</ul></div>

</p>
<div class="iocexample"><div class="ioccontent"><p class="ioctitle">Exemple d&#039;espai d&#039;adreces reservades</p>
<p>
En la <span class="figref"><a href="#Figure34"><span>figura</span></a></span> podeu veure que hi ha dues empreses connectades a Internet per mitjà d’un servidor connectat a l’encaminador de sortida.
</p>
<div class="iocfigure"><a name="Figure34"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Xarxes privades

</figcaption><img src="../media/ic10m5u3_39.png" alt="" /></figure>
</div>
<p>

<p>
Les dues empreses tenen adreces IP de sortida a Internet diferents, tal com podeu apreciar, però en canvi, a les xarxes internes poden utilitzar les mateixes adreces IP. Quan un empleat de l’empresa 1 envia un paquet a Internet té l’adreça IP de l’emissor: IP <code>86.121.34.5</code>-, que és l’adreça IP amb què aquesta empresa surt a Internet.
</p>

</p>
</div></div>
</div>

<h3><a id="esgotament_de_les_adreces_ipv4" >Esgotament de les adreces IPv4</a></h3>
<div class="level3">

<p>
Totes les classes d’adreces vistes fins ara són adreces vàlides per navegar per Internet, però s’ha de tenir en compte que hi ha un grup d’adreces que tenen un valor especial perquè són adreces dedicades a usos especials o, dit amb altres paraules, són adreces reservades.
</p>

<p>
Les adreces IP de classe A, B, C, D i E utilitzen el protocol IPv4. Aquest protocol fa servir 32 bits per codificar cada adreça IP, cosa que significa que només hi pot haver uns quatre mil milions d’ordinadors connectats a Internet a tot el món suposant que s’empressin totes les adreces. Com ja hem dit, hi ha moltes adreces reservades i, per tant, a la pràctica aquesta quantitat es redueix exponencialment.
</p>

<p>
La realitat és que les adreces IP es van esgotant a mesura que el nombre de màquines connectades a Internet creix a un ritme exponencial: cada dia hi ha més gent que es vol connectar a Internet que abans no s’hi connectava. Això fa que les adreces IP actuals siguin insuficients per atendre totes les peticions.
</p>

<p>
Per solucionar aquest problema, apareix el protocol IPv6, que té l’avantatge que utilitza 128 bits per codificar les adreces IP. A diferència del protocol IPv4 -que escriu l’adreça en blocs de vuit bits separats per punts o en format decimal-, el protocol IPv6 l’escriu en blocs de 16 bits separats per dos punt o en format hexadecimal.
</p>
<div class="ioctextl"><div class="ioccontent"><p class="ioctitle">Adreça IPv4</p>
<p>
Descompon els 32 bits de la <span class="figref"><a href="#Figure35"><span>figura</span></a></span> en blocs de vuit bits separats per punts i en format decimal.
</p>
<div class="iocfigure"><a name="Figure35"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Adreça IPv4

</figcaption><img src="../media/ic10m5u3_40.png" alt="" /></figure>
</div>
<p>

<p>
Format decimal <code>33.134.193.3</code>
</p>

<p>
Format binari <code>00100001.10000110.11000001.00000011</code>
</p>

</p>
</div></div><div class="ioctextl"><div class="ioccontent"><p class="ioctitle">Adreça IPv6</p>
<p>
Descompon els 128 bits de la <span class="figref"><a href="#Figure36"><span>figura</span></a></span> en grups de 16 bits separats per dos punts o en format hexadecimal.
</p>
<div class="iocfigure"><a name="Figure36"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Adreça IPv6

</figcaption><img src="../media/ic10m5u3_41.png" alt="" /></figure>
</div>
<p>

<p>
Format hexadecimal <code>3FFE:1900:6545:3:230:F804:7EBF:12C2</code>
</p>

<p>
Format binari 
<code>0011111111111110 : 0001100100000000 : 0110010101000101 : 0000000000000011 : 0000001000110000 : 1111100000000100 : 0111111010111111 : 0001001011000010</code>
</p>

</p>
</div></div><div class="ioctextl"><div class="ioccontent"><p class="ioctitle">Recordatori</p>
<p>
Per passar d’hexadecimal a binari, cada dígit hexadecimal es substitueix per 4 bits amb la seva representació binària (zeros a l’esquerra inclosos) tenint en compte que A equival a 10, B equival a 11, C equival a 12, D equival a 13, E equival a 14 i F equival a 15.
</p>
</div></div>
</div>

<h2><a id="creacio_de_subxarxes_o_subneeting" >Creació de subxarxes o subneeting</a></h2>
<div class="level2">
<div class="iocimportant"><div class="ioccontent">
<p>
La <strong>creació de subxarxes</strong> o <em>subnetting</em> consisteix a dividir una xarxa gran en múltiples segments de xarxa o subxarxes. És habitual dividir xarxes en subxarxes segons criteris d’ubicació geogràfica (per exemple, pisos d’un edifici connectats per una <acronym title="Local Area Network">LAN</acronym> o diferents edificis connectats per una WAN), criteris departamentals (per exemple, una subxarxa per al departament de màrqueting, una altra per al de comptabilitat, etc.), criteris tecnològics (per exemple, Ethernet, anell de testimoni, etc.) o per funcionalitat dels servidors (servidor d’aplicacions, servidor de bases de dades, servidor de còpies de seguretat.
</p>
</div></div>
<p>
La creació de subxarxes permet aïllar el trànsit de cada xarxa, la qual cosa té els avantatges següents:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Millora la seguretat i el rendiment global</strong>. Les subxarxes s’han de connectar entre si mitjançant encaminadors o altres dispositius de la capa de xarxa. En la seva configuració habitual, aquests dispositius no deixen passar enviaments en difusió, la qual cosa permet un millor ús dels mitjans de transmissió i un control més fàcil dels paquets que circulen per la xarxa (en filtrar tots els paquets que no van destinats a la mateixa xarxa). </div>
</li>
<li class="level1"><div class="li"> <strong>Simplifica la resolució de problemes</strong>. En tenir la xarxa segmentada en petites subxarxes, resulta més fàcil identificar l’origen de possibles problemes de comunicació, que, d’altra banda, només afecten un segment concret i no tota la xarxa.</div>
</li>
</ul>

</div>

<h3><a id="mascara_de_subxarxapart_de_xarxa_i_part_de_host" >Màscara de subxarxa: part de xarxa i part de host</a></h3>
<div class="level3">

<p>
La màscara de subxarxa indica quina part de l’adreça IP identifica la xarxa i quina part identifica el <em>host</em>. En concret, quan es considera una adreça IP en binari i la corresponent màscara de xarxa en binari, la part de l’adreça IP que identifica a la xarxa és la que correspon a la part de valors 1 en la màscara de subxarxa associada, mentre que la part de l’adreça IP que identifica el <em>host</em> és la que correspon a la part de valors 0 en la màscara de xarxa associada.
</p>

<p>
La <span class="tabref"><a href="#Table6"><span>taula</span></a></span> mostra un exemple de com la màscara de subxarxa permet determinar la part de l’adreça IP que correspon a la xarxa i la part que correspon al <em>host</em>. En l’exemple, es té que l’adreça IP inicial, <code>199.34.89.123</code> fa referència al <em>host</em> de la xarxa que té <code>199.34.89.0</code> per adreça IP.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table6"><span>Taula: </span></a>Exemple d’ús d’una màscara de subxarxa estàndard</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<td class="col0 leftalign">                                                            </td><th class="col1 leftalign"> Binari                                                                                 </th><th class="col2 leftalign"> Decimal                                  </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> <strong>Adreça IP de host</strong>                                      </td><td class="col1 leftalign"> <code>11000111 00100010 01011001 01111011</code>                                                </td><td class="col2 leftalign"> <code>199.34.89.123</code>                        </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <strong>Màscara de subxarxa</strong>                                    </td><td class="col1 leftalign"> <code>11111111 11111111 11111111 00000000</code>                                                </td><td class="col2 leftalign"> <code>255.255.255.0</code>                        </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <strong>Part de xarxa</strong>                                          </td><td class="col1 leftalign"> <code>11000111 00100010 01011001</code>                                                         </td><td class="col2 leftalign"> <code>199.34.89.</code>                           </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <strong>Part del host</strong>                                          </td><td class="col1 leftalign"> <code>01111011</code>                                                                           </td><td class="col2 leftalign"> <code>.123</code>                                 </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <strong>Adreça IP de xarxa</strong>                                     </td><td class="col1 leftalign"> <code>11000111 00100010 01011001 00000000</code>                                                </td><td class="col2 leftalign"> <code>199.34.89.0</code>                          </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <strong>Adreça IP de difusió</strong>                                   </td><td class="col1 leftalign"> <code>11000111 00100010 01011001 11111111</code>                                                </td><td class="col2 leftalign"> <code>199.34.89.255</code>                        </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <strong>Rang d’adreces IP assignables a hosts en aquesta xarxa</strong> </td><td class="col1"> <code>11000111 00100010 01011001 00000001</code> fins a <code>11000111 00100010 01011001 11111110</code> </td><td class="col2"> <code>199.34.89.1</code> fins a <code>199.34.89.254</code> </td>
	</tr>
</table></div>
</div>
<p>
En l’exemple anterior s’ha fet servir la màscara de xarxa predeterminada per a una adreça IP de classe C (<code>255.255.255.0</code>), però el mateix seria vàlid si es fes ús d’una màscara de subxarxa no estàndard, tal com mostra la <span class="tabref"><a href="#Table7"><span>taula</span></a></span>. En aquest cas, en què la màscara de subxarxa conté dos bits 1 més que els corresponents a una màscara de xarxa de classe C (és a dir, s’han agafat dos bits més per a identificar la part de l’adreça IP que correspon a la xarxa), l’adreça IP inicial <code>199.34.89.123</code> fa referència al<em>host</em> 59 de la xarxa que té per adreça IP <code>199.34.89.64</code>.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table7"><span>Taula: </span></a>Exemple d’ús d’una màscara de subxarxa no estàndard</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<td class="col0 leftalign">                                                            </td><th class="col1 leftalign"> Binari                                                                             </th><th class="col2 leftalign"> Decimal                                   </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> <strong>Adreça IP de host</strong>                                      </td><td class="col1 leftalign"> <code>11000111 00100010 01011001 01111011</code>                                            </td><td class="col2 leftalign"> <code>199.34.89.123</code>                         </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <strong>Màscara de subxarxa</strong>                                    </td><td class="col1 leftalign"> <code>11111111 11111111 11111111 11000000</code>                                            </td><td class="col2 leftalign"> <code>255.255.255.192</code>                       </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <strong>Part de xarxa</strong>                                          </td><td class="col1 leftalign"> <code>11000111 00100010 01011001</code>                                                     </td><td class="col2 leftalign"> <code>199.34.89.64</code>                          </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <strong>Part del host</strong>                                          </td><td class="col1 leftalign"> <code>01111011</code>                                                                       </td><td class="col2 leftalign"> <code>.59</code>                                   </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <strong>Adreça IP de xarxa</strong>                                     </td><td class="col1 leftalign"> <code>11000111 00100010 01011001 01000000</code>                                            </td><td class="col2 leftalign"> <code>199.34.89.64</code>                          </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <strong>Adreça IP de difusió</strong>                                   </td><td class="col1 leftalign"> <code>11000111 00100010 01011001 01111111</code>                                            </td><td class="col2 leftalign"> <code>199.34.89.127</code>                         </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <strong>Rang d’adreces IP assignables a hosts en aquesta xarxa</strong> </td><td class="col1"> <code>11000111 00100010 01011001 01000001</code> fins a <code>11000111 00100010 01011001 01111110</code> </td><td class="col2"> <code>199.34.89.65</code> fins a <code>199.34.89.126</code> </td>
	</tr>
</table></div>
</div>
</div>

<h3><a id="manipulacio_de_la_mascara_de_subxarxa" >Manipulació de la màscara de subxarxa</a></h3>
<div class="level3">

<p>
El procés de creació de subxarxes (<em>subnetting</em>) es fa manipulant les màscares de subxarxa de manera que tinguin més bits 1 per designar la part de l’adreça IP que correspon a la xarxa. En tenir més bits disponibles a la part de xarxa, es poden assignar més adreces IP de xarxa. 
</p>

<p>
Evidentment, com més bits s’agafin per formar la part de xarxa, menys bits quedaran per a la part del <em>host</em>, amb la qual cosa el nombre d’adreces IP disponibles per a <em>hosts</em> disminuirà. El nombre mínim de bits que es poden prendre de la part de <em>host</em> per assignar-los a la part de xarxa és de 2. D’altra banda, la part de <em>host</em> ha de tenir sempre un mínim de 2 bits assignats. 
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Agafar bits &quot;en préstec&quot;</p>
<p>
Se sol fer ús de l’expressió <em>agafar bits en préstec</em> de la màscara de subxarxa per indicar que es dediquen a la part de <em>xarxa</em> bits que inicialment estaven dedicats a la part de <em>host</em>.
</p>
</div></div>
<p>
La <span class="tabref"><a href="#Table8"><span>taula</span></a></span> mostra el nombre de subxarxes (i el nombre de <em>hosts</em> per xarxa) que es poden crear manipulant la màscara de xarxa d’una adreça IP de classe B. Cal recordar que, de manera predeterminada, una adreça IP de classe B reserva 16 bits per a la part de <em>host</em> (màscara de subxarxa <code>255.255.0.0</code>), per la qual cosa defineix una única xarxa amb 2<sup>16</sup>-2 = 65.534 nodes.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
El nombre d’equips que caben en una xarxa són determinats per 2<sup>N bits</sup> destinats als equips menys dues IP:
</p>
<ul>
<li class="level1"><div class="li"> La IP amb tots els bits que identifica l’equip estan a cero es fa servir per identificar la xarxa. Es pot configurar l’encaminador perquè sigui utilitzable, però és preferible no fer-ho.</div>
</li>
<li class="level1"><div class="li"> La IP amb tots els bits a 1 es fa servir per difusió.</div>
</li>
</ul>
</div></div><div class="ioctable ">
<div class="titletable"><a name="Table8"><span>Taula: </span></a>Creació de subxarxes a partir d’una adreça IP de classe B</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Màscara de subxarxa (binari)                    </th><th class="col1"> Màscara de subxarxa (decimal) </th><th class="col2 leftalign"> Nombre de subxarxes         </th><th class="col3"> Nombre de nodes per subxarxa </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> <code>11111111 11111111 <strong>11</strong>000000 00000000</code>     </td><td class="col1 leftalign"> <code>255.255.192.0</code>                 </td><td class="col2 leftalign"> 2<sup>2</sup> = 4       </td><td class="col3 leftalign"> 2<sup>14</sup> - 2 = 16.382  </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <code>11111111 11111111 <strong>111</strong>00000 00000000</code>     </td><td class="col1 leftalign"> <code>255.255.224.0</code>                 </td><td class="col2 leftalign"> 2<sup>3</sup> = 8       </td><td class="col3 leftalign"> 2<sup>13</sup> - 2 = 8.190   </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <code>11111111 11111111 <strong>1111</strong>0000 00000000</code>     </td><td class="col1 leftalign"> <code>255.255.240.0</code>                 </td><td class="col2 leftalign"> 2<sup>4</sup> = 16      </td><td class="col3 leftalign"> 2<sup>12</sup> - 2 = 4.094   </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <code>11111111 11111111 <strong>11111</strong>000 00000000</code>     </td><td class="col1 leftalign"> <code>255.255.248.0</code>                 </td><td class="col2 leftalign"> 2<sup>5</sup> = 32      </td><td class="col3 leftalign"> 2<sup>11</sup> - 2 = 2.046   </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <code>11111111 11111111 <strong>111111</strong>00 00000000</code>     </td><td class="col1 leftalign"> <code>255.255.252.0</code>                 </td><td class="col2 leftalign"> 2<sup>6</sup> = 64      </td><td class="col3 leftalign"> 2<sup>10</sup> - 2 = 1.022   </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <code>11111111 11111111 <strong>1111111</strong>0 00000000</code>     </td><td class="col1 leftalign"> <code>255.255.254.0</code>                 </td><td class="col2 leftalign"> 2<sup>7</sup> = 128     </td><td class="col3 leftalign"> 2<sup>9</sup> - 2 = 510      </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <code>11111111 11111111 <strong>11111111</strong> 00000000</code>     </td><td class="col1 leftalign"> <code>255.255.255.0</code>                 </td><td class="col2 leftalign"> 2<sup>8</sup> = 256     </td><td class="col3 leftalign"> 2<sup>8</sup> - 2 = 254      </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <code>11111111 11111111 <strong>11111111</strong> <strong>1</strong>0000000</code> </td><td class="col1 leftalign"> <code>255.255.255.128</code>               </td><td class="col2 leftalign"> 2<sup>9</sup> = 512     </td><td class="col3 leftalign"> 2<sup>7</sup> - 2 = 126      </td>
	</tr>
	<tr class="row9">
		<td class="col0"> <code>11111111 11111111 <strong>11111111</strong> <strong>11</strong>000000</code> </td><td class="col1 leftalign"> <code>255.255.255.192</code>               </td><td class="col2 leftalign"> 2<sup>10</sup> = 1.024  </td><td class="col3 leftalign"> 2<sup>6</sup> - 2 = 62       </td>
	</tr>
	<tr class="row10">
		<td class="col0"> <code>11111111 11111111 <strong>11111111</strong> <strong>111</strong>00000</code> </td><td class="col1 leftalign"> <code>255.255.255.224</code>               </td><td class="col2 leftalign"> 2<sup>11</sup> = 2.048  </td><td class="col3 leftalign"> 2<sup>5</sup> - 2 = 30       </td>
	</tr>
	<tr class="row11">
		<td class="col0"> <code>11111111 11111111 <strong>11111111</strong> <strong>1111</strong>0000</code> </td><td class="col1 leftalign"> <code>255.255.255.240</code>               </td><td class="col2 leftalign"> 2<sup>12</sup> = 4.096  </td><td class="col3 leftalign"> 2<sup>4</sup> - 2 = 14       </td>
	</tr>
	<tr class="row12">
		<td class="col0"> <code>11111111 11111111 <strong>11111111</strong> <strong>11111</strong>000</code> </td><td class="col1 leftalign"> <code>255.255.255.248</code>               </td><td class="col2 leftalign"> 2<sup>13</sup> = 8.192  </td><td class="col3 leftalign"> 2<sup>3</sup> - 2 = 6        </td>
	</tr>
	<tr class="row13">
		<td class="col0"> <code>11111111 11111111 <strong>11111111</strong> <strong>111111</strong>00</code> </td><td class="col1 leftalign"> <code>255.255.255.252</code>               </td><td class="col2"> 2<sup>14</sup> = 16.384 </td><td class="col3 leftalign"> 2<sup>2</sup> - 2 = 2        </td>
	</tr>
</table></div>
</div>
</div>

<h3><a id="exemple_de_creacio_de_subxarxes" >Exemple de creació de subxarxes</a></h3>
<div class="level3">

<p>
Es vol segmentar una xarxa de classe C amb IP <code>199.34.89.0</code> en sis subxarxes (una per cada departament de la institució o empresa on està instal·lada la xarxa).
</p>

<p>
Una manera de fer-ho seria la següent: atès que es necessitaran sis subxarxes, caldrà “agafar en préstec” 3 bits de la part de <em>host</em> de la IP anterior i passar-los a la part de xarxa (ens cal agafar un mínim de 3 bits, ja que 2<sup>3</sup> = 8 (i 8 ≥ 6). Això vol dir que la nova màscara de subxarxa serà <code>11111111 11111111 11111111 11100000</code>, és a dir, <code>255.255.255.224</code>.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Nombre de subxarxes</p>
<p>
Per calcular el nombre de subxarxes (<em>n</em>) que es poden formar amb <em>m</em> bits (<em>m</em> &gt; 1), s’aplica la fórmula següent: <em>n</em> = 2<sup>m</sup> on 2<sup>m</sup> és el nombre d’adreces possibles que es poden formar amb <em>m</em> bits. En alguns dispositius antics (avui en dia molt pocs), a aquesta quanitat cal restar-hi 2, ja que no poden utilitzar les adreces de xarxa i difusió. 
</p>
</div></div>
<p>
D’altra banda, com que només quedaran 5 bits disponibles per a la part de <em>host</em>, cadascuna de les sis subxarxes podrà tenir un màxim de 2<sup>5</sup>-2 = 30 nodes (és a dir, hi haurà 30 adreces IP disponibles per a <em>hosts</em> entre l’adreça IP de cada subxarxa i l’adreça IP de difusió de cada subxarxa). La <span class="tabref"><a href="#Table9"><span>taula</span></a></span> mostra la informació associada al procés de creació de subxarxes així com a cadascuna de les sis subxarxes creades.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table9"><span>Taula: </span></a>Creació de sis subxarxes a partir d’una xarxa de classe C</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<td class="col0 leftalign">                                       </td><th class="col1 leftalign"> Binari                                  </th><th class="col2 leftalign"> Decimal             </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> <strong>Adreça IP xarxa inicial</strong>           </td><td class="col1"> <code>11000111 00100010 01011001 00000000</code> </td><td class="col2 leftalign"> <code>199.34.89.0</code>     </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <strong>Màscara de subxarxa inicial</strong>       </td><td class="col1"> <code>11111111 11111111 11111111 00000000</code> </td><td class="col2 leftalign"> <code>255.255.255.0</code>   </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <strong>Nova màscara de subxarxa</strong>          </td><td class="col1"> <code>11111111 11111111 11111111 11100000</code> </td><td class="col2"> <code>255.255.255.224</code> </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <strong>Subxarxa 1: adreça IP de subxarxa</strong> </td><td class="col1"> <code>11000111 00100010 01011001 00100000</code> </td><td class="col2 leftalign"> <code>199.34.89.32</code>    </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <strong>Subxarxa 1: adreça IP de difusió</strong>  </td><td class="col1"> <code>11000111 00100010 01011001 00111111</code> </td><td class="col2 leftalign"> <code>199.34.89.63</code>    </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <strong>Subxarxa 2: adreça IP de subxarxa</strong> </td><td class="col1"> <code>11000111 00100010 01011001 01000000</code> </td><td class="col2 leftalign"> <code>199.34.89.64</code>    </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <strong>Subxarxa 2: adreça IP de difusió</strong>  </td><td class="col1"> <code>11000111 00100010 01011001 01011111</code> </td><td class="col2 leftalign"> <code>199.34.89.95</code>    </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <strong>Subxarxa 3: adreça IP de subxarxa</strong> </td><td class="col1"> <code>11000111 00100010 01011001 01100000</code> </td><td class="col2 leftalign"> <code>199.34.89.96</code>    </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign"> <strong>Subxarxa 3: adreça IP de difusió</strong>  </td><td class="col1"> <code>11000111 00100010 01011001 01111111</code> </td><td class="col2 leftalign"> <code>199.34.89.127</code>   </td>
	</tr>
	<tr class="row10">
		<td class="col0"> <strong>Subxarxa 4: adreça IP de subxarxa</strong> </td><td class="col1"> 1<code>1000111 00100010 01011001 10000000</code> </td><td class="col2 leftalign"> <code>199.34.89.128</code>   </td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign"> <strong>Subxarxa 4: adreça IP de difusió</strong>  </td><td class="col1"> <code>11000111 00100010 01011001 10011111</code> </td><td class="col2 leftalign"> <code>199.34.89.159</code>   </td>
	</tr>
	<tr class="row12">
		<td class="col0"> <strong>Subxarxa 5: adreça IP de subxarxa</strong> </td><td class="col1"> <code>11000111 00100010 01011001 10100000</code> </td><td class="col2 leftalign"> <code>199.34.89.160</code>   </td>
	</tr>
	<tr class="row13">
		<td class="col0 leftalign"> <strong>Subxarxa 5: adreça IP de difusió</strong>  </td><td class="col1"> <code>11000111 00100010 01011001 10111111</code> </td><td class="col2 leftalign"> <code>199.34.89.191</code>   </td>
	</tr>
	<tr class="row14">
		<td class="col0"> <strong>Subxarxa 6: adreça IP de subxarxa</strong> </td><td class="col1"> <code>11000111 00100010 01011001 11000000</code> </td><td class="col2 leftalign"> <code>199.34.89.192</code>   </td>
	</tr>
	<tr class="row15">
		<td class="col0 leftalign"> <strong>Subxarxa 6: adreça IP de difusió</strong>  </td><td class="col1"> <code>11000111 00100010 01011001 11011111</code> </td><td class="col2 leftalign"> <code>199.34.89.223</code>   </td>
	</tr>
</table></div>
</div>
<p>
La <span class="figref"><a href="#Figure37"><span>figura</span></a></span> mostra un esquema que il·lustra el resultat del procés de creació de subxarxes descrit.
</p>
<div class="iocfigure"><a name="Figure37"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Exemple de creació de subxarxes

</figcaption><img src="../media/ic10m5u3_42.png" alt="" /></figure>
</div>
<p>
L’encaminador central connecta els diferents segments de xarxa mitjançant les seves interfícies (una per cada segment o subxarxa), cadascuna de les quals té la seva pròpia adreça IP. Així, per exemple, quan el <em>host</em> <code>199.34.89.34</code> vol enviar dades al <em>host</em> <code>199.34.89.126</code>, l’encaminador utilitza l’adreça IP de destinació i de la màscara de subxarxa <code>255.255.255.224</code> per determinar l’adreça IP de la subxarxa de destinació i el <em>host</em> corresponent. Per contra, quan un encaminador situat a Internet intenta enviar dades al <em>host</em> <code>192.34.89.126</code>, només ha de saber l’adreça IP pública de l’encaminador de la xarxa, que és <code>192.34.89.1</code> amb màscara de subxarxa <code>255.255.255.0</code> (és a dir, no fa ús de la màscara de subxarxa manipulada). És l’encaminador de la xarxa qui s’encarrega d’aplicar la màscara de subxarxa <code>255.255.255.224</code> per enviar les dades al node destinatari.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Alguns llocs web proporcionen informació i eines per automatitzar els càlculs per la creació de subxarxes. Cercant a Internet per termes com ara <em>network calculator</em> o <em>subnet calculator</em>.
</p>
</div></div>
</div>

<h2><a id="adrecament_public_i_privatnat" >Adreçament públic i privat: NAT</a></h2>
<div class="level2">

<p>
Una de les tècniques per afrontar l’esgotament de les adreces IPv4 és el NAT (<em>network address translation</em>), però té un ús que va més enllà, ja que mitjançant NAT podem fer que xarxes amb direccionament en conflicte pugui establir una comunicació.
</p>

<p>
<strong>1. El NAT bàsic</strong>
</p>

<p>
El NAT més simple només té en compte la IP d’origen, que sempre es tradueix en una altra IP (NAT estàtic) o conjunt d’IP (NAT dinàmic) d’una altra xarxa. En aquest cas, els ports TCP (protocol de transport) no es tenen en compte i, per tant, el NAT bàsic només opera a la capa de xarxa.
</p>

<p>
<strong>2. El PAT</strong>
</p>

<p>
El PAT és el tipus més usat de NAT: no solament actua en la capa de xarxa, sinó també en la capa de transport traduint els ports TCP i UDP.  Mitjançant aquesta tècnica, podem tenir un conjunt de màquines en una xarxa privada que surten a Internet amb una mateixa adreça IP, però amb un port diferent. 
</p>
<div class="iocnote"><div class="ioccontent">
<p>
La sigla <em>PAT</em> significa ‘traducció d’adreces per port’ (<em>port address translation</em>).
</p>
</div></div>
<p>
Cada paquet TCP i UDP conté tant l’adreça IP de l’equip d’origen com la del receptor, a més del port d’origen i del port de destinació. En el cas de l’extrem públic, és important mantenir el port destinació, ja que els serveis escolten un port concret; per exemple, un servidor web normalment escolta el port 80 i, per tant, en el costat de la xarxa a la qual s’accedeix no es pot modificar el port, però el port d’origen no ha de ser necessàriament un port fix, sinó que pot variar.
</p>

<p>
Per tant, el dispositiu encarregat de fer el PAT ha de mantenir una taula amb el port que es fa servir per a la connexió en l’extrem de la xarxa a la qual es vol connectar i relacionar-lo amb la connexió que s’origina en la xarxa que emmascaren, i resoldre els possibles conflictes de ports que s’originin en la xarxa.
</p>

<p>
Per exemple, tal com podeu veure en la <span class="figref"><a href="#Figure38"><span>figura</span></a></span>, suposem que la màquina <code>192.168.1.1</code> vol establir una connexió amb la IP pública <code>1.1.1.1</code> pel port 80. Aquest ordinador amfitrió triarà un port aleatori per establir-la; per exemple, el 9876. El dispositiu PAT escollirà un altre port; per exemple, el 5432, i enviarà un paquet amb la seva IP pública (<code>1.2.3.4</code>) al port de destinació <code>1.1.1.1:80</code>. Quan al dispositiu PAT hi arribi un paquet amb destinació el port 5432, consultarà la taula i l’enviarà a la màquina de la xarxa privada <code>192.168.1.1</code> que ha iniciat la connexió.
</p>
<div class="iocfigure"><a name="Figure38"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Exemple de PAT 

</figcaption><img src="../media/ic10m5u3_43.png" alt="" /></figure>
</div>
</div>

<h2><a id="el_protocol_ipv6" >El protocol IPv6</a></h2>
<div class="level2">

<p>
La definició del protocol IPv6 es pot trobar en l’<acronym title="Request for Comments">RFC</acronym> 2460 (1998). La característica més destacada és l’augment de les adreces IP de 2<sup>32</sup> a 2<sup>128</sup>. Aquest increment d’adreces permet que qualsevol dispositiu pugui disposar d’una IP fixa pròpia, ja que cada persona del planeta podria disposar de diversos milions d’adreces IPv6. L’espai d’adreces és tan gran que, per cada metre quadrat de la terra, hi pot haver 6·10<sup>23</sup> adreces IPv6, aproximadament.
</p>

</div>

<h3><a id="adreces_ipv6" >Adreces IPv6</a></h3>
<div class="level3">

<p>
Les adreces IPv6 s’assignen a interfícies, no a nodes. Un mateix node pot tenir interfícies diferents i, per tant, diverses adreces úniques vàlides per identificar el node. Fins i tot, un únic adaptador de xarxa podria tenir interfícies virtuals diferents i, cadascuna, una adreça única. Això, combinat amb la gran quantitat d’adreces possibles per a una adreça de 128 bits, permet simplificar l’encaminament. Com que es poden agrupar les adreces per jerarquies, proveïdors, proximitat, etc., les taules d’encaminament es poden simplificar per fer-les més petites i, per tant, més ràpides.
</p>
<div class="ioctextl"><div class="ioccontent"><p class="ioctitle">Adreça IPv6</p>
<p>
Format hexadecimal  <code>3FFE : 1900 : 6545 : 3 : 230 : F804 : 7EBF : 12C2</code>
</p>

<p>
Format binari 
<code>0011111111111110 : 0001100100000000 : 0110010101000101 : 0000000000000011 : 0000001000110000 : 1111100000000100 : 0111111010111111 : 0001001011000010</code>
</p>
</div></div>
<p>
Hi ha tres tipus principals d’adreces IPv6:
</p>
<ul>
<li class="level1"><div class="li"> Distribució a una única destinació (<em>unicast</em>).</div>
</li>
<li class="level1"><div class="li"> Distribució a un única destinació d’un conjunt de destinacions possibles (<em>anycast</em>). Una petició dirigida a una IP <em>anycast</em> s’encamina al node més proper dintre de tots els nodes rèplica que existeixin.</div>
</li>
<li class="level1"><div class="li"> Distibució múltiple (<em>multicast</em>). Es lliura a totes les adreces dins d’aquest grup de multidistribució.<br/>
El prefix que tindrà sempre és <code>ff00::</code>.</div>
</li>
</ul>

<p>
Els termes <em>distribució múltiple</em>, <em>multicast</em>, <em>multidistribució</em> i <em>multidifusió</em> són equivalents.
</p>

<p>
Els dos punts dobles (<strong>::</strong>) signifiquen que entre <strong>:</strong> i <strong>:</strong> va un grup de tants zeros com dígits hi falten per a completar l’adreça.
</p>

<p>
Les adreces especials són les següents:
</p>
<ul>
<li class="level1"><div class="li"> L’adreça dels rangs privats en adreces IPv6 (enllaç local o <em>link local</em>) té el prefix <code>fe80::</code>.</div>
</li>
<li class="level1"><div class="li"> L’adreça de retrobucle (<em>loopback</em>) que en la IPv4 era <code>127.0.0.1</code> passa a ser <code>::1</code>.</div>
</li>
</ul>

</div>

<h3><a id="caracteristiques_de_la_nova_versio" >Característiques de la nova versió</a></h3>
<div class="level3">

<p>
A part de l’augment d’adreces IP, també s’han introduït altres millores al protocol; les més detacades són:
</p>
<ul>
<li class="level1"><div class="li"> Autoconfiguració amb ICMPv6</div>
</li>
<li class="level1"><div class="li"> <em>Jumboframes</em></div>
</li>
<li class="level1"><div class="li"> Desaparició de la difusió</div>
</li>
</ul>

</div>

<h4><a id="autoconfiguracio_amb_icmpv6" >Autoconfiguració amb ICMPv6</a></h4>
<div class="level4">

<p>
Mitjançant el protocol de xarxa ICMPv6 (<acronym title="Request for Comments">RFC</acronym> 2461), es pot enviar un paquet a l’adreça d’enllaç de fusió anomenat <em>sol·licitud d’encaminador</em> (<em>router solicitation</em>) per demanar els paràmetres de configuració. En cas que l’encaminador estigui configurat per respondre aquests paquets, enviarà una resposta anomenada <em>anunci d’encaminador</em> (<em>router advertisement</em>) amb els paràmetres de configuració de la capa de xarxa.
</p>

<p>
Per obtenir altres paràmetres addicionals es pot fer servir el protocol DHCPv6.
</p>

</div>

<h4><a id="jumboframes" >Jumboframes</a></h4>
<div class="level4">

<p>
En la versió 4 del protocol IP un paquet podia contenir fins a 2<sup>16</sup>-1 octets de càrrega, mentre que la IPv6, mitjançant una extensió del protocol, permet enviar fins a 2<sup>32</sup>-1 IPv6 octets. Els paquets IPv6 que passen de 65.535 octets de càrrega s’anomenen <em>jumboframes</em>.
</p>

<p>
Evidentment, per poder enviar aquests paquets tan grans la capa d’enllaç ha de permetre-ho. Per tant, la capacitat d’enviar paquets grans queda relegada a la capacitat de la xarxa.
</p>

</div>

<h4><a id="desaparicio_de_la_difusio" >Desaparició de la difusió</a></h4>
<div class="level4">

<p>
En la IPv6, l’adreça més alta d’una xarxa no té cap significat especial, desapareix l’adreça de difusió i se substitueix per adreces de multidifusió. Per tant, ja no és possible enviar un paquet a tots els equips connectats a una xarxa.
</p>

<p>
Es pot obtenir la mateixa funcionalitat que l’adreça de difusió de la IPv4 mitjançant un grup de multidifusió que contingui tots els equips de la xarxa. Aquest grup sempre té l’adreça <code>FF01::1</code>.
</p>

</div>

<h3><a id="estructura_de_la_ipv6" >Estructura de la IPv6</a></h3>
<div class="level3">

<p>
L’estructura de la IPv6 s’ha pensat per ser més flexible que la definida per la IPv4. Inclou una capçalera obligatòria amb les dades bàsiques de 40 octets i, a continuació, pot tenir diverses capçaleres d’expansió. Aquesta capçalera inicial s’anomena <em>de la IPv6</em>, per simplificar-ho. S’han definit les capçaleres d’extensió següents:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Capçalera d’opcions salt-a-salt</strong>: conté opcions especials que cada salt ha d’examinar.</div>
</li>
<li class="level1"><div class="li"> <strong>Capçalera d’encaminament</strong>: conté informació per dirigir el paquet per un node intermedi, o més, abans d’arribar a la destinació.</div>
</li>
<li class="level1"><div class="li"> <strong>Capçalera de fragmentació</strong>: conté informació sobre la fragmentació.</div>
</li>
<li class="level1"><div class="li"> <strong>Capçalera d’autenticació</strong>: d’IPSec, s’integra a IPv6 i proporciona integritat i autenticació al paquet.</div>
</li>
<li class="level1"><div class="li"> <strong>Capçalera d’encapsulament de la càrrega de seguretat</strong>: d’IPSec, s’integra a IPv6 i proporciona seguretat a les dades enviades.</div>
</li>
<li class="level1"><div class="li"> <strong>Capçalera d’opcions per a la destinació</strong>: conté informació addicional perquè sigui examinada a la destinació.</div>
</li>
</ul>

<p>
L’estàndard IPv6 recomana un cert ordre en cas que es faci servir més d’una capçalera i prescriu que la IPv6 sempre ha d’anar primer:
</p>
<ol>
<li class="level1"><div class="li"> Capçalera IPv6.</div>
</li>
<li class="level1"><div class="li"> Capçalera d’opcions salt-a-salt.</div>
</li>
<li class="level1"><div class="li"> Capçalera d’opcions per a la destinació: opcions que s’han de processar en la primera destinació que apareix en el camp d’adreces IPv6 i les destinacions següents indicades en la capçalera d’encaminament.</div>
</li>
<li class="level1"><div class="li"> Capçalera d’encaminament.</div>
</li>
<li class="level1"><div class="li"> Capçalera de fragmentació. </div>
</li>
<li class="level1"><div class="li"> Capçalera d’autenticació.</div>
</li>
<li class="level1"><div class="li"> Capçalera de d’encapsulament de la càrrega de seguretat.</div>
</li>
<li class="level1"><div class="li"> Capçalera d’opcions per a la destinació: opcions que només ha de processar la destinació final del paquet.</div>
</li>
</ol>

</div>

<h4><a id="capcalera_ipv6" >Capçalera IPv6</a></h4>
<div class="level4">

<p>
La capçalera IPv6 té una longitud fixa de 40 octets, xifra que contrasta amb la capçalera IPv4, que només és de 20 octets. Els camps d’aquesta capçalera són: un total de 40 octets respecte als 20 octets de la capçalera IPv4.
</p>
<ul>
<li class="level1"><div class="li"> <strong>Versió (4 bits)</strong>: el valor d’aquest camp sempre ha de ser 6.</div>
</li>
<li class="level1"><div class="li"> <strong>Classe de trànsit(8 bits)</strong>: camp que es fa servir per classificar el trànsit. Els 6 primers bits serveixen per classificar el trànsit i els 2 restants per a la prioritat.</div>
</li>
<li class="level1"><div class="li"> <strong>Etiqueta de flux (20 bits</strong>): camp creat per donar un tracte especial a les aplicacions de temps real.</div>
</li>
<li class="level1"><div class="li"> <strong>Longitud de la càrrega (16 bits)</strong>: indica la longitud de la resta del paquet IPv6 en octets, excloent-ne la capçalera.</div>
</li>
<li class="level1"><div class="li"> <strong>Capçalera següent (8 bits)</strong>: indica el tipus de la capçalera següent.</div>
</li>
<li class="level1"><div class="li"> <strong>Límit de salts (8 bits)</strong>: s’ha canviat el nom al TTL, ja que els encaminadors no solen calcular el temps que tarda un paquet a transmetre’s, sinó el nombre de salts que fa.</div>
</li>
<li class="level1"><div class="li"> <strong>Adreça d’origen (128 bits)</strong>: adreça de l’equip que origina el paquet.</div>
</li>
<li class="level1"><div class="li"> <strong>Adreça de destinació (128 bits)</strong>: adreça de l’equip al qual va destinat el paquet.</div>
</li>
</ul>

<p>
La capçalera IPv6, tot i que és més gran, disposa de menys camps que la capçalera IPv4 i no té una suma de verificació (<em>checksum</em>). Això està fet així perquè si un encaminador ha de modificar la capçalera (per exemple per canviar el valor del camp de límit de salts, és a dir, l’antic TTL), no hagi de recalcular la suma de verificació i, per tant, s’agilitzi l’encaminament.
</p>

</div>

<h4><a id="capcalera_d_opcions_salt-a-salt" >Capçalera d&#039;opcions salt-a-salt</a></h4>
<div class="level4">

<p>
La capçalera d’opcions salt-a-salt, si hi és present, porta informació addicional que cal que sigui examinada per tots els dispositius d’encaminament al llarg del camí. Els camps d’aquesta capçalera són:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Capçalera següent (8 bits)</strong>: indica el tipus de la capçalera següent.</div>
</li>
<li class="level1"><div class="li"> <strong>Longitud de la capçalera sense incloure els primers 64 bits (8 bits)</strong>: indica la mida d’aquesta capçalera, ja que és de longitud variable, en unitats de 64 bits, sense incloure-hi els primers 64 bits.</div>
</li>
<li class="level1"><div class="li"> <strong>Opcions</strong>: camp de longitud variable amb les definicions de les opcions. Cada definició d’opció consta de tres camps:</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Tipus d’opció (8 bits) per identificar l’opció.</div>
</li>
<li class="level2"><div class="li"> Longitud de l’opció (8 bits) en octets.</div>
</li>
<li class="level2"><div class="li"> Dades de l’opció.</div>
</li>
</ul>

</div>

<h4><a id="capcalera_de_fragmentacio" >Capçalera de fragmentació</a></h4>
<div class="level4">

<p>
En el cas de la IPv6, només pot fragmentar el node d’origen, mentre que en el cas de la IPv4 se n’encarreguen els dispositius encaminadors. Per enviar el paquet de la mida adequada, el node que origina el paquet ha de descobrir l’MTU de totes les xarxes de la ruta fins a la destinació per fragmentar les dades com calgui. Si no s’executa l’algorisme per descobrir l’MTU de la ruta, el node originant haurà de limitar la mida dels paquets a 1.280 octets. Aquesta és la mida mínima d’MTU que ha de permetre la xarxa perquè hi puguin circular paquets IPv6.
</p>

<p>
Els camps d’aquesta capçalera són els segünts:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Capçalera següent (8 bits)</strong>: indica el tipus de la capçalera que ve a continuació.</div>
</li>
<li class="level1"><div class="li"> <strong>Reservat (8 bits)</strong>: octets reservats que s’han d’inicialitzar a zero.</div>
</li>
<li class="level1"><div class="li"> <strong>Desplaçament del fragment (13 bits)</strong>: <em>offset</em> del fragment respecte al paquet original en unitats de 64 bits.</div>
</li>
<li class="level1"><div class="li"> <strong>Reservat (2 bits)</strong>: octets reservats que s’han d’inicialitzar a zero.</div>
</li>
<li class="level1"><div class="li"> <strong>Indicador de més fragments (1 bits)</strong>: indica que hi ha més fragments (bit a 1), o bé, si és l’últim fragment (bit a 0). És semblant al camp MF de la IPv4.</div>
</li>
<li class="level1"><div class="li"> <strong>Identificació (32 bits)</strong>: es fa servir per identificar d’una manera única el paquet original del fragment.</div>
</li>
</ul>

</div>

<h4><a id="capcalera_d_encaminament" >Capçalera d&#039;encaminament</a></h4>
<div class="level4">

<p>
La capçalera d’encaminament conté una llista d’un o més nodes intermedis per on es vol dirigir el paquet a la destinació. Aquesta capçalera comença amb 4 camps de 8 bits, seguits de les dades específiques del tipus d’encaminament. Els camps són:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Capçalera següent (8 bits)</strong>: indica el tipus de la capçalera que ve a continuació.</div>
</li>
<li class="level1"><div class="li"> <strong>Longitud de la capçalera d’extensió</strong> sense incloure-hi els primers 64 bits (8 bits).</div>
</li>
<li class="level1"><div class="li"> <strong>Tipus d’encaminament (8 bits)</strong>: identifica el tipus particular de capçalera. Pot ser 0, 1 i 2:</div>
<ul>
<li class="level2"><div class="li"> El tipus 0 és susceptible d’atac de denegació de servei; per tant, es considera obsolet.</div>
</li>
<li class="level2"><div class="li"> El tipus 1 es fa servir per a un projecte de l’agència americana DARPA.</div>
</li>
<li class="level2"><div class="li"> El tipus 2 és una versió restringida del tipus 0.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Segments que queden (8 bits) abans d’acabar aquesta capçalera.</div>
</li>
<li class="level1"><div class="li"> Dades del tipus d’encaminament: pot tenir una longitud variable.</div>
</li>
</ul>

</div>

<h4><a id="capcalera_d_opcions_per_a_la_destinacio" >Capçalera d&#039;opcions per a la destinació</a></h4>
<div class="level4">

<p>
La capçalera d’opcions per a la destinació és igual que la d’opcions salt-a-salt, però només l’ha d’examinar el node de destinació del paquet. Els camps són iguals:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Capçalera següent (8 bits)</strong>: indica el tipus de la capçalera següent.</div>
</li>
<li class="level1"><div class="li"> <strong>Longitud de la capçalera</strong> sense incloure-hi els primers 64 bits (8 bits).</div>
</li>
<li class="level1"><div class="li"> <strong>Opcions</strong>: camp de longitud variable amb les definicions de les opcions.</div>
</li>
</ul>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u3/a3/exercicis.html">Exercicis d'autoavaluació</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u3/a4/activitats.html">Activitats</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
