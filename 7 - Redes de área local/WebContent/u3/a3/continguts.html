<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html">
        
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Xarxes d'àrea local</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Xarxes d'àrea local">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html">Xarxes d'àrea local</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u3" class="parentnode"><p><a class="unit" href="../../../WebContent/u3/introduccio.html">3. Interconnexió de la xarxa</a></p><ul class="expander"><li id="u3introduccio"><a href="../../../WebContent/u3/introduccio.html">Introducció</a></li><li id="u3objectius"><a href="../../../WebContent/u3/objectius.html">Resultats d'aprenentatge</a></li><li id="u3referencies"><a href="../../../WebContent/u3/referencies.html">Referències</a></li><li id="u3resum"><a href="../../../WebContent/u3/resum.html">Resum</a></li><li id="u3a1" class="tocsection"><p id='u3a1continguts'><a class="section" href="../../../WebContent/u3/a1/continguts.html">Adreçament físic i lògic de la xarxa</a><span class="buttonexp"></span></p><ul><li id="u3a1activitats"><a href="../../../WebContent/u3/a1/activitats.html">Activitats</a></li><li id="u3a1annexos"><a href="../../../WebContent/u3/a1/annexos.html">Annexos</a></li><li id="u3a1exercicis"><a href="../../../WebContent/u3/a1/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u3a1' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u3/a1/continguts.html#adrecament_fisic">Adreçament físic</a></li><li><a href="../../../WebContent/u3/a1/continguts.html#adrecament_logic">Adreçament lògic</a></li></ul></div></div><li id="u3a2" class="tocsection"><p id='u3a2continguts'><a class="section" href="../../../WebContent/u3/a2/continguts.html">Protocols de nivell d'enllaç</a><span class="buttonexp"></span></p><ul><li id="u3a2exercicis"><a href="../../../WebContent/u3/a2/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u3a2' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u3/a2/continguts.html#serveis_de_la_capa_d_enllac">Serveis de la capa d'enllaç</a></li><li><a href="../../../WebContent/u3/a2/continguts.html#ieee_802">IEEE 802</a></li></ul></div></div><li id="u3a3" class="tocsection"><p id='u3a3continguts'><a class="section" href="../../../WebContent/u3/a3/continguts.html">Protocols de xarxa</a><span class="buttonexp"></span></p><ul><li id="u3a3activitats"><a href="../../../WebContent/u3/a3/activitats.html">Activitats</a></li><li id="u3a3annexos"><a href="../../../WebContent/u3/a3/annexos.html">Annexos</a></li><li id="u3a3exercicis"><a href="../../../WebContent/u3/a3/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u3a3' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u3/a3/continguts.html#funcions_dels_protocols_de_xarxa">Funcions dels protocols de xarxa</a></li><li><a href="../../../WebContent/u3/a3/continguts.html#ip_internet_protocol">IP (Internet protocol)</a></li><li><a href="../../../WebContent/u3/a3/continguts.html#l_icmp">L'ICMP</a></li><li><a href="../../../WebContent/u3/a3/continguts.html#arp">ARP</a></li><li><a href="../../../WebContent/u3/a3/continguts.html#ipx">IPX</a></li></ul></div></div><li id="u3a4" class="tocsection"><p id='u3a4continguts'><a class="section" href="../../../WebContent/u3/a4/continguts.html">Adreçament IP</a><span class="buttonexp"></span></p><ul><li id="u3a4activitats"><a href="../../../WebContent/u3/a4/activitats.html">Activitats</a></li><li id="u3a4exercicis"><a href="../../../WebContent/u3/a4/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u3a4' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u3/a4/continguts.html#encapcalament_ip">Encapçalament IP</a></li><li><a href="../../../WebContent/u3/a4/continguts.html#classes_d_adreca_ipv4">Classes d'adreça IPv4</a></li><li><a href="../../../WebContent/u3/a4/continguts.html#creacio_de_subxarxes_o_subneeting">Creació de subxarxes o subneeting</a></li><li><a href="../../../WebContent/u3/a4/continguts.html#adrecament_public_i_privatnat">Adreçament públic i privat: NAT</a></li><li><a href="../../../WebContent/u3/a4/continguts.html#el_protocol_ipv6">El protocol IPv6</a></li></ul></div></div><li id="u3a5" class="tocsection"><p id='u3a5continguts'><a class="section" href="../../../WebContent/u3/a5/continguts.html">Protocols de la capa de transport</a><span class="buttonexp"></span></p><ul><li id="u3a5activitats"><a href="../../../WebContent/u3/a5/activitats.html">Activitats</a></li><li id="u3a5exercicis"><a href="../../../WebContent/u3/a5/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u3a5' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u3/a5/continguts.html#funcions_de_la_capa_de_transport">Funcions de la capa de transport</a></li><li><a href="../../../WebContent/u3/a5/continguts.html#serveis_orientats_a_connexiointercanvi_de_senyals_a_tres_passes">Serveis orientats a connexió: intercanvi de senyals a tres passes</a></li><li><a href="../../../WebContent/u3/a5/continguts.html#protocols_de_capa_de_transport_i_ports">Protocols de capa de transport i ports</a></li></ul></div></div><li id="u3a6" class="tocsection"><p id='u3a6continguts'><a class="section" href="../../../WebContent/u3/a6/continguts.html">Protocols de la capa d'aplicació</a><span class="buttonexp"></span></p><ul><li id="u3a6activitats"><a href="../../../WebContent/u3/a6/activitats.html">Activitats</a></li><li id="u3a6exercicis"><a href="../../../WebContent/u3/a6/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u3a6' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u3/a6/continguts.html#model_client-servidor">Model client-servidor</a></li><li><a href="../../../WebContent/u3/a6/continguts.html#assignacio_automatica_d_adreces_ipbootp_i_dhcp">Assignació automàtica d'adreces IP: BOOTP i DHCP</a></li><li><a href="../../../WebContent/u3/a6/continguts.html#noms_de_hosts_i_dns">Noms de hosts i DNS</a></li><li><a href="../../../WebContent/u3/a6/continguts.html#altres_protocols_i_serveissmtp_pop_telnet_ftp_http_ntp_etc">Altres protocols i serveis: SMTP, POP, Telnet, FTP, HTTP, NTP, etc</a></li><li><a href="../../../WebContent/u3/a6/continguts.html#servidors_intermediaris">Servidors intermediaris</a></li><li><a href="../../../WebContent/u3/a6/continguts.html#utilitats_tcp_ip">Utilitats TCP/IP</a></li></ul></div></div></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../introduccio.html">Interconnexió de la xarxa</a></li><li>Protocols de xarxa</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="protocols_de_xarxa"> Protocols de xarxa </a></h1>
    	
<p>
El terme <em>protocol de xarxa</em> descriu tot el programari d’un ordinador que permet que les seves aplicacions utilitzin els recursos, però no són programes que es puguin instal·lar o esborrar. Aquests programes són diferents segons el sistema operatiu que es faci servir. Poden ser fitxers de suport, com les biblioteques de vincles dinàmics (DLL, <em>dynamic load library</em>) en els sistemes Windows, o poden estar integrats en el nucli o com un mòdul que es pot carregar en qualsevol moment, en el cas dels sistemes GNU/Linux. 
</p>

<p>
Tot i això, en adaptadors de gamma alta, certes parts dels protocols de xarxa s’implementen mitjançant microprogramari o xips dedicats per treure la càrrega que comporta aquesta feina al sistema operatiu.
</p>
<div class="iocfigure"><a name="Figure16"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Models OSI i TCP-IP

</figcaption><img src="../media/ic10m5u3_19.png" alt="" /></figure>
</div>
<p>
Els protocols de xarxa, que se situen en la capa 3 del model OSI (<span class="figref"><a href="#Figure16"><span>figura</span></a></span>), són els responsables de transmetre informació des d’un ordinador amfitrió (<em>host</em>) a un altre sense necessitat que aquests estiguin connectats directament: la informació viatja des de l’ordinador amfitrió origen fins al de destinació traspassant tants medis com calgui; per tant, també ha de ser capaç d’encaminar els paquets.
</p>

<h2><a id="funcions_dels_protocols_de_xarxa" >Funcions dels protocols de xarxa</a></h2>
<div class="level2">

<p>
En el cas que dos equips no estiguin connectats a la mateixa xarxa, cal definir un mecanisme perquè les dades es passin a uns nodes que fan d’intermediaris, anomenats <em>encaminadors</em>. Aquests nodes connecten dues xarxes o més i la funció principal és retransmetre dades d’una xarxa a una altra d’acord amb una ruta perquè els paquets arribin a la destinació.
</p>

<p>
<strong>1. Adreçament</strong>
</p>

<p>
La capa de xarxa ha de mantenir l’adreçament dels ordinadors amfitrions; d’una banda, per enviar dades entre ordinadors amfitrions que no estan connectats directament i, de l’altra, perquè els encaminadors estableixin la millor ruta entre els dos punts.
</p>

<p>
Per tant, cal identificar d’una manera única els ordinadors amfitrions i cal definir un sistema d’agrupar-los per afavorir que, quan els encaminadors que hi ha al mig dels dos extrems es comuniquin, siguin capaços de dirigir el trànsit eficientment.
</p>

<p>
<strong>2. Encaminament</strong>
</p>

<p>
Per passar dades entre un ordinador amfitrió i un altre cal definir un mecanisme d’encaminament perquè, cada cop que es passin les dades a l’encaminador següent, estigui més a prop del node final.
</p>

<p>
Els encaminadors són equips la funció principal dels quals és moure els paquets entre les xarxes a les quals estan connectats tenint en compte factors com la proximitat del node final o la saturació d’algun enllaç.
</p>

<p>
<strong>3. Tipus de ruta</strong>
</p>

<p>
Una altra de les funcions dels protocols de xarxa és definir una ruta entre els dos ordinadors amfitrions que s’han de comunicar. Es poden seguir dues estratègies:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Sense connexió</strong>: sense establir cap camí en concret, cada vegada que s’enviï un datagrama es decidirà el camí que es recorrerà.</div>
</li>
<li class="level1"><div class="li"> <strong>Circuit virtual</strong>: s’estableix inicialment un camí entre els dos equips i es reserven recursos per a aquest camí. Equivaldria a passar un cable d’extrem a extrem dedicat per aquests dos ordinadors amfitrions.</div>
</li>
</ul>

</div>

<h2><a id="ip_internet_protocol" >IP (Internet protocol)</a></h2>
<div class="level2">

<p>
La versió més usada actualment del protocol IP és la IPv4, definida en l’<acronym title="Request for Comments">RFC</acronym> 791 del 1981. Actualment ja disposa d’un successor, la IPv6, l’ús de la qual es va estenent progressivament.
</p>

<p>
Totes les  versions del protocol IP permeten l’enviament de paquets entre equips sense establir cap mena de connexió. Això vol dir que l’ordinador amfitrió origen envia dades al destinatari sense esperar cap mena de notificació que les dades s’han rebut correctament. 
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Avui dia, el TCP/IP és el conjunt de protocols escollit per a la immensa majoria de les xarxes actuals i, per descomptat, per a qualsevol sistema que es vulgui connectar a Internet.
</p>
</div></div>
<p>
Tot i que per enviar dades entre dos ordinadors amfitrions ja n’hi ha prou amb el protocol IP, no ofereix cap mena de garantia que s’enviïn correctament les dades o, ni tan sols, que arribin a la destinació. De fet, no ens garanteix que les dades, si arriben a la destinació, estiguin intactes, ja que el control d’errors només es fa sobre les capçaleres, no sobre les dades que transmet. Així doncs, tot i que es pot fer servir IP directament, per a aplicacions que requereixen fiabilitat fan servir al protocol de la capa de transport TCP.
</p>

<p>
<strong>1. Adreçament IP</strong>
</p>

<p>
Una de les funcions principals dels protocols de xarxa és proveir d’adreçament els elements perquè puguin enviar-se dades entre si. Entre el protocol IPv4 i el protocol IPv6 canvia la longitud i la representació de la direcció completament.
</p>

<p>
<strong>2. Tipus d’adreçament</strong>
</p>

<p>
En l’<acronym title="Request for Comments">RFC</acronym> 1918 del 1996 es defineixen els conjunts sobre el total d’adreces IPv4 que es destinen a la creació de xarxes privades, com pot ser la xarxa interna d’una empresa que no necessita que es pugui accedir als equips directament des d’Internet. Els rangs definits com a privats són els següents:
</p>
<ul>
<li class="level1"><div class="li"> El bloc que va de la IP <code>10.0.0.0</code> a la <code>10.255.255.255</code></div>
</li>
<li class="level1"><div class="li"> El bloc que va de la IP <code>172.16.0.0</code> a la <code>172.31.255.255</code></div>
</li>
<li class="level1"><div class="li"> El bloc que va de la IP <code>192.168.0.0</code> a la <code>192.168.255.255</code></div>
</li>
</ul>

<p>
En l’<acronym title="Request for Comments">RFC</acronym> 3330 del 2002 es va definir un altre rang que es pot considerar privat i que s’anomena <em>d’autoconfiguració</em> (o <em>d’enllaç local</em>). Aquest rang va de la IP 169.254.0.0 a la 169.254.255.255. S’anomena <em>d’autoconfiguració</em> perquè, en cas que un equip que es vulgui connectar a la xarxa sol·licitant una IP mitjançant el protocol DHCP no obtingui resposta, s’autoassigna una IP aleatòria dintre d’aquest rang per obtenir un accés mínim a la xarxa.
</p>

<p>
Les adreces privades només són visibles dins les xarxes locals on són definides. Per tant, a Internet pot haver-hi adreces privades que apareguin a més d’una xarxa local, ja que, en no veure’s entre elles, no s’interfereixen. NAT permet que aquests ordinadors amb adreces privades puguin utilitzar l’adreça pública de l’encaminador per accedir a Internet.
</p>

<p>
Les adreces públiques, per contra, es veuen a tot Internet i no pot haver-hi dues màquines amb la mateixa adreça IP.
</p>
<div class="iocreference"><div class="ioccontent">
<p>
Podeu consultar què és el <strong>NAT</strong> a l’apartat “Adreçament públic i privat: NAT”.
</p>
</div></div>
<p>
<strong>3. La necessitat de la IPv6</strong>
</p>

<p>
La IP v4 consta de quatre octets (és a dir, 32 bits) que es representen separats per punts en decimal; per exemple, una adreça vàlida pot ser <code>1.2.3.4</code>.
</p>

<p>
Això dóna un total de 2<sup>32</sup> adreces vàlides, o el que és el mateix, 4.294.967.296 adreces possibles. Amb la gran expansió d’Internet ha esdevingut un problema, ja que el nombre d’adreces assignades respecte al total d’adreces possibles és cada vegada més alt. Per això s’han desenvolupat tècniques com el NAT, per permetre que sistemes amb adreçament privat es puguin comunicar amb sistemes amb adreçament públic.
</p>

<p>
Amb la idea de permetre que qualsevol dispositiu pugui tenir una adreça IP única, es va desenvolupar la IPv6: es va passar dels 32 bits de la IPv4 als 128 de la nova versió. Això dóna un total de 2<sup>128</sup>, és a dir, 3,4·10<sup>38</sup> adreces IP. Dit d’una manera més entenedora, cada persona del planeta pot tenir uns quants milions d’adreces IPv6.
</p>

<p>
La representació de les adreces IPv6 és sensiblement diferent: es representen en hexadecimal en conjunts de 16 bits separats per dos punts.  Per exemple, una adreça IPv6 vàlida pot ser: <code>2001:0123:4567:89ab:cdef:dead:beef:0001</code>
</p>

</div>

<h2><a id="l_icmp" >L&#039;ICMP</a></h2>
<div class="level2">

<p>
L’ICMP és un protocol de la capa de xarxa que complementa el protocol IP per a tasques de control i notificació d’errors. Està definit en l’<acronym title="Request for Comments">RFC</acronym> 792 com a complement imprescindible del protocol IP.
</p>

<p>
Malgrat que aquest protocol no està concebut perquè hi hagi aplicacions que el facin servir, n’hi ha algunes com ping i <em>traceroute</em> que l’utilitzen, principalment com a eines de diagnostic de la xarxa.
</p>

</div>

<h3><a id="l_ordre_ping" >L&#039;ordre ping</a></h3>
<div class="level3">

<p>
Mitjançant l’ordre <em>ping</em> es pot comprovar si hi ha connectivitat entre dos equips diferents mitjançant paquets ICMP. L’ordinador amfitrió que executa l’ordre <em>ping</em> envia una petició d’eco (<em>echo request</em>) i l’equip que la rep ha de contestar amb una resposta d’eco (<em>echo reply</em>). Sovint s’utilitza el temps que es tarda des que s’envia la petició fins que es rep la resposta per mesurar latències de xarxa, per això algunes vegades el terme <em>ping</em> es pot referir a aquest retard.
</p>

</div>

<h3><a id="l_ordre_traceroute" >L&#039;ordre traceroute</a></h3>
<div class="level3">

<p>
L’ordre <em>traceroute</em> és una eina que ens permet, dintre d’unes certes limitacions, descobrir la ruta que segueix un paquet IP des de l’equip origen fins al de destinació. Per fer-ho s’utilitza el camp TTL dels paquets IP, el qual indica el nombre de salts que li resten abans que es descarti el paquet.
</p>

<p>
Si s’envia un paquet amb un TTL d’1, el primer encaminador descartarà el paquet i enviarà un paquet ICMP de tipus temps esgotat (<em>time exceeded</em>) a l’ordinador amfitrió que ha originat el primer paquet. Aquest paquet de temps esgotat conté l’adreça IP de l’encaminador que ha descartat el paquet inicial. Així s’obté l’adreça IP del primer encaminador. Si es repeteix l’operació amb un 2 obtindrem el següent, i així successivament.
</p>

<p>
A continuació podem veure la sortida de l’execució de l’ordre traceroute:
</p>
<pre class="code"> # traceroute systemadmin.es
 traceroute to systemadmin.es (91.121.113.59), 30 hops max, 40 byte packets
  1  82.98.141.253 (82.98.141.253)  1.935 ms  2.245 ms  2.491 ms
  2  10.1.1.1 (10.1.1.1)  0.324 ms  0.367 ms  0.419 ms
  3  193.149.1.81 (193.149.1.81)  4.406 ms * *
  4  * * *
  5  160g.rbx-2-6k.routers.chtix.eu (213.186.32.222)  22.144 ms * *
  6  rbx-36-m1.routers.chtix.eu (213.251.191.231)  20.266 ms  20.257 ms  20.460 ms
  7  mail.systemadmin.es (91.121.113.59)  20.042 ms  19.878 ms  19.848 ms</pre>

<p>
Tot i això, alguns encaminadors poden no enviar aquest missatge ICMP i només descartar el paquet; per tant, si no s’ha rebut la resposta en un cert temps es marca l’encaminador amb un asterisc, com en el salt 4 de l’exemple anterior.
</p>

<p>
De totes maneres, és possible que hi hagi encaminadors que no puguem descobrir perquè no modifiquen el TTL del paquet i, per tant, les dades passen silenciosament a través seu.
</p>

</div>

<h2><a id="arp" >ARP</a></h2>
<div class="level2">

<p>
El protocol ARP s’encarrega de resoldre l’adreça de la capa d’enllaç a partir de l’adreça de la capa de xarxa tal com està definit en l’<acronym title="Request for Comments">RFC</acronym> 826 del 1982. En el cas típic ens trobaríem amb una xarxa IP sobre una xarxa Ethernet i, per tant, el protocol ARP ens resoldria l’adreça MAC a partir de l’adreça IP.
</p>

<p>
Per fer això, la màquina que vol saber l’adreça MAC que té una certa IP envia un paquet de tipus petició ARP (<em>ARP request</em>) a l’adreça de difusió de la capa d’enllaç i espera que la màquina que té la IP o qualsevol altra li respongui mitjançant un paquet de resposta ARP (<em>ARP response</em>).
</p>

<p>
Un cop obtinguda la resposta, s’emmagatzema, durant un cert temps, en una taula local de cada sistema: això evita que cada vegada que es vulgui enviar un paquet s’hagi de tornar a demanar la mateixa informació. Aquesta taula ARP s’esborra periòdicament per evitar que si una IP s’assigna a un altre equip els paquets es continuïn enviant a l’equip antic.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Adreça MAC de difusió</p>
<p>
Hi ha un tipus d’adreça MAC especial que tots els dispositius d’una xarxa <acronym title="Local Area Network">LAN</acronym> utilitzen per comunicar-se d’una manera simultània. Aquesta adreça s’anomena <em>adreça de difusió</em> i es representa FF-FF-FF-FF-FF-FF.
</p>
</div></div>
</div>

<h3><a id="assignacio_estatica" >Assignació estàtica</a></h3>
<div class="level3">

<p>
Quan les adreces IP s’assignen estàticament, cadascun dels dispositius s’ha de configurar amb una única adreça IP. De fet, aquest mètode requereix guardar registres de les assignacions d’adreces, atès que podrien aparèixer problemes dins d’una xarxa en cas d’utilitzar adreces IP duplicades.
</p>

<p>
Des del punt de vista de la xarxa, hi ha diversos dispositius que han de tenir assignada d’una manera permanent (o estàtica) una adreça IP, ja que alguns dispositius hi han de fer referència. En cas que dispositius com impressores en xarxa, servidors d’aplicacions o encaminadors no disposin d’una adreça IP estàtica, la xarxa s’ha de configurar de nou en tot moment. En poques paraules, si es donés aquesta situació, la xarxa esdevindria inútil.
</p>

<p>
L’assignació estàtica d’adreces IP té l’inconvenient que pot comportar problemes de seguretat, ja que pot esdevenir una porta d’accés important per als pirates informàtics. Cal destacar que poden passar dies o setmanes fins que no es detecta que els pirates han accedit a les dades contingudes en l’ordinador.
</p>

<p>
Per a un dispositiu de referència, una alternativa a l’ús d’una adreça estàtica és assignar dinàmicament un nom a la seva adreça. Així es pot accedir el dispositiu fent referència al nom que li hem assignat (que no varia), en lloc de fer-ho a l’adreça IP (que pot variar si és dinàmica). DDNS (<acronym title="Domain Name System">DNS</acronym> dinàmic) és un protocol que permet fer aquesta mena d’assignacions dinàmiques de noms a adreces IP.
</p>

</div>

<h3><a id="assignacio_dinamica" >Assignació dinàmica</a></h3>
<div class="level3">

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10m5u3_20.png" class="imgB" title="Esquema d&#039;assignació dinàmica d&#039;adreces" alt="Esquema d&#039;assignació dinàmica d&#039;adreces" /></li><li><small>Esquema d&#039;assignació dinàmica d&#039;adreces</small></li>
</ul></div>

</p>
<div class="iocreference"><div class="ioccontent">
<p>
Podeu consultar el referent a DDNS (<acronym title="Domain Name System">DNS</acronym> dinàmic) a l’apartat“DDNS (dynamic <acronym title="Domain Name System">DNS</acronym>)”.
</p>
</div></div>
<p>
Tenint en compte que dins d’una xarxa hi ha un ventall d’adreces que ja estan assignades, la resta s’han d’assignar, per exemple, a les màquines que s’hi connectin. Amb tot, depenent de les dimensions de la xarxa, el nombre d’adreces disponibles pot ser limitat. Per això es va trobar el mètode d’assignació dinàmica d’adreces IP, perquè es connectin intermitentment a la xarxa. Aquest servei d’atorgament de les adreces IP que, en el moment de la connexió, estiguin lliures permet evitar la feina de configuració a l’administrador de la xarxa.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Per a l’assignació dinàmica de les adreces IP es van crear serveis com el <strong>DHCP</strong> o el <strong>BOOTP</strong>.
</p>
</div></div>
</div>

<h3><a id="protocol_de_resolucio_d_adreces_invers_rarp" >Protocol de resolució d&#039;adreces invers (RARP)</a></h3>
<div class="level3">
<div class="iocimportant"><div class="ioccontent">
<p>
El <strong>protocol RARP</strong> serveix perquè les màquines que no tenen una adreça IP la puguin obtenir.
</p>
</div></div>
<p>
El funcionament és el següent: quan una màquina es connecta a la xarxa i no té adreça, envia un missatge de difusió per demanar-ne una. Aquest missatge només és respost pel servidor RARP amb un nou paquet de difusió que conté l’adreça IP que caldrà assignar a la màquina sol·licitant.
</p>

<p>
Totes les màquines ignoraran el paquet excepte la màquina que hem connectat, que entendrà que el missatge és per a ella i se’l quedarà. En el moment en què la nova màquina accepti el paquet enviat pel servidor RARP, l’examinarà i n’extraurà l’adreça IP. En aquest moment, la nova màquina ja tindrà la seva pròpia adreça IP i, per tant, ja podrà començar a transmetre dades (<span class="figref"><a href="#Figure17"><span>figura</span></a></span>).
</p>
<div class="iocfigure"><a name="Figure17"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Servidor i missatges RARP

</figcaption><img src="../media/ic10m5u3_21.png" alt="" /></figure>
</div>
<p>
Cal destacar que el missatge RARP que envia l’ordinador que acabem de connectar el rebran totes les màquines, atès que no sap quin és el servidor RARP, l’examinaran i, en veure que es tracta d’una petició d’adreça IP (és a dir, un paquet que no és per a ells), l’ignoraran. Solament el servidor RARP entendrà que el paquet està adreçat a ell.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Servei DHCP</p>
<p>
Davant la limitació del nombre d’adreces presents dins una xarxa, i el creixement exponencial que presenta, es va optar per estalviar adreces en ordinadors que es connecten intermitentment. Per fer-ho, es va crear un servei que proporcionés adreces IP que, en el moment de la connexió, estiguessin lliures. Per tant, el servei DHCP es fonamenta en el servidor DHCP que dóna adreces (a partir d’un interval d’adreces que té) als ordinadors que es connecten a la xarxa.
</p>
</div></div>
<p>
Un cop rebut el missatge RARP, el servidor enviarà un paquet en modalitat de difusió (<em>broadcast</em>) amb la informació necessària perquè la nova màquina pugui fer la transmissió corresponent. En aquest cas, el paquet arribarà novament a totes les màquines, que examinaran el paquet rebut, comprovaran que no és per a elles i l’ignoraran.
</p>

<p>
Com ja hem comentat, totes les màquines ignoraran el paquet excepte la màquina que hem connectat, que entendrà que el missatge és per a ella i se’l quedarà. Un cop la nostra màquina hagi acceptat el paquet enviat pel servidor RARP, l’examinarà i n’extraurà l’adreça IP. De fet, com que la nova màquina ja tindrà la seva pròpia adreça IP, ja podrà començar a transmetre dades (<span class="figref"><a href="#Figure18"><span>figura</span></a></span>).
</p>

<p>

</p>

<p>
El servidor RARP té configurada una llista de parells d’adreça MAC-adreça IP a assignar. D’aquesta manera sempre assigna la mateixa adreça IP a la mateixa màquina.
</p>
<div class="iocfigure"><a name="Figure18"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Obtenció d’adreça IP

</figcaption><img src="../media/ic10m5u3_22.png" alt="" /></figure>
</div>
<p>
RARP ha deixat d’utilitzar-se. Ha estat substituït per BOOTP i, sobretot, per DHCP, que tenen més prestacions.
</p>

</div>

<h2><a id="ipx" >IPX</a></h2>
<div class="level2">

<p>
El protocol d’intercanvi de paquets entre xarxes (IPX, <em>Internetwork packet exchange</em>) és un protocol de datagrames ràpid no orientat a connexió que s’encarrega de transmetre dades per la xarxa posant a cada paquet l’adreça de la destinació.
</p>
<div class="iocreference"><div class="ioccontent">
<p>
els protocols BOOTP i DHCP es veuen a l’apartat “Assignació automàtica d’adreces IP: BOOTP i DHCP”.
</p>
</div></div>
<p>
És un protocol de datagrames que s’assembla (tot i que més simple i amb menys fiabilitat) al protocol IP pel que fa a les operacions bàsiques, però diferent quant al sistema d’adreçament, al format de paquets i a l’àmbit general. És un protocol que actualment ja no s’usa i que només es troba en jocs antics per jugar en xarxa.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Datagrama</p>
<p>
És un fragment de paquet que s’envia amb prou informació perquè la xarxa pugui encaminar-lo cap a la destinació; no es garanteix que hi arribin tots i tampoc que hi arribin en l’ordre correcte.
</p>
</div></div>
</div>

<h3><a id="adrecament_ipx" >Adreçament IPX</a></h3>
<div class="level3">

<p>
L’adreçament IPX utilitza adreces de 32 bits que s’assignen completament sobre una xarxa, en comptes de fer-ho sobre un equip individual. Per identificar cada equip, s’utilitza maquinari específic.
</p>

<p>
Cada adreça té tres components:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Adreça de xarxa</strong>, valor de 32 bits assignat per un administrador i limitat a una xarxa determinada.</div>
</li>
<li class="level1"><div class="li"> <strong>Número de node</strong>, derivat d’una adreça MAC (48 bits) que s’obté de la targeta de xarxa.</div>
</li>
<li class="level1"><div class="li"> <strong>Número de sòcol</strong>, valor de 16 bits assignat pel sistema operatiu de xarxa (NetWare) a un procés concret dins d’un node.</div>
</li>
</ul>

<p>
Un node dins d’una xarxa es representarà de la manera següent:
</p>
<pre class="code">Adreça de xarxa + número de node</pre>

<p>
Mentre que un procés dins de la xarxa es representarà d’aquesta manera:
</p>
<pre class="code">Número de connexió + número de sòcol</pre>

<p>
Al model OSI, la gestió del procés i el número de sòcol correspon a la capa de transport.
</p>

<p>
Al conjunt de protocols TCP/IP, aquesta gestió la fan els protocols TCP i UDP. 
</p>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u3/a2/exercicis.html">Exercicis d'autoavaluació</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u3/a3/activitats.html">Activitats</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
