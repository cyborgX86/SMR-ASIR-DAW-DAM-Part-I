<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html">
        
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Xarxes d'àrea local</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Xarxes d'àrea local">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html">Xarxes d'àrea local</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u5" class="parentnode"><p><a class="unit" href="../../../WebContent/u5/introduccio.html">5. Monitoratge i detecció d'incidències</a></p><ul class="expander"><li id="u5introduccio"><a href="../../../WebContent/u5/introduccio.html">Introducció</a></li><li id="u5mapa"><a href="../../../WebContent/u5/mapa.html">Mapa conceptual</a></li><li id="u5objectius"><a href="../../../WebContent/u5/objectius.html">Resultats d'aprenentatge</a></li><li id="u5referencies"><a href="../../../WebContent/u5/referencies.html">Referències</a></li><li id="u5resum"><a href="../../../WebContent/u5/resum.html">Resum</a></li><li id="u5a1" class="tocsection"><p id='u5a1continguts'><a class="section" href="../../../WebContent/u5/a1/continguts.html">Procediments sistemàtics de verificació i prova d'elements de connectivitat de xarxes locals</a><span class="buttonexp"></span></p><ul><li id="u5a1activitats"><a href="../../../WebContent/u5/a1/activitats.html">Activitats</a></li><li id="u5a1exercicis"><a href="../../../WebContent/u5/a1/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u5a1' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u5/a1/continguts.html#procediments_de_verificacio_de_la_connectivitat">Procediments de verificació de la connectivitat</a></li><li><a href="../../../WebContent/u5/a1/continguts.html#eines_de_verificacio_de_la_connectivitat">Eines de verificació de la connectivitat</a></li><li><a href="../../../WebContent/u5/a1/continguts.html#casos_practicsverificacio_de_les_connexions_i_documentacio_dels_processos_de_prova_i_verificacions_fets">Casos pràctics: verificació de les connexions i documentació dels processos de prova i verificacions fets</a></li></ul></div></div><li id="u5a2" class="tocsection"><p id='u5a2continguts'><a class="section" href="../../../WebContent/u5/a2/continguts.html">Actualització dels dispositius de xarxa</a><span class="buttonexp"></span></p><ul><li id="u5a2activitats"><a href="../../../WebContent/u5/a2/activitats.html">Activitats</a></li><li id="u5a2exercicis"><a href="../../../WebContent/u5/a2/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u5a2' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u5/a2/continguts.html#components_actualitzables">Components actualitzables</a></li><li><a href="../../../WebContent/u5/a2/continguts.html#substitucio_de_components_dels_dispositius_de_comunicacions">Substitució de components dels dispositius de comunicacions</a></li><li><a href="../../../WebContent/u5/a2/continguts.html#descripcio_dels_passos_que_cal_seguir_en_l_actualitzacio_de_programari_de_dispositius_de_comunicacio">Descripció dels passos que cal seguir en l’actualització de programari de dispositius de comunicació</a></li><li><a href="../../../WebContent/u5/a2/continguts.html#cas_practicexemple_d_actualitzacio_de_programari">Cas pràctic: exemple d’actualització de programari</a></li></ul></div></div></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../introduccio.html">Monitoratge i detecció d'incidències</a></li><li>Procediments sistemàtics de verificació i prova d'elements de connecti...</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="procediments_sistematics_de_verificacio_i_prova_d_elements_de_connectivitat_de_xarxes_locals"> Procediments sistemàtics de verificació i prova d'elements de connectivitat de xarxes locals </a></h1>
    	<div class="iocimportant"><div class="ioccontent">
<p>
Per tal de ser capaços de supervisar una xarxa i poder diagnosticar i resoldre correctament els problemes que poden sorgir heu de saber com ha estat dissenyada la xarxa, quins dispositius en formen part i quin és el seu funcionament en condicions normals. Aquesta informació és coneix com a <em>línia base</em> (<em>baseline</em>).
</p>
</div></div>
<p>
Com més informació de la xarxa tingueu més robust serà el vostre coneixement i més acurada serà la vostra actuació davant els problemes. És recomanable que com a mínim la documentació de la xarxa inclogui la informació següent:
</p>
<ul>
<li class="level1"><div class="li"> Diagrama de la topologia.</div>
</li>
<li class="level1"><div class="li"> Configuració dels dispositius de xarxa (encaminadors, concentradors, commutadors, etc).</div>
</li>
<li class="level1"><div class="li"> Documentació d’equips finals (servidors, ordinadors d’escriptori, dispositius mòbils, etc).</div>
</li>
</ul>

<p>

</p>
<div class="iocfigure"><a name="Figure1"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Exemple de diagrama de topologia

</figcaption><img src="../media/ic10m5u5_01.png" alt="" /></figure>
</div>
<p>
<strong>1. Diagrama de la topologia</strong>. El diagrama que podeu observar en la <span class="figref"><a href="#Figure1"><span>figura</span></a></span> conté un gràfic de les connexions dels diferents equips de xarxa i els equips finals, incloent-hi el medi, tecnologia i adreçament IP. Aquesta informació us serà molt útil per tal de saber amb un cop d’ull quins són els principals recursos de xarxes afectats pel mal funcionament d’un determinat dispositiu.
</p>

<p>
<strong>2. Configuració dels dispositius de xarxa</strong>. Aquest document ha de contenir informació sobre el tipus de maquinari de xarxa, i ha d’identificar cadascun dels dispositius de manera única facilitant una relació dels dispositius veïns connectats. Com a mínim hauríeu de disposar de les dades següents:
</p>
<ul>
<li class="level1"><div class="li"> Fabricant i model del dispositiu.</div>
</li>
<li class="level1"><div class="li"> Versió del sistema operatiu.</div>
</li>
<li class="level1"><div class="li"> Nom o identificador únic.</div>
</li>
<li class="level1"><div class="li"> Adreçament físic i lògic (si en té).</div>
</li>
<li class="level1"><div class="li"> Tipus de port de connexió.</div>
</li>
<li class="level1"><div class="li"> Dispositius veïns amb qui està connectat.</div>
</li>
<li class="level1"><div class="li"> Ubicació del dispositiu.</div>
</li>
</ul>

<p>
<strong>3. Documentació d’equips finals</strong>. Els servidors, ordinadors d’usuari, telèfons mòbils multimèdia (<em>smartphones</em>) i la resta de dispositius que permeten als usuaris accedir o proporcionar contingut són susceptibles de causar problemes en una xarxa a causa d’un mal ús o la vulnerabilitat del programari. Per tant, és important saber quins programes o serveis executa. És recomanable conèixer:
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Problemes en les xarxes</p>
<p>
Una de les principals causes de problemes en les xarxes és la connexió de dispositius no controlats o supervisats directament pels administradors de la xarxa com ara ordinadors portàtils d’usuaris convidats, els quals són susceptibles d’estar mal configurats.
</p>
</div></div><ul>
<li class="level1"><div class="li"> Nom o identificador únic.</div>
</li>
<li class="level1"><div class="li"> Sistema operatiu (nom, versió i pedaços de seguretat instal·lats).</div>
</li>
<li class="level1"><div class="li"> Adreçament IP.</div>
</li>
<li class="level1"><div class="li"> Aplicacions o serveis que fan un ús intensiu de la xarxa (<acronym title="Domain Name System">DNS</acronym>, HTTP, VoIP, etc.).</div>
</li>
<li class="level1"><div class="li"> Ubicació del dispositiu.</div>
</li>
</ul>
<div class="ioctable ">
<div class="titletable"><a name="Table1"><span>Taula: </span></a>Inventari de dispositius</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0"> ID dispositiu </th><th class="col1"> Sistema operatiu </th><th class="col2"> Adreçament <br/>
</th><th class="col3"> Aplicacions <br/>
de xarxa </th><th class="col4"> Ubicació </th>
	</tr>
	<tr class="row1">
		<td class="col0"> SWEB01 </td><td class="col1"> Linux Debian Etch </td><td class="col2"> 192.168.1.100/24 </td><td class="col3"> Apache 2.0 (HTTP) </td><td class="col4"> Sala màquines <br/>
Prestatge 1 <br/>
</td>
	</tr>
	<tr class="row2">
		<td class="col0"> SFTP01 </td><td class="col1"> Windows Server 2003 R2 + SP2 </td><td class="col2"> 192.168.1.200/24 </td><td class="col3"> IIS 6.0 (<acronym title="File Transfer Protocol">FTP</acronym>) </td><td class="col4"> Sala màquines <br/>
Prestatge 3 <br/>
</td>
	</tr>
	<tr class="row3">
		<td class="col0"> PCA02 </td><td class="col1"> Windows XP + SP3 </td><td class="col2"> 192.168.5.1/25 </td><td class="col3"> - </td><td class="col4"> Despatx administració </td>
	</tr>
	<tr class="row4">
		<td class="col0"> PCD01 </td><td class="col1"> Windows Vista + SP1 </td><td class="col2"> 192.168.2.5/5 </td><td class="col3"> - </td><td class="col4"> Despatx gerència </td>
	</tr>
</table></div>
</div>
<p>

</p>

<p>
Disposar de la documentació de la xarxa és el primer pas, però no serà suficient per poder detectar incidències. Una xarxa de comunicacions presenta un comportament diferent al llarg del dia, ja que els usuaris que la fan servir i el trànsit de dades que transporta no són sempre els mateixos.
</p>

<p>
Una vegada la xarxa està totalment configurada i operativa n’hem d’observar el comportament, recollint estadístiques sobre l’amplada de banda ocupada, el tipus de trànsit que hi circula, els serveis més utilitzats i els usuaris que consumeixen més recursos. Tots aquests factors repercuteixen de manera directa en l’estat de salut dels dispositius de xarxa, i un mal disseny o supervisió poden provocar que aquests pateixin càrregues de processador massa elevades o que hi hagi més volum de trànsit del que els circuits poden suportar, cosa que provoca, en molts casos, deficiències en el servei i fins i tot talls en la connexió.
</p>

<p>
Gràcies a les dades recollides sobre l’ús de la xarxa en diferents hores i dies podrem establir un patró d’ús que ens permetrà utilitzar-lo com a punt de referència. Qualsevol pauta de comportament fora dels valors registrats pot ser un indici d’un problema en la xarxa. Arribats a aquest punt, haureu de comprovar l’estat dels diferents dispositius de la xarxa per tal d’esbrinar si realment hi ha un problema.
</p>

<h2><a id="procediments_de_verificacio_de_la_connectivitat" >Procediments de verificació de la connectivitat</a></h2>
<div class="level2">

<p>
Quan es rep un avís per part d’un usuari que Internet o un altre servei determinat de xarxa no funciona és quan s’ha de decidir quin enfocament se seguirà per tal d’intentar entendre què és el que no funciona.
</p>
<div class="iocfigure"><a name="Figure2"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Model de referència OSI

</figcaption><img src="../media/ic10m5u5_02.png" alt="" /></figure>
</div><div class="iocimportant"><div class="ioccontent">
<p>
Els <strong>models de xarxa lògics</strong> com l’OSI (interconnexió de sistemes oberts, de l’anglès: <em>Open System Interconnection</em>, <span class="figref"><a href="#Figure2"><span>figura</span></a></span>) i el TCP/IP separen les funcionalitats de la xarxa en diferents nivells o capes que faciliten l’aïllament del problema en la capa afectada.
</p>
</div></div>
<p>
És important que tingueu clar en quina capa treballa cada dispositiu de xarxa i l’efecte que pot tenir que no funcioni correctament per poder estimar com pot afectar això el rendiment global de la xarxa. Si, per exemple, la connectivitat pateix talls intermitents, podem pressuposar un problema físic amb el cablatge o els connectors; en canvi, si tots els indicadors d’estat dels dispositius de cada extrem indiquen que hi ha connexió però no ens aconseguim connectar, ens podem centrar en la capa de xarxa i revisar l’adreçament IP.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Models de referència</p>
<p>
El model de referència OSI va ser desenvolupat l’any 1977 per part de la <em>International Organization for Standardization</em> (ISO), mentre que el model TCP/IP va ser creat l’any 1970 per la <em>Internet Engineering Task Force</em> (IETF).
</p>
</div></div>
<p>
Dels set nivells OSI, la majoria de dispositius de xarxa treballen en els quatre inferiors (físic, enllaç, xarxa i transport), mentre que les aplicacions dels usuaris treballen principalment en els nivells superiors. Això us servirà per escollir la millor aproximació a l’hora de verificar els problemes de connexió d’una xarxa.
</p>

<p>
Els símptomes més comuns de problemes segons la capa on es troben són els següents:
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Col·lisions</p>
<p>
Les col·lisions es produeixen quan dos equips intenten transmetre simultàniament pel mateix segment de xarxa.
</p>
</div></div><ul>
<li class="level1"><div class="li"> <strong>Físic</strong>: en aquest nivell els problemes més comuns són connexions intermitents, congestió de trànsit, col·lisions, ús elevat de CPU dels dispositius de xarxa i rendiment inferior als valors normals.</div>
</li>
<li class="level1"><div class="li"> <strong>Enllaç</strong>: falla la connectivitat en capes superiors, el trànsit arriba a la destinació però amb un rendiment inferior, el trànsit no arriba a la destinació, hi ha un excés de trànsit de gestió de protocols d’estat de l’enllaç o de senyalització.</div>
</li>
<li class="level1"><div class="li"> <strong>Xarxa</strong>: si falla el nivell de xarxa probablement no hi haurà connectivitat o si n’hi ha la xarxa funcionarà amb un rendiment inferior a l’esperat; el trànsit segueix un recorregut poc òptim fins a la  destinació.</div>
</li>
<li class="level1"><div class="li"> <strong>Transport</strong>: els problemes més habituals d’aquest nivell són que falla un tipus específic de trànsit, intermitències en la connexió o problemes de seguretat.</div>
</li>
</ul>

<p>
Les capes superiors (sessió, presentació i aplicació) moltes vegades per simplificar, i atès que treballen de manera molt propera una amb l’altra, es tracten com si fos una sola capa i s’hi fa referència com a <em>capa d’aplicació</em>.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table2"><span>Taula: </span></a>Simplificació de les capes superiors</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0"> Número de capa </th><th class="col1"> Nom de capa </th><th class="col2"> Capa resultant </th>
	</tr>
	<tr class="row1">
		<td class="col0"> 7 </td><td class="col1"> Aplicació </td><td class="col2"> Aplicació </td>
	</tr>
	<tr class="row2">
		<td class="col0"> 6 </td><td class="col1"> Presentació </td><td class="col2"> Aplicació </td>
	</tr>
	<tr class="row3">
		<td class="col0"> 5 </td><td class="col1"> Sessió </td><td class="col2"> Aplicació </td>
	</tr>
</table></div>
</div>
<p>
Els símptomes més habituals de problemes en aquesta capa són que les aplicacions dels usuaris funcionen més lentament de l’esperat, que apareixen errors per pantalla o que certes funcionalitats de l’aplicació no funcionen correctament.
</p>

</div>

<h3><a id="proces_de_verificacio_del_nivell_fisic" >Procés de verificació del nivell físic</a></h3>
<div class="level3">

<p>
Per tal de verificar que al nivell més baix de tots la configuració és correcta, haureu de revisar els cables i els connectors. És important que reviseu que aquests no tinguin talls, que no estiguin deteriorats o que facin bon contacte. Si això sembla correcte reviseu que el tipus de cable i connector sigui el que toqui, ja que molts cables i connectors són d’aparença similar però des del punt de vista elèctric no són compatibles i provoquen tot tipus de problemes si es connecten per error.
</p>

<p>
Si els cables i els connectors semblen en bon estat comproveu que els fils tinguin la configuració pertinent (cable pla, creuat o transposat) i que la configuració del port de connexió de l’equip sigui correcta, revisant que la velocitat (10, 100, 1000 Mbps, etc.) i el mode de funcionament (dúplex o semidúplex) siguin els mateixos als dos extrems. Podeu agafar com a referència l’esquema de la <span class="figref"><a href="#Figure3"><span>figura</span></a></span> per tal de diagnosticar problemes relacionats amb els components físics.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
No forceu mai un connector, ja que és probable que si no entra amb facilitat sigui perquè el connector no és del tipus adequat.
</p>
</div></div><div class="iocfigure"><a name="Figure3"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Procediment de diagnòstic d’incidències 

</figcaption><img src="../media/ic10m5u5_03v2.png" alt="" /></figure>
</div>
</div>

<h3><a id="proces_de_verificacio_del_nivell_d_enllac" >Procés de verificació del nivell d’enllaç</a></h3>
<div class="level3">

<p>
Els problemes que es produeixen al nivell d’enllaç són més comuns a les xarxes d’àrea ampla (WAN) que a les xarxes d’àrea local (<acronym title="Local Area Network">LAN</acronym>); no obstant això, encara que treballeu només en entorns de <acronym title="Local Area Network">LAN</acronym> és recomanable verificar que no es produeixen bucles.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Modes dúplex</p>
<p>
Dúplex és un mode de transmissió que permet enviar i rebre dades simultàniament, mentre que el semidúplex sols permet enviar o rebre dades però no en tots dos sentits al mateix temps (emissió i recepció).
</p>
</div></div>
<p>
Avui dia és molt habitual tenir una gran quantitat d’equips finals connectats en un mateix commutador gran i no pas en diversos commutadors petits. Per poder segmentar aquest commutador en diverses xarxes es fan servir les xarxes d’àrea local virtuals (VLAN). Quan dos equips que pertanyen a la mateixa xarxa no es puguin comunicar reviseu que la VLAN que té configurat el port del commutador de cadascun dels equips sigui la mateixa, ja que en cas de no ser-ho els equips no es podran veure. Això seria l’equivalent que cadascun estigués connectat a un commutador físic diferent. Pareu compte també que la configuració dels ports de <em>trunk</em> (si n’hi ha) sigui correcta i que cap sistema final estigui connectat a un punt de <em>trunk</em>.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Diem que es produeix un bucle quan la informació es propaga per la xarxa indefinidament a causa de l´existència de múltiples camins que formen un circuit tancat.
</p>
</div></div>
</div>

<h3><a id="proces_de_verificacio_del_nivell_de_xarxa" >Procés de verificació del nivell de xarxa</a></h3>
<div class="level3">

<p>
Els problemes de nivell de xarxa acostumen a estar provocats per un problema en l’adreçament IP, les taules d’encaminament o un canvi de topologia.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Una <em>virtual local area network</em> (VLAN) és un mecanisme que permet segmentar una xarxa d’àrea local física en diverses xarxes lògiques.
</p>
</div></div>
<p>
Reviseu si hi ha hagut algun canvi en la topologia de la xarxa, és a dir, que no s’hagi connectat un nou dispositiu o que algun altre s’hagi desconnectat. Les xarxes disposen de mecanismes per tornar a convergir quan es produeix algun d’aquest canvis, però els resultats no són sempre els esperats.
</p>

<p>
Comproveu també que algun equip de xarxa no s’hagi reiniciat, ja que a efectes pràctics això tindria el mateix comportament que si l’haguéssiu desconnectat, i els mecanismes de convergència entrarien en funcionament igualment.
</p>
<div class="ioctextl"><div class="ioccontent"><p class="ioctitle">Convergència d&#039;una xarxa</p>
<p>
Quan es produeix algun canvi de configuració o topologia en una xarxa, els equips que en formen part s’han d’habituar a la nova situació, fet que pot provocar que certs serveis o protocols no funcionin de manera habitual. Quan tots els equips de xarxa s’han assabentat i adaptat a la nova situació es diu que la xarxa ha convergit.
</p>
</div></div>
</div>

<h3><a id="proces_de_verificacio_del_nivell_de_transport" >Procés de verificació del nivell de transport</a></h3>
<div class="level3">

<p>
Els problemes de nivell de transport acostumen a provocar que certes aplicacions o serveis no funcionin correctament, de manera que es produeixen talls intermitents o permanents en el servei.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Llista de control d’accés</p>
<p>
Una llista de control d’accés o <acronym title="Access Control List">ACL</acronym>, com indiquen les seves sigles en anglès, és un conjunt de regles que serveix per permetre o denegar l’accés a determinats serveis, protocols i equips de la xarxa.
</p>
</div></div>
<p>
La font d’origen del problema pot estar en un tallafocs que filtra el trànsit, una llista de control d’accés d’un encaminador o un problema en la configuració del programari.
</p>

<p>
Recordeu que en el nivell de transport és igual d’important revisar la configuració dels equips de xarxa i la dels ordinadors i servidors mateixos que participen en el procés de comunicació.
</p>

<p>
Serveis típics que poden provocar problemes en aquest nivell són els servidors de <acronym title="Domain Name System">DNS</acronym>, el DHCP i les configuracions de NAT. En aquest últim cas hi ha certes aplicacions que poden requerir configuracions específiques per tal de poder funcionar correctament darrere d’un NAT.
</p>
<div class="ioctextl"><div class="ioccontent"><p class="ioctitle">El &quot;network address translation&quot; (NAT)</p>
<p>
És un mecanisme que permet a diversos equips interns de la xarxa connectar-se a altres xarxes públiques, com per exemple Internet, amb una sola adreça IP, que comparteixen entre tots. Aquest mecanisme també permet amagar l’adreça IP real d’un equip intern. Fer servir NAT en una xarxa té avantatges i desavantatges. Com a avantatge podem esmentar que aprofitem millor l’encaminament IP públic i augmentem la seguretat en la xarxa interna, ja que que el seu encaminament queda ocult des de l’exterior de la xarxa. Com a desavantatge, podem destacar que certes aplicacions no funcionen correctament i que cal tenir cura de la manera en què es configura el NAT en dispositius tallafoc si es vol accedir a determinats serveis com servidors de vídeo en temps real, xarxes privades virtuals (VPN), etc.
</p>
</div></div>
</div>

<h3><a id="proces_de_verificacio_del_nivell_d_aplicacio" >Procés de verificació del nivell d’aplicació</a></h3>
<div class="level3">

<p>
En el nivell d’aplicació resideixen la majoria de protocols que ofereixen serveis entre màquines, com per exemple el correu electrònic, el servidor de pàgines web, la transferència de fitxers o l’establiment de sessions de terminal.
</p>

<p>
La <span class="figref"><a href="#Figure4"><span>figura</span></a></span> mostra els protocols més comuns segons el nivell al qual pertanyen.
</p>
<div class="iocfigure"><a name="Figure4"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Comparació del model OSI amb el model TCP_IP 

</figcaption><img src="../media/ic10m5u5_04.png" alt="" /></figure>
</div>
</div>

<h2><a id="eines_de_verificacio_de_la_connectivitat" >Eines de verificació de la connectivitat</a></h2>
<div class="level2">

<p>
Hi ha diverses eines que us poden ajudar a diagnosticar i corregir errors en la xarxa. Aquestes eines poden ser de programari o maquinari. En el primer cas (vegeu la <span class="tabref"><a href="#Table3"><span>taula</span></a></span>) en podem trobar de gratuïtes que venen amb el mateix sistema operatiu que estem fent servir o d’altres comercials que podeu adquirir en funció de les vostres necessitats.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table3"><span>Taula: </span></a>Taula d’ordres i programes de diagnòstic de xarxa</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0"> Programari </th><th class="col1"> Sistema operatiu </th><th class="col2"> Tipus </th><th class="col3"> Serveix per </th>
	</tr>
	<tr class="row1">
		<td class="col0"> <strong><em>ping</em></strong> </td><td class="col1"> Tots </td><td class="col2"> Proves de connexió. </td><td class="col3"> Provar la connectivitat d’extrem a extrem, que el trànsit arriba a la destinació i pot tornar. <br/>
Comprovar que la pila de protocols TCP/IP està correctament instal·lada i operativa. <br/>
</td>
	</tr>
	<tr class="row2">
		<td class="col0"> <strong><em>telnet</em></strong> </td><td class="col1"> Multiplataforma </td><td class="col2"> Gestió remota i proves de ports. </td><td class="col3"> Permet establir sessions de terminal amb dispositius de xarxa o servidors. Permet administrar remotament aquests dispositius. <br/>
Comprovar que un determinat port de connexions no està filtrat i que el servei que hi ha al darrere està operatiu. <br/>
</td>
	</tr>
	<tr class="row3">
		<td class="col0"> <strong><em>arp</em></strong> </td><td class="col1"> Multiplataforma </td><td class="col2"> Comprova l’estat de la targeta de xarxa. </td><td class="col3"> Comprovar la correspondència d’una adreça IP amb l’adreça física (MAC). </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <strong><em>nslookup</em>, <em>dig</em>, <em>host</em></strong> </td><td class="col1"> Multiplataforma </td><td class="col2"> Comprovacions <acronym title="Domain Name System">DNS</acronym>. </td><td class="col3"> Fer consultes al <acronym title="Domain Name System">DNS</acronym> per saber si un domini és resoluble, si el servidor de <acronym title="Domain Name System">DNS</acronym> està operatiu i per saber si hi ha una entrada directa i inversa per a un nom i adreça IP. </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <strong><em>netstat</em>, <em>lsof</em></strong> </td><td class="col1"> Segons el programari </td><td class="col2"> Comprova l’estat de les connexions. </td><td class="col3"> Comprovar l’estat de les connexions d’un ordinador, mostrant les sessions establertes i les que estan en mode d’espera. </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <strong><em>tcpdump</em>, <em>wireshark</em></strong> </td><td class="col1"> Multiplataforma </td><td class="col2"> Sniffers </td><td class="col3"> Analitzar i conèixer el tipus de trànsit d’entrada i sortida des d’un determinat equip cap a un altre. </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <strong><em>nmap</em></strong> </td><td class="col1"> Multiplataforma </td><td class="col2"> Escaneig de ports. </td><td class="col3"> Analitzar quins ports i serveis té operatius un determinat equip. </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <strong><em>HP Openview</em>, <em>Solar Winds</em>, <em>CiscoView</em>, <em>What’s up Gold</em>, <em>SpiceWorks</em>, <em>Nagios</em></strong> </td><td class="col1"> Segons el programari </td><td class="col2"> Eines de monitoratge de xarxa (NMS). </td><td class="col3"> Monitorar la xarxa, recollir informació de l’estat dels dispositius, generar gràfiques i estadístiques d’ús, configurar els equips a distància, etc. </td>
	</tr>
</table></div>
</div>
<p>
Les eines de maquinari ens permeten analitzar l’estat dels components de la xarxa a més baix nivell i de manera independent del sistema operatiu dels dispositius que formen part de la xarxa.
</p>

<p>
Les eines més habituals són:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Mòduls d’anàlisi de xarxa</strong>: els mòduls d’anàlisi de xarxa (NAM) són targetes que es poden instal·lar en determinats equips de xarxa i que permeten analitzar el trànsit que hi passa i generar gràfiques, estadístiques i informes sobre aquest. No tots els dispositius de xarxa ho admeten; de fet, és una de les opcions més cares, ja que els equips que ho poden fer servir són de gamma alta. Tot i això, és una bona opció perquè són una font d’informació fiable, ja a que obtenen la informació directament de l’equip en què estan connectats.</div>
</li>
<li class="level1"><div class="li"> <strong>Multímetres digitals</strong>: els multímetres digitals són eines de mà que ens permeten analitzar valors físics dels components de la xarxa com ara valors de voltatge, corrent, resistència i altres factors que poden afectar l’estat de les fonts d’alimentació dels dispositius de xarxa.</div>
</li>
<li class="level1"><div class="li"> <strong>Comprovadors de cable</strong>: els comprovadors de cable permeten analitzar l’estat dels cables i els seus connectors. Hi ha diversos tipus de comprovadors en funció del cable que hem d’analitzar (fibra òptica, coure, etc.). Aquests dispositius ens permeten detectar si el cable està creuat, tallat, si té els parells de cable mal connectats, etc. En el cas de la fibra també ens poden proporcionar informació sobre si la fibra és multimode o monomode i la potencia de transmissió.</div>
</li>
<li class="level1"><div class="li"> <strong>Analitzadors de xarxa</strong>: els analitzadors de xarxa van més enllà del simple comprovador de cable; a part de la informació que proporcionen, poden comprovar l’estat de les connexions amb dispositius de xarxa com ara commutadors i encaminadors i poden proporcionar informació sobre el port on està connectat, la VLAN per la qual circulen els paquets, l’amplada de banda utilitzada i moltes altres dades. Aquesta informació normalment es pot transferir a un ordinador amb un programari de monitoratge de xarxa per tal de ser analitzada amb detall.</div>
</li>
</ul>

<p>
Una vegada tenim clar quines eines tenim al nostre abast per detectar incidències a la xarxa podeu fer servir l’esquema de la <span class="figref"><a href="#Figure5"><span>figura</span></a></span> per tal de diagnosticar els problemes.
</p>
<div class="iocfigure"><a name="Figure5"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Diagnòstic i resolució de problemes de xarxa 

</figcaption><img src="../media/ic10m5u5_05.png" alt="" /></figure>
</div>
</div>

<h2><a id="casos_practicsverificacio_de_les_connexions_i_documentacio_dels_processos_de_prova_i_verificacions_fets" >Casos pràctics: verificació de les connexions i documentació dels processos de prova i verificacions fets</a></h2>
<div class="level2">

<p>
En aquest apartat veurem dos casos pràctics que simulen errors a l’hora de connectar-se a un servidor web. Es pretén que veieu quins són els passos que heu de seguir per diagnosticar l’origen del problema i com el podeu solucionar. 
</p>

</div>

<h3><a id="perdua_de_connexio_en_el_servidor_web" >Pèrdua de connexió en el servidor web</a></h3>
<div class="level3">

<p>
Carregueu el laboratori <em>lab1</em> en el <em>packet tracer</em> i reviseu la topologia de xarxa configurada. Hauríeu de veure el mateix que a la <span class="figref"><a href="#Figure6"><span>figura</span></a></span>.
</p>
<div class="iocfigure"><a name="Figure6"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Laboratori del cas pràctic 1 

</figcaption><img src="../media/ic10m5u5_06.png" alt="" /></figure>
</div>
<p>
Us informen que el PC-Escriptori no és capaç d’accedir al Servidor-Web i que, per tant, la pàgina web que allotja no es pot mostrar. Com a tècnics informàtics, us demanen que verifiqueu el motiu pel qual passa això i que ho deixeu en funcionament el més aviat possible.
</p>

<p>
Revisant la topologia podeu veure que aquesta és molt bàsica: només hi ha un PC d’escriptori, un commutador i un servidor, fet que us facilitarà molt el procés de verificació del cablatge i altres components físics de la connexió.
</p>

<p>
Primer de tot, comproveu que efectivament el servidor web no és accessible (<span class="figref"><a href="#Figure7"><span>figura</span></a></span>), ja que a vegades es poden produir problemes puntuals de càrrega que només afecten a intervals de temps. Per fer-ho, obriu el navegador web des del PC i connecteu-vos a l’adreça 192.168.0.100.
</p>
<div class="iocfigure"><a name="Figure7"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Servidor web no accessible

</figcaption><img src="../media/ic10m5u5_07.png" alt="" /></figure>
</div>
<p>
Com podeu veure, obteniu un missatge d’error i no es mostra la plana web.
</p>

<p>
Reviseu la configuració del PC per verificar que la targeta de xarxa està configurada correctament.
</p>
<pre class="code">PC&gt;ipconfig /all

Physical Address................: 0007.ECCC.3294
IP Address......................: 192.168.0.5
Subnet Mask.....................: 255.255.255.0
Default Gateway.................: 192.168.0.1
DNS Servers.....................: 192.168.0.1</pre>

<p>
Ara mireu si sou capaços de fer un <em>ping</em> al mateix equip PC per comprovar la connectivitat local de l’equip. Tots els ordinadors es poden fer <em>ping</em> a si mateixos mitjançant l’adreça de <em>loopback</em>.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Adreça de loopback</p>
<p>
L’adreça IP 127.0.0.1 està reservada per fer proves de connectivitat local i mai no pot ser assignada a un ordinador com a adreça de xarxa principal, ja que és comuna a tots els ordinadors.
</p>
</div></div><pre class="code">PC&gt;ping 127.0.0.1

Pinging 127.0.0.1 with 32 bytes of data:

Reply from 127.0.0.1: bytes=32 time=10ms TTL=128
Reply from 127.0.0.1: bytes=32 time=10ms TTL=128
Reply from 127.0.0.1: bytes=32 time=20ms TTL=128
Reply from 127.0.0.1: bytes=32 time=10ms TTL=128

Ping statistics for 127.0.0.1:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 10ms, Maximum = 20ms, Average = 12ms</pre>

<p>
Com podeu veure, hi ha resposta, fet que indica que la pila de protocols TCP/IP està instal·lada correctament.
</p>

<p>
Ara comproveu l’adreça IP del servidor i mireu si està configurada amb el mateix criteri que el PC.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Adreça de xarxa</p>
<p>
L’adreça de xarxa 192.168.0.0/24 resumeix les adreces compreses entre 192.168.0.0 i 192.168.0.255, totes dues incloses.
</p>
</div></div><pre class="code">SERVER&gt;ipconfig /all

Physical Address................: 0001.423A.39C2
IP Address......................: 192.168.0.100
Subnet Mask.....................: 255.255.255.0
Default Gateway.................: 192.168.0.1
DNS Servers.....................: 0.0.0.0</pre>

<p>
Podeu veure com l’adreça pertany a la mateixa xarxa 192.168.0.0/24 i que, per tant, pel que fa a la configuració sembla correcta. La <span class="tabref"><a href="#Table4"><span>taula</span></a></span> reflecteix la configuració dels dos equips.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table4"><span>Taula: </span></a>Adreçaments de xarxa</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0"> Equip </th><th class="col1"> Adreça IP </th><th class="col2"> Màscara de xarxa </th><th class="col3"> Porta d’enllaç </th>
	</tr>
	<tr class="row1">
		<td class="col0"> PC-Escriptori </td><td class="col1"> 192.168.0.5 </td><td class="col2"> 255.255.255.0 </td><td class="col3"> 192.168.0.1 </td>
	</tr>
	<tr class="row2">
		<td class="col0"> Servidor-Web </td><td class="col1"> 192.168.0.100 </td><td class="col2"> 255.255.255.0 </td><td class="col3"> 192.168.0.1 </td>
	</tr>
</table></div>
</div>
<p>
Proveu, doncs, a fer el <em>ping</em> des del PC al servidor.
</p>
<pre class="code">PC&gt;ping 192.168.0.100

Pinging 192.168.0.100 with 32 bytes of data:

Request timed out.
Request timed out.
Request timed out.
Request timed out.

Ping statistics for 192.168.0.100:
    Packets: Sent = 4, Received = 0, Lost = 4 (100% loss),</pre>

<p>
Podeu observar que no hi ha resposta. Atès que la configuració sembla correcta, reviseu el cablatge dels diferents equips implicats en el procés de comunicació.
</p>

<p>
Com podeu veure, la connexió entre el PC i el commutador està en vermell, mentre que la connexió entre el commutador i el servidor està en verd. Això, si es tractés d’uns equips reals, seria l’equivalent a comprovar els LED de senyalització dels connectors de xarxa i dir que no hi ha connectivitat entre el PC i el commutador.
</p>

<p>
Amb una revisió més acurada podeu apreciar com el cable de xarxa que uneix el PC amb el commutador, que és el que no funciona, és de tipus discontinu, mentre que el que uneix el servidor amb el commutador és continu. Segons les especificacions dels <em>packet tracer</em>, el primer és de tipus creuat i el segon pla.
</p>

<p>
Recordeu que quan un PC es connecta a un concentrador o commutador heu de fer servir cables plans, ja que si no és així el més probable és que no hi hagi connexió.
</p>

<p>
Canvieu el tipus de cable entre el PC i el commutador per un de pla i comproveu de nou si hi ha connectivitat. El nou diagrama hauria de ser similar al de la <span class="figref"><a href="#Figure8"><span>figura</span></a></span>.
</p>
<div class="iocfigure"><a name="Figure8"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Laboratori operatiu

</figcaption><img src="../media/ic10m5u5_08.png" alt="" /></figure>
<div class="footfigure">| |Cisco packet tracer</div></div>
<p>
Ara feu el <em>ping</em> i verifiqueu que els <em>pings</em> arriben a la destinació.
</p>
<pre class="code">PC&gt;ping 192.168.0.100

Pinging 192.168.0.100 with 32 bytes of data:

Reply from 192.168.0.100: bytes=32 time=101ms TTL=128
Reply from 192.168.0.100: bytes=32 time=50ms TTL=128
Reply from 192.168.0.100: bytes=32 time=40ms TTL=128
Reply from 192.168.0.100: bytes=32 time=40ms TTL=128

Ping statistics for 192.168.0.100:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 40ms, Maximum = 101ms, Average = 57ms</pre>

<p>
Tal com es mostra en el resultat, tots els <em>pings</em> han arribat a la destinació i, per tant, la connexió ha quedat restablerta. Sols resta comprovar que el servidor web torna a ser accessible. Si ho és, vol dir que el servidor proporciona aquest servei i que el port 80 (que correspon a HTTP) és accessible; si no poguéssim accedir al servidor caldria verificar aquestes dues coses.
</p>

<p>
Obriu de nou el navegador web des del PC i comproveu que la plana web es carrega correctament com es pot observar en la <span class="figref"><a href="#Figure9"><span>figura</span></a></span>.
</p>
<div class="iocfigure"><a name="Figure9"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Servidor web operatiu 

</figcaption><img src="../media/ic10m5u5_09.png" alt="" /></figure>
</div>
<p>
Un cop fetes aquestes comprovacions ja podeu informar a l’usuari que pot tornar a fer servir la plana web.
</p>

</div>

<h3><a id="configuracio_i_diagnostic_dels_equips_de_xarxa" >Configuració i diagnòstic dels equips de xarxa</a></h3>
<div class="level3">

<p>
Carregueu el segon laboratori, el <em>lab2</em>, en el <em>packet tracer</em> i verifiqueu que la topologia és similar a la de la <span class="figref"><a href="#Figure10"><span>figura</span></a></span>.
</p>
<div class="iocfigure"><a name="Figure10"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Laboratori cas pràctic 2

</figcaption><img src="../media/ic10m5u5_10.png" alt="" /></figure>
</div>
<p>
A última hora de la tarda, quan ja sortíeu per la porta de la feina, rebeu una trucada al vostre telèfon mòbil informant-vos que el vostre gerent acaba d’arribar d’una important reunió de negocis i com a conseqüència dels temes tractats vol actualitzar la base de dades de l’empresa però la seva connexió no funciona correctament. És necessari que torneu a l’oficina per solucionar el problema.
</p>

<p>
El primer que heu de fer és demanar l’ordinador portàtil del gerent per tal de fer les proves pertinents.
</p>

<p>
Proveu de connectar-vos al servidor web des del portàtil i comproveu si la pàgina web que permet introduir dades en la base de dades es carrega correctament. Hauríeu de veure una cosa similar a la <span class="figref"><a href="#Figure11"><span>figura</span></a></span>.
</p>
<div class="iocfigure"><a name="Figure11"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Servidor web no accessible

</figcaption><img src="../media/ic10m5u5_11.png" alt="" /></figure>
</div>
<p>
Efectivament, sembla que no es connecta correctament, ja que rebeu una resposta del navegador web de tipus <em>request timeout</em>, sol·licitud de temps d’espera.
</p>

<p>
Atès que esteu tractant un ordinador una mica crític i no teniu molt clar l’estat actual de la xarxa després dels diversos canvis que s’han fet pel que fa a la topologia i la incorporació de nou personal tècnic, estimeu convenient anar a cercar la documentació sobre l’adreçament IP i els equips implicats.
</p>

<p>
La <span class="tabref"><a href="#Table5"><span>taula</span></a></span> mostra el que teniu documentat.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table5"><span>Taula: </span></a>Inventari i connexions dels dispositius</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0"> Nom equip </th><th class="col1"> Adreça IP </th><th class="col2"> Màscara de xarxa </th><th class="col3"> Porta d’enllaç </th><th class="col4"> Equip on està connectat </th><th class="col5"> Tipus d’equip </th>
	</tr>
	<tr class="row1">
		<td class="col0"> Recepció </td><td class="col1"> 192.168.20.10 </td><td class="col2"> 255.255.255.0 </td><td class="col3"> 192.168.20.1 </td><td class="col4"> Commutador (Fa1/1) </td><td class="col5"> PC escriptori </td>
	</tr>
	<tr class="row2">
		<td class="col0"> Administració </td><td class="col1"> 192.168.20.11 </td><td class="col2"> 255.255.255.0 </td><td class="col3"> 192.168.20.1 </td><td class="col4"> Commutador (Fa2/1) </td><td class="col5"> PC escriptori </td>
	</tr>
	<tr class="row3">
		<td class="col0"> Gerent </td><td class="col1"> 192.168.20.12 </td><td class="col2"> 255.255.255.0 </td><td class="col3"> 192.168.20.1 </td><td class="col4"> Commutador (Fa3/1) </td><td class="col5"> PC portàtil </td>
	</tr>
	<tr class="row4">
		<td class="col0"> Magatzem </td><td class="col1"> 192.168.1.5 </td><td class="col2"> 255.255.255.0 </td><td class="col3"> 192.168.1.1 </td><td class="col4"> Encaminador (Fa1/0) </td><td class="col5"> PC escriptori </td>
	</tr>
	<tr class="row5">
		<td class="col0"> BD_Productes </td><td class="col1"> 172.16.255.100 </td><td class="col2"> 255.255.0.0 </td><td class="col3"> 172.16.255.1 </td><td class="col4"> Encaminador (Fa2/0) </td><td class="col5"> Servidor BD </td>
	</tr>
	<tr class="row6">
		<td class="col0"> Commutador </td><td class="col1"> - </td><td class="col2"> - </td><td class="col3"> - </td><td class="col4"> Fa0/1 - Encaminador (Fa0/0) </td><td class="col5"> Commutador nivell 2 </td>
	</tr>
	<tr class="row7">
		<td class="col0"> Encaminador </td><td class="col1"> 192.168.20.1 <br/>
192.168.1.1 <br/>
172.16.255.1 <br/>
</td><td class="col2 leftalign">  </td><td class="col3"> - </td><td class="col4"> Fa0/0 – Commutador (Fa0/1) <br/>
Fa1/0 – PC magatzem <br/>
Fa2/0 – Servidor productes <br/>
 <br/>
</td><td class="col5"> Encaminador nivell 3-4 </td>
	</tr>
</table></div>
</div>
<p>
Amb la documentació a les nostres mans, apreciem com l’ordinador de recepció, administració i el del gerent comparteixen el mateix adreçament IP, el pertanyent a la xarxa 192.168.20.0/24.
</p>

<p>
Una bona pràctica és consultar a la gent del mateix departament o àrea que nosaltres sabem que comparteixen el mateix equipament de xarxa, en aquest cas el commutador, si ells també tenen problemes.
</p>

<p>
La resposta és unànime: a tots ells els funciona correctament la xarxa, i no tenen problemes per connectar-se entre si, però del servidor de productes no saben res, ja que no el fan servir.
</p>

<p>
Quines altres preguntes considereu adient fer al gerent o a la resta de personal?
</p>

<p>
Ara, agafeu el portàtil del gerent i proveu de fer <em>ping</em> a la porta d’enllaç, la qual, segons la documentació, és la 192.168.20.1. 
</p>
<pre class="code">Packet Tracer PC Command Line 1.0
PC&gt;ping 192.168.20.1

Pinging 192.168.20.1 with 32 bytes of data:

Request timed out.
Request timed out.
Request timed out.
Request timed out.

Ping statistics for 192.168.20.1:
    Packets: Sent = 4, Received = 0, Lost = 4 (100% loss),

PC&gt;</pre>

<p>
Tal com podeu veure, els <em>pings</em> no han arribat a la seva destinació. Comproveu la configuració de xarxa de l’equip per veure que els valors definits són els que corresponen. Per això, fem servir l’ordre <em>ipconfig</em>.
</p>
<pre class="code">PC&gt;ipconfig /all

Physical Address................: 000C.85D8.7374
IP Address......................: 10.10.5.8
Subnet Mask.....................: 255.0.0.0
Default Gateway.................: 10.10.5.1
DNS Servers.....................: 0.0.0.0

PC&gt;</pre>

<p>
Són correctes les dades que veieu? Modifiqueu l’adreça IP, la màscara de xarxa i la porta d’enllaç amb les dades que corresponen segons la documentació de la <span class="tabref"><a href="#Table5"><span>taula</span></a></span>. 
</p>

<p>
Podeu fer servir la mateixa ordre <em>ipconfig</em> per canviar aquests valors. Si no sabeu la sintaxi, feu servir el paràmetre <strong>/?</strong>.
</p>
<pre class="code">PC&gt;ipconfig /?
Packet Tracer PC IP Configuration

Usage:
ipconfig { /? | /renew | /release | &lt;IP&gt; &lt;subnet mask&gt; 
[&lt;default gateway&gt;] }</pre>

<p>
Ara, definiu els nous valors i comproveu que s’han introduït correctament.
</p>
<pre class="code">PC&gt;ipconfig 192.168.20.12 255.255.255.0 192.168.20.1
PC&gt;ipconfig /all

Physical Address................: 000C.85D8.7374
IP Address......................: 192.168.20.12
Subnet Mask.....................: 255.255.255.0
Default Gateway.................: 192.168.20.1
DNS Servers.....................: 0.0.0.0</pre>

<p>
A continuació, feu <em>ping</em> de nou a la porta d’enllaç per comprovar que la connexió ha estat restablerta.
</p>
<pre class="code">PC&gt;ping 192.168.20.1

Pinging 192.168.20.1 with 32 bytes of data:

Reply from 192.168.20.1: bytes=32 time=70ms TTL=255
Reply from 192.168.20.1: bytes=32 time=50ms TTL=255
Reply from 192.168.20.1: bytes=32 time=40ms TTL=255
Reply from 192.168.20.1: bytes=32 time=80ms TTL=255

Ping statistics for 192.168.20.1:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 40ms, Maximum = 80ms, Average = 60ms</pre>

<p>
Ara, verifiqueu que també podeu fer <em>ping</em> a la resta d’ordinadors de la mateixa xarxa i, finalment, comproveu que el servidor també respon.
</p>
<pre class="code">PC&gt;ping 172.16.255.100

Pinging 172.16.255.100 with 32 bytes of data:

Reply from 172.16.255.100: bytes=32 time=80ms TTL=127
Reply from 172.16.255.100: bytes=32 time=70ms TTL=127
Reply from 172.16.255.100: bytes=32 time=70ms TTL=127
Reply from 172.16.255.100: bytes=32 time=61ms TTL=127

Ping statistics for 172.16.255.100:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 61ms, Maximum = 80ms, Average = 70ms</pre>

<p>
El servidor ja respon amb l’adreçament IP que correspon a l’ordinador. Proveu una altra vegada que el servidor web mostra la pàgina.
</p>

<p>
Us heu pogut connectar al servidor web? Torneu a veure el mateix resultat que a la <span class="figref"><a href="#Figure11"><span>figura</span></a></span>? Quin pot ser el motiu?
</p>

<p>
Comproveu que el servidor web és accessible des d’un altre ordinador del mateix rang, com per exemple el d’administració, i des de d’un altre d’extern com el del magatzem.
</p>

<p>
Heu pogut accedir des de l’ordinador d’administració? I des del de magatzem?
</p>

<p>
Recordeu que tot i que el cablatge i la configuració IP sigui correcta és possible que certs serveis no estiguin disponibles. A quin nivell pertany el servei al qual esteu intentant accedir? En quin nivell es poden establir els filtres que ens permeten o deneguen els accessos a determinats serveis o aplicacions?
</p>

<p>
Un company vostre us informa que durant els dies que vosaltres heu estat fora de l’oficina per les vacances d’estiu el mateix gerent va ordenar que des dels ordinadors d’administració i recepció no es pogués accedir al servidor però, és clar, no va tenir en compte que això també l’afectaria a ell el dia que volgués accedir al servidor. Així doncs, li comenteu el problema i demana que traieu aquest impediment ràpidament.
</p>

<p>
Reviseu la documentació i no veieu cap registre del dia que es van habilitar els filtres d’accés. Així doncs, com que no teniu informació pel que fa a això heu d’investigar on estan aquests filtres.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
En un escenari molt gran, això podria portar hores si no està documentat, ja que cada ordinador client o el servidor mateix podria tenir un tallafocs de tipus programari que estigués filtrant el trànsit.
</p>
</div></div>
<p>
El mateix company que us ha informat sobre l’activació dels filtres durant les vacances d’estiu us diu que com que la xarxa no disposa de tallafocs dedicat i no hi havia pressupost per a comprar-ne un es va decidir habilitar una llista de control d’accés (<acronym title="Access Control List">ACL</acronym>) en l’encaminador mateix.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">CLI</p>
<p>
El CLI és el <em>command line interface</em>, el qual és un intèrpret d’ordres que ens permet donar instruccions al dispositiu. És el mecanisme habitual de gestió dels dispositius de xarxa que no disposen de servidor web de gestió.
</p>
</div></div>
<p>
Connecteu-vos a l’encaminador i feu clic damunt de la pestanya on diu <em>CLI</em>. Veureu la informació següent:
</p>
<pre class="code">Encaminador con0 is now available


Press RETURN to get started.</pre>

<p>
Pressioneu la tecla d’entrar i accedireu a l’intèrpret d’ordres.
</p>

<p>
A continuació, escriviu l’ordre <em>enable</em> i a continuació <em>show running-config</em>.
</p>
<pre class="code">Encaminador&gt;
Encaminador&gt;enable
Encaminador#show running-config</pre>

<p>
A continuació, veureu tota la configuració del dispositiu de xarxa; pareu especial atenció a les línies on es defineixen les llistes de control d’accés (<acronym title="Access Control List">ACL</acronym>).
</p>
<pre class="code">Building configuration...

Current configuration : 852 bytes
!
version 12.2
no service timestamps log datetime msec
no service timestamps debug datetime msec
no service password-encryption
!
hostname Encaminador
!
!
!
!
!
!
!
!
!
!
ip name-server 0.0.0.0
!
!
!
!
!
!
interface FastEthernet0/0
 ip address 192.168.20.1 255.255.255.0
 ip access-group SERVIDOR-MAGATZEM in
 duplex auto
 speed auto
!
interface FastEthernet1/0
 ip address 192.168.1.1 255.255.255.0
 duplex auto
 speed auto
!
interface FastEthernet2/0
 ip address 172.16.255.1 255.255.0.0
 duplex auto
 speed auto
!
interface FastEthernet3/0
 no ip address
 duplex auto
 speed auto
!
router rip
!
ip classless
!
!
ip access-list extended SERVIDOR-MAGATZEM
 deny tcp 192.168.20.0 0.0.0.255 host 172.16.255.100 eq www
 deny tcp 192.168.20.0 0.0.0.255 host 172.16.255.100 eq 443
 permit ip any any
!
!
!
!
!
!
!
line con 0
line vty 0 4
 login
!
!
!
end


Encaminador#</pre>

<p>
La primera ordre carrega en la interfície de xarxa Fa0/0, que és la que dóna connexió als ordinadors connectats al commutador, una llista d’accés que es diu <strong>SERVIDOR-MAGATZEM</strong>, la qual, segons podeu veure en les ordres posteriors, filtra tot el trànsit de tipus web que s’origina a la xarxa 192.168.20.0/24 cap al servidor 172.16.255.100. Tota la resta de trànsit està permès.
</p>

<p>
Per tant, el que farem per eliminar la llista de control d’accés i poder accedir al servidor web és el següent:
</p>
<pre class="code">Encaminador#configure terminal
Enter configuration commands, one per line.  End with CNTL/Z.
Encaminador(config)#interface fa0/0
Encaminador(config-if)#no ip access-group SERVIDOR-MAGATZEM in
Encaminador(config-if)#exit
Encaminador(config)#no ip access-list extended SERVIDOR-MAGATZEM
Encaminador(config)#exit
Encaminador#
%SYS-5-CONFIG_I: Configured from console by console
Encaminador#write mem
Building configuration...
[OK]
Encaminador#</pre>

<p>
Ara ja hem eliminat la llista de control d’accés; proveu si podeu connectar correctament al servidor web mitjançant el navegador. Hauríeu de veure una cosa similar a la <span class="figref"><a href="#Figure12"><span>figura</span></a></span>.
</p>
<div class="iocfigure"><a name="Figure12"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Servidor web operatiu

</figcaption><img src="../media/ic10m5u5_12.png" alt="" /></figure>
</div>
<p>

</p>

<p>
Ja podeu notificar al gerent que pot accedir correctament al servidor web. Si ell us diu que tot està correcte podreu marxar a casa.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
És important que tots els canvis que heu fet, pel que fa a la modificació de configuració de l’encaminador, canvi d’adreçament IP, etc., quedin reflectits en la documentació, ja que potser més endavant torna a passar alguna cosa similar a la d’avui i el tècnic que s’hagi de fer càrrec de la incidència pot fer servir la vostra experiència per mirar de resoldre la incidència amb menys temps i amb més professionalitat.
</p>
</div></div>
<p>
En aquest cas, la llista de control d’accés estava en l’encaminador, l’únic de la xarxa, però en empreses grans normalment hi ha diversos commutadors, encaminadors, servidors i diversos tallafocs a escala de maquinari i de programari. Si la documentació no preveu de manera acurada la configuració real dels equips, trobar la font del problema pot esdevenir una tasca molt feixuga.
</p>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u5/resum.html">Resum</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u5/a1/activitats.html">Activitats</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
