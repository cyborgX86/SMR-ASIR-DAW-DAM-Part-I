<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
	
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Implantació de sistemes operatius (ASIX)\ Sistemes informàtics (DAM i DAW)</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Implantació de sistemes operatius (ASIX)\ Sistemes informàtics (DAM i DAW)">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html">Implantació de sistemes operatius (ASIX)\ Sistemes informàtics (DAM i DAW)</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u9" class="parentnode"><p><a class="unit" href="../../../WebContent/u9/introduccio.html">9. Seguretat, rendiment i recursos</a></p><ul class="expander"><li id="u9introduccio"><a href="../../../WebContent/u9/introduccio.html">Introducció</a></li><li id="u9resum"><a href="../../../WebContent/u9/resum.html">Resum</a></li><li id="u9objectius"><a href="../../../WebContent/u9/objectius.html">Resultats d'aprenentatge</a></li><li id="u9mapa"><a href="../../../WebContent/u9/mapa.html">Mapa conceptual</a></li><li id="u9referencies"><a href="../../../WebContent/u9/referencies.html">Referències</a></li><li id="u9a1" class="tocsection"><p id='u9a1continguts'><a class="section" href="../../../WebContent/u9/a1/continguts.html">Assegurament de la informació</a><span class="buttonexp"></span></p><ul><li id="u9a1activitats"><a href="../../../WebContent/u9/a1/activitats.html">Activitats</a></li><li id="u9a1exercicis"><a href="../../../WebContent/u9/a1/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u9a1' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u9/a1/continguts.html#associacio_de_discos">Associació de discos</a></li><li><a href="../../../WebContent/u9/a1/continguts.html#tolerancia_a_fallades_del_maquinari">Tolerància a fallades del maquinari</a></li><li><a href="../../../WebContent/u9/a1/continguts.html#sistemes_redundants_raid">Sistemes redundants RAID</a></li><li><a href="../../../WebContent/u9/a1/continguts.html#associacio_d_ordinadorsclusteritzacio">Associació d'ordinadors: clusterització</a></li><li><a href="../../../WebContent/u9/a1/continguts.html#copies_de_seguretat">Còpies de seguretat</a></li><li><a href="../../../WebContent/u9/a1/continguts.html#recuperacio_en_cas_de_fallada_del_sistema">Recuperació en cas de fallada del sistema</a></li></ul></div></div><li id="u9a2" class="tocsection"><p id='u9a2continguts'><a class="section" href="../../../WebContent/u9/a2/continguts.html">Supervisió del rendiment del sistema</a><span class="buttonexp"></span></p><ul><li id="u9a2activitats"><a href="../../../WebContent/u9/a2/activitats.html">Activitats</a></li><li id="u9a2exercicis"><a href="../../../WebContent/u9/a2/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u9a2' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u9/a2/continguts.html#monitoratge_del_rendiment_dels_components_d_un_sistema_informatic">Monitoratge del rendiment dels components d'un sistema informàtic</a></li><li><a href="../../../WebContent/u9/a2/continguts.html#enregistrament_i_monitoratge_d_esdeveniments">Enregistrament i monitoratge d'esdeveniments</a></li><li><a href="../../../WebContent/u9/a2/continguts.html#gestio_d_aplicacions_i_processos">Gestió d'aplicacions i processos</a></li></ul></div></div><li id="u9a3" class="tocsection"><p id='u9a3continguts'><a class="section" href="../../../WebContent/u9/a3/continguts.html">Directives de seguretat i auditories</a><span class="buttonexp"></span></p><ul><li id="u9a3activitats"><a href="../../../WebContent/u9/a3/activitats.html">Activitats</a></li><li id="u9a3exercicis"><a href="../../../WebContent/u9/a3/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u9a3' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u9/a3/continguts.html#auditoria_de_sistemes_informatics">Auditoria de sistemes informàtics</a></li><li><a href="../../../WebContent/u9/a3/continguts.html#auditoria_en_sistemes_operatius_propietaris">Auditoria en sistemes operatius propietaris</a></li><li><a href="../../../WebContent/u9/a3/continguts.html#auditoria_en_sistemes_operatius_lliures">Auditoria en sistemes operatius lliures</a></li></ul></div></div></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../introduccio.html">Seguretat, rendiment i recursos</a></li><li><a href="continguts.html">Directives de seguretat i auditories</a></li><li>Activitats</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="activitats"> Activitats </a></h1>
    	
<h2><a id="configuracio_d_arxius_de_registre_a_windows" >Configuració d&#039;arxius de registre a Windows</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat consisteix a configurar les propietats dels <strong>arxius de registre de Windows</strong> per determinar la seva mida màxima i les accions a efectuar si se sobrepassa aquesta mida.
</p>

<p>
Configureu el registre de seguretat de Windows per una mida màxima de 5 megabytes i que s’arxivi automàticament quan estigui ple.
</p>

<p>
<form action=""><div class="solution ioccontent">
<p>
Primer s’ha d’accedir al visor de successos mitjançant la finestra d’execució (Tecla_Windows+R) i cridar la consola eventvwr.msc o bé en el menú principal triar <strong>Tauler de control / Sistema i seguretat / Eines Administratives / Visor d’esdeveniments</strong>.
</p>

<p>
Ara seleccioneu el registre de seguretat que demana l’enunciat <strong>(Registres de Windows / Seguretat</strong>) i en el menú contextual (botó dret del ratolí) seleccionar <strong>Propietats</strong>, on es podran configurar les opcions demanades:
</p>

<p>
<div class="imgelem">
<img src="../media/activ_registre02.png" title="Opcions registre de seguretat" alt="Opcions registre de seguretat" /></div>

</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="directives_de_seguretat_local_drets_d_usuari" >Directives de seguretat local. Drets d&#039;usuari</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat consisteix a assignar <strong>drets d’usuari</strong> mitjançant la configuració de <strong>directives de seguretat local</strong>.
</p>

<p>
Configura directives de seguretat local que permetin dissenyar la següent política de seguretat:
</p>
<ul>
<li class="level1"><div class="li"> Per defecte només els administradors poden canviar l’hora del sistema. Voleu que també ho puguin fer qualsevol usuaris autentificat.</div>
</li>
<li class="level1"><div class="li"> Els usuaris normals no tindran dret a apagar el sistema.</div>
</li>
<li class="level1"><div class="li"> Voleu habilitar el compte de “invitado”.</div>
</li>
<li class="level1"><div class="li"> Voleu canviar-li el nom al català per “invitat”.</div>
</li>
<li class="level1"><div class="li"> No s’ha de permetre que els invitats iniciïn una sessió local.</div>
</li>
</ul>

<p>
Podeu crear un compte d’usuari normal no administrador per comprovar el funcionament de les directives de seguretat local.
</p>

<p>
<form action=""><div class="solution ioccontent"><ul>
<li class="level1"><div class="li"> La consola d’edició de directives de grup local a Windows es pot obrir amb la finestra d’execució (Tecla_Windows+R) i endegant la consola gpedit.msc. </div>
</li>
<li class="level1"><div class="li"> Una vegada oberta cal triar a la secció de l’esquerra el menú de “Configuració de l’equip” i obrir el submenú <strong>Configuració de Windows / Configuració de seguretat / Directives locals</strong>. </div>
</li>
<li class="level1"><div class="li"> Algunes de les directives que us demanen les podeu configurar a la secció “d’<strong>Assignació de drets d’usuari</strong>” com podeu veure a la figura:</div>
</li>
</ul>

<p>
<div class="imgelem">
<img src="../media/activ_directives_01.png" alt="" /></div>

</p>
<ul>
<li class="level1"><div class="li"> Per habilitar el compte de ”<em>invitado</em>” i canviar-li el nom al català per “invitat” haureu de trobar les directives a la secció “d’<strong>Opcions de seguretat</strong>”.</div>
</li>
</ul>

<p>
<div class="imgelem">
<img src="../media/activ_directives_02.png" alt="" /></div>

</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="configuracio_d_auditoria_en_windows" >Configuració d&#039;auditoria en Windows</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat consisteix a activar l’<strong>auditoria</strong> i configurar la recollida de diversos tipus de dades de seguretat.
</p>

<p>
<strong>Escenari 1. Control d’accessos d’inici de sessió erronis</strong>
</p>
<ul>
<li class="level1"><div class="li"> Voleu detectar intents d’accés no autoritzats al sistema per prevenir atacs d’obtenció de contrasenyes d’usuari per força bruta. </div>
</li>
<li class="level1"><div class="li"> Heu d’activar i configurar l’auditoria per enregistrar els intents de <em>login</em> erronis per contrasenya incorrecta. </div>
</li>
<li class="level1"><div class="li"> Comprovar el registre i filtrar els resultats fent servir el visor d’esdeveniments.</div>
</li>
</ul>

<p>
<strong>Escenari 2. Control d’accés a un directori</strong>
</p>
<ul>
<li class="level1"><div class="li"> Voleu controlar l’accés a un directori de dades comercials (\DadesComercials). </div>
</li>
<li class="level1"><div class="li"> Aquest directori té els permisos NTFS configurats perquè només puguin accedir-hi el grup d’administradors. </div>
</li>
<li class="level1"><div class="li"> Cal registrar els accessos per llegir o escriure tant per part d’usuaris autoritzats com pels intents d’accés d’usuaris no autoritzats. </div>
</li>
<li class="level1"><div class="li"> Configurar l’auditoria, i comprovar i filtrar els resultats fent servir el visor d’esdeveniments.</div>
</li>
</ul>

<p>
<form action=""><div class="solution ioccontent">
<p>
<strong>Escenari 1. Control d’accessos d’inici de sessió erronis</strong>
</p>
<ul>
<li class="level1"><div class="li"> Primer de tot obriu la consola de configuració de directives de grup local amb la finestra d’execució (Tecla_Windows+R), endegant la consola <strong>gpedit.msc</strong>.</div>
</li>
<li class="level1"><div class="li"> En aquesta consola seleccionareu <strong>Configuració del equip / Configuració de Windows / Configuració de seguretat / Directives locals / Directiva d’auditoria</strong>.</div>
</li>
<li class="level1"><div class="li"> Seleccionareu l’opció <strong>Auditar esdeveniments d’inici de sessió</strong> indicant que voleu enregistrar els successos erronis:</div>
</li>
</ul>

<p>
<div class="imgelem">
<img src="../media/activ_auditoria_01.png" alt="" /></div>

</p>

<p>
Ara podeu comprovar el correcte funcionament de l’auditoria fent alguns intents d’accés amb contrasenyes errònies i consultant el visor d’esdeveniments.
</p>
<ul>
<li class="level1"><div class="li"> Obrir el visor d’esdeveniments amb la finestra d’execució (Tecla_Windows+R), cridant la consola <strong>eventvwr.msc</strong>.</div>
</li>
<li class="level1"><div class="li"> Els esdeveniments enregistrats per l’auditoria que heu activat els trobareu a la secció <strong>Registres de Windows / Seguretat</strong>.</div>
</li>
<li class="level1"><div class="li"> Per facilitar la tasca de seguiment podeu crear un filtre per seleccionar només els successos que us interessin. Anireu a la secció <strong>Vistes personalitzades</strong> i a la dreta <strong>Crear vista personalitzada</strong> on configurareu el següent:</div>
<ul>
<li class="level3"><div class="li"> Seleccionareu el registre a <strong>Registres de Windows / Seguretat</strong>.</div>
</li>
<li class="level3"><div class="li"> Com origen de l’esdeveniment triareu <strong>Auditoria de Seguretat de Microsoft Windows</strong>.</div>
</li>
<li class="level3"><div class="li"> Com a categoria de la tasca: <strong>Inici de sessió</strong>.</div>
</li>
<li class="level3"><div class="li"> Com a paraules clau: <strong>errors d’auditoria</strong>.</div>
</li>
</ul>
</li>
</ul>

<p>
<div class="imgelem">
<img src="../media/activ_auditoria_02.png" alt="" /></div>

</p>
<ul>
<li class="level1"><div class="li"> Ja podeu donar nom al nou filtre i visualitzar-ne el resultat:</div>
</li>
</ul>

<p>
<div class="imgelem">
<img src="../media/activ_auditoria_03.png" alt="" /></div>

</p>

<p>
<strong>Escenari 2. Control d’accés a un directori</strong>
</p>

<p>
En primer lloc heu de preparar les condicions de l’escenari:
</p>
<ul>
<li class="level1"><div class="li"> Crear un nou directori anomenat \DadesComercials.</div>
</li>
<li class="level1"><div class="li"> Incloure-hi dintre algun arxiu de text.</div>
</li>
<li class="level1"><div class="li"> Canviar-li els permisos de seguretat NTFS perquè només puguin accedir-hi usuaris del grup d’administradors.</div>
</li>
</ul>

<p>
Ara activareu l’auditoria sobre aquest objecte:
</p>
<ul>
<li class="level1"><div class="li"> En primer lloc haureu de configurar l’activació de la directiva de grup local referent a l’auditoria d’accés a objectes. Aneu a la consola de configuració de directives de grup local i seleccioneu <strong>Configuració del equip / Configuració de Windows / Configuració de seguretat / Directives locals / Directiva d’auditoria</strong>.</div>
</li>
<li class="level1"><div class="li"> Seleccionareu l’opció <strong>Auditar l’accés a objectes</strong> indicant que voleu enregistrar tant els successos correctes com els erronis:</div>
</li>
</ul>

<p>
<div class="imgelem">
<img src="../media/activ_auditoria_04.png" alt="" /></div>

</p>
<ul>
<li class="level1"><div class="li"> Ara ja podeu configurar l’auditoria concreta del directori. Seleccioneu les propietats del directori \DadesComercials i a la pestanya de seguretat trieu el botó d’<strong>Opcions avançades</strong>.</div>
</li>
<li class="level1"><div class="li"> Dintre de les opcions avançades hi ha una pestanya d’auditoria a la qual només tindreu accés amb permisos d’administrador i així podreu agregar una nova entrada d’auditoria. S’ha de configurar sobre quins usuaris o grups recollireu dades quan accedeixin a l’objecte; en aquest cas podeu triar l’entitat integrada de sistema <em>Todos</em>.</div>
</li>
<li class="level1"><div class="li"> Seguidament seleccioneu les operacions que s’auditaran. En aquest cas marcareu les operacions de lectura i d’escriptura:</div>
</li>
</ul>

<p>
<div class="imgelem">
<img src="../media/activ_auditoria_05.png" alt="" /></div>

</p>

<p>
Ja està configurada l’auditoria en aquest segon escenari. Per comprovar-ne el funcionament podeu fer diferents accessos de lectura/escriptura al directori \DadesComercials amb un usuari autoritzat i un altre no autoritzat i consultar el visor d’esdeveniments.
</p>
<ul>
<li class="level1"><div class="li"> Obrir el visor d’esdeveniments amb la finestra d’execució (Tecla_Windows+R) i cridar la consola <strong>eventvwr.msc</strong>.</div>
</li>
<li class="level1"><div class="li"> Els esdeveniments enregistrats per l’auditoria que heu activat els trobareu a la secció <strong>Registres de Windows / Seguretat</strong>.</div>
</li>
<li class="level1"><div class="li"> Per facilitar la tasca de seguiment podeu crear un filtre per seleccionar només els successos que us interessin. Anireu a la secció <strong>Vistes personalitzades</strong> i a la dreta <strong>Crear vista personalitzada</strong> on configurareu el següent:</div>
<ul>
<li class="level3"><div class="li"> Seleccionareu el registre a <strong>Registres de Windows / Seguretat</strong></div>
</li>
<li class="level3"><div class="li"> Com origen de l’esdeveniment triareu <strong>Auditoria de Seguretat de Microsoft Windows</strong></div>
</li>
<li class="level3"><div class="li"> Com a categoria de la tasca: <strong>Sistema d’arxius</strong></div>
</li>
<li class="level3"><div class="li"> Com a paraules clau; <strong>Auditoria correcta, error d’auditoria</strong></div>
</li>
</ul>
</li>
</ul>

<p>
<div class="imgelem">
<img src="../media/activ_auditoria_06.png" alt="" /></div>

</p>
<ul>
<li class="level1"><div class="li"> Ja podeu donar nom al nou filtre i visualitzar-ne el resultat.</div>
</li>
</ul>

<p>
Cal recomanar que les auditories han de fer-se tan restrictives com sigui possible quant al nombre d’objectes auditats i als usuaris als quals s’audita. D’altra manera l’equip pot baixar dràsticament el seu rendiment per l’ús intensiu de processador i accessos a disc que necessita el registre dels esdeveniments.
</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="alarmes_d_auditoria" >Alarmes d&#039;auditoria</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat consisteix a <strong>programar una alarma</strong> que es dispari en produir-se un esdeveniment d’auditoria fent servir el programador de tasques de Windows.
</p>
<ul>
<li class="level1"><div class="li"> Es proposa configurar una alarma que es dispari quan algú intenti accedir al sistema amb una contrasenya errònia i que presenti com a acció mostrar un missatge d’avís en pantalla.</div>
</li>
</ul>

<p>
<form action=""><div class="solution ioccontent">
<p>
Per programar una alarma es pot fer utilitzant el mateix programador de tasques de Windows o mitjançant l’opció de l’assistent que ofereix el visor d’esdeveniments mateix i que permet adjuntar tasques bàsiques a successos concrets. Ho fareu amb aquesta darrera opció:
</p>
<ul>
<li class="level1"><div class="li"> Com a requisit previ heu de tenir activada l’auditoria d’inici de sessió. Recordeu que es pot fer servir l’auditoria bàsica o l’auditoria avançada que disposa de subcategories més precises però que, en tot cas, són incompatibles entre elles.</div>
</li>
<li class="level1"><div class="li"> Per accedir a l’assistent de tasques del visor de successos heu de fer servir la finestra d’execució (Tecla_Windows+R) i cridar la consola eventvwr.msc o bé en el menú principal triar <strong>Tauler de control / Sistema i seguretat / Eines Administratives / Visor d’esdeveniments</strong>. </div>
</li>
<li class="level1"><div class="li"> Llavors cal triar el registre de seguretat Windows, cercar algun esdeveniment corresponent a un inici de sessió erroni i amb el menú contextual (botó dret del ratolí) seleccionar <strong>Adjuntar tasca a aquest esdeveniment</strong> tal com indica la figura següent:</div>
</li>
</ul>

<p>
<div class="imgelem">
<img src="../media/activ_alarmes.png" alt="" /></div>

</p>
<ul>
<li class="level1"><div class="li"> Una vegada endegat l’assistent només cal configurar “Mostrar un missatge” com a acció associada al succés d’inici de sessió erroni.</div>
</li>
<li class="level1"><div class="li"> Si posteriorment voleu ajustar o canviar la configuració d’aquesta alarma ho podeu fer directament amb el programador de tasques on trobareu aquesta alarma que us ha creat l’assistent dintre de la secció de tasques del visor d’esdeveniments.</div>
</li>
</ul>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="auditoria_en_linux_configuracio_paquet_syslog" >Auditoria en Linux. Configuració paquet syslog</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat consisteix a dissenyar un <strong>pla d’auditoria i registre a Linux</strong> configurant les possibilitats que ens ofereix el paquet d’aplicacions syslog.
</p>

<p>
Voleu configurar el gestor d’arxius de registre syslog per aconseguir els objectius següents:
</p>
<ul>
<li class="level1"><div class="li"> Enviar tots els missatges de qualsevol origen i de categoria crítica (o prioritat superior) a un arxiu específic anomenat “MissatgesCritics.log”.</div>
</li>
<li class="level1"><div class="li"> Voleu enviar a la consola de l’usuari root tots els missatges generats pel sistema de correus i pel sistema d’autoritzacions d’accés. Els missatges d’autoritzacions d’accés també els voleu guardar en un arxiu “MissatgesAuth”.</div>
</li>
<li class="level1"><div class="li"> Voleu enviar a la impressora tots els missatges d’error (només els d’aquesta prioritat) sigui quin sigui el seu origen.</div>
</li>
<li class="level1"><div class="li"> Voleu enviar a la segona consola virtual tots els missatges provinents del nucli del sistema i els del dimoni de programació cron que siguin d’emergència.</div>
</li>
</ul>

<p>
<form action=""><div class="solution ioccontent">
<p>
Si treballeu amb una versió actual d’Ubuntu amb el paquet syslog, cal que sapigueu que <strong>ha estat actualitzat el paquet rsyslog</strong>, el qual aporta alguna nova prestació però conservant compatibilitat.
</p>

<p>
L’arxiu principal de configuració de rsyslog el trobeu a: 
</p>
<pre class="code">/etc/rsyslog-conf</pre>

<p>
Inclou diferents definicions globals i una línia al final de l’arxiu:
</p>
<pre class="code">$IncludeConfig /etc/rsyslog.d/*.conf</pre>

<p>
Aquesta línia carrega els diferents arxius de configuració que es troben al directori <strong>/etc/rsyslog.d</strong>, en especial el fitxer de configuració per defecte dels arxius de registre anomenat:
</p>
<pre class="code">/etc/rsyslog.d/50-default.conf</pre>

<p>
Podeu consultar el seu contingut i veure com es generen els diferents registres del sistema.
</p>

<p>
Fent servir aquest procediment podeu crear el vostre arxiu particular d’auditoria i posar-lo en aquest directori sense modificar els arxius de configuració existents. Per tant, el pas següent serà crear amb l’editor de text un nou arxiu anomenat exercici.conf amb les directives adequades i el situareu en aquest directori <strong>/etc/rsyslog.d</strong>.
</p>

<p>
Veieu quines directives inclourà aquest arxiu:
</p>
<ul>
<li class="level1"><div class="li"> Enviar tots els missatges de qualsevol origen i de categoria crítica (o prioritat superior) a un arxiu específic anomenat “MissatgesCritics.log”</div>
</li>
</ul>
<pre class="code">*.crit  			/var/log/MissatgesCritics.log</pre>
<ul>
<li class="level1"><div class="li"> Enviar a la consola de l’usuari root tots els missatges generats pel sistema de correus i pel sistema d’autoritzacions d’accés. Els missatges d’autoritzacions d’accés també es volen guardar a un arxiu “MissatgesAuth.log”</div>
</li>
</ul>
<pre class="code">mail,authpriv.*			root
authpriv.*			/var/log/MissatgesAuth.log</pre>
<ul>
<li class="level1"><div class="li"> Enviar a la impressora tots els missatges d’error i només els d’aquesta prioritat sigui quin sigui el seu origen.</div>
</li>
</ul>
<pre class="code">*.=err				/dev/lp1</pre>
<ul>
<li class="level1"><div class="li"> Enviar a la segona consola virtual tots els missatges provinents del nucli del sistema i els del dimoni de programació cron que siguin d’emergència.</div>
</li>
</ul>
<pre class="code">kern.*;cron.emerg		/dev/tty2</pre>
<ul>
<li class="level1"><div class="li"> L’arxiu final quedaria així:</div>
</li>
</ul>
<pre class="code">#  Exercici d&#039;auditoria en Linux. Arxiu auditoria.conf


# Enviar tots els missatges de qualsevol origen i de categoria crítica 
# (o prioritat superior) a un arxiu específic anomenat &quot;MissatgesCritics.log&quot;

*.crit				/var/log/MissatgesCritics.log

# Enviar a la consola de l&#039;usuari root tots els missatges generats pel sistema 
# de correus i pel sistema d&#039;autoritzacions d&#039;accés. Els missatges d&#039;autoritzacions
# d&#039;accés també es volen guardar en un arxiu &quot;MissatgesAuth&quot;

mail,authpriv.*			root
authpriv.*			/var/log/MissatgesAuth

# Enviar a la impressora tots els missatges d&#039;error (només els d&#039;aquesta prioritat)
# sigui quin sigui el seu origen

*.=err				/dev/lp1

# Enviar a la segona consola virtual tots els missatges provinents del nucli 
# del sistema i tots els missatges d&#039;emergència del dimoni de programació cron

kern.*;cron.emerg		/dev/tty2</pre>
<ul>
<li class="level1"><div class="li"> Una vegada guardat aquest arxiu en el directori <strong>/etc/rsyslog.d</strong> podeu restaurar el servei de registres perquè actualitzi la seva nova configuració reiniciant el dimoni:</div>
</li>
</ul>
<pre class="code">$ sudo service rsyslog restart
rsyslog start/running, process 2504</pre>

<p>
Per comprovar el funcionament de l’auditoria aneu a la segona consola virtual tty2 (Ctrl+Alr+F2) i segurament veureu uns quants missatges del nucli del sistema. També podeu fer una ullada a l’arxiu /var/log/MissatgesAuth i comprovareu els esdeveniments relacionats amb autoritzacions. 
</p>

<p>
De fet, aquest arxiu ja està disponible per defecte a /var/log/auth.log i és molt útil per extreure informació important de seguretat com ara els intents d’accés no vàlids. Per exemple, l’ordre següent seleccionaria aquestes incidències:
</p>
<pre class="code">$ cat /var/log/auth.log|grep &quot;FAILED&quot;</pre>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="configuracio_dels_arxius_de_log_a_linuxlogrotate" >Configuració dels arxius de log a Linux: Logrotate</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat consisteix a conèixer les possibilitats de la <strong>utilitat logrotate</strong> de Linux per a la gestió de l’emmagatzematge dels arxius de registre tot indicant amb detall el procés de configuració, arxius implicats i programació periòdica de la gestió d’arxius de registre.
</p>

<p>
<form action=""><div class="solution ioccontent">
<p>
El paquet syslog no ofereix cap control sobre la mida dels arxius i les accions a fer quan aquests arxius creixen sense control. Per gestionar durant quant de temps i de quina manera emmagatzemeu els fitxers de log del sistema disposeu del paquet <strong>logrotate</strong> que habitualment incorporen la majoria de distribucions Linux. En cas de no tenir-ho instal·lat simplement executar:
</p>
<pre class="code">sudo apt-get install logrotate</pre>

<p>
El paquet <strong>logrotate</strong> permet la rotació automàtica dels arxius de registre, la seva compressió, esborrament, i fins i tot enviament per correus. Cada arxiu de registre es pot tractar periòdicament o quan sobrepassi una determinada mida.
</p>

<p>
Hi ha molta informació a Internet per entendre i configurar aquesta utilitat, i primer de tot sempre cal consultar la pàgina man que trobareu en castellà a:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://manpages.ubuntu.com/manpages/hardy/es/man8/logrotate.8.html" class="urlextern" title="http://manpages.ubuntu.com/manpages/hardy/es/man8/logrotate.8.html"  rel="nofollow">http://manpages.ubuntu.com/manpages/hardy/es/man8/logrotate.8.html</a></div>
</li>
</ul>

<p>
Trobareu més informació molt entenedora en anglès en aquests dos articles:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://articles.slicehost.com/2010/6/30/understanding-logrotate-on-ubuntu-part-1" class="urlextern" title="http://articles.slicehost.com/2010/6/30/understanding-logrotate-on-ubuntu-part-1"  rel="nofollow">http://articles.slicehost.com/2010/6/30/understanding-logrotate-on-ubuntu-part-1</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://articles.slicehost.com/2010/6/30/understanding-logrotate-on-ubuntu-part-2" class="urlextern" title="http://articles.slicehost.com/2010/6/30/understanding-logrotate-on-ubuntu-part-2"  rel="nofollow">http://articles.slicehost.com/2010/6/30/understanding-logrotate-on-ubuntu-part-2</a></div>
</li>
</ul>

<p>
I finalment un “How-to” amb exemples de configuració a:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://www.thegeekstuff.com/2010/07/logrotate-examples/" class="urlextern" title="http://www.thegeekstuff.com/2010/07/logrotate-examples/"  rel="nofollow">http://www.thegeekstuff.com/2010/07/logrotate-examples/</a></div>
</li>
</ul>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u9/a3/continguts.html">Directives de seguretat i auditories</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u9/a3/exercicis.html">Exercicis d'autoavaluació</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
